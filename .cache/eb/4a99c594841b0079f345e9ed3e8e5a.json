{"id":"T2fP","dependencies":[{"name":"/Users/80006001jigararvindbhaimakwana/Desktop/Experiments/Learning/Node/GIT-Repo/natours/package.json","includedInParent":true,"mtime":1746593933158},{"name":"/Users/80006001jigararvindbhaimakwana/Desktop/Experiments/Learning/Node/GIT-Repo/natours/node_modules/@turf/turf/package.json","includedInParent":true,"mtime":1745398804483}],"generated":{"js":"var define;\nvar t;!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof t&&t.amd?t([\"exports\"],n):n((e=\"undefined\"!=typeof globalThis?globalThis:e||self).turf={})}(this,function(t){\"use strict\";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function n(t){if(Array.isArray(t))return t}function r(t,e,n){return e=l(e),function(t,e){if(e&&(\"object\"==typeof e||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,\"prototype\",{writable:!1}),t}function a(t,e){var n=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=m(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function u(t,e,n){return(e=d(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&g(t,e)}function c(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}function f(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return n(t)||function(t,e){var n=null==t?null:\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=n){var r,i,o,s,a=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(t,e)||m(t,e)||f()}function v(t){return function(t){if(Array.isArray(t))return e(t)}(t)||c(t)||m(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function d(t){var e=function(t,e){if(\"object\"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if(\"object\"!=typeof r)return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t,\"string\");return\"symbol\"==typeof e?e:e+\"\"}function y(t){return(y=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function m(t,n){if(t){if(\"string\"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return\"Object\"===r&&t.constructor&&(r=t.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}var _=6371008.8,x={centimeters:100*_,centimetres:100*_,degrees:360/(2*Math.PI),feet:3.28084*_,inches:39.37*_,kilometers:_/1e3,kilometres:_/1e3,meters:_,metres:_,miles:_/1609.344,millimeters:1e3*_,millimetres:1e3*_,nauticalmiles:_/1852,radians:1,yards:1.0936*_},E={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,nauticalmiles:2.9155334959812285e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function k(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={type:\"Feature\"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function b(t,e){switch(t){case\"Point\":return w(e).geometry;case\"LineString\":return M(e).geometry;case\"Polygon\":return N(e).geometry;case\"MultiPoint\":return T(e).geometry;case\"MultiLineString\":return C(e).geometry;case\"MultiPolygon\":return O(e).geometry;default:throw new Error(t+\" is invalid\")}}function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error(\"coordinates is required\");if(!Array.isArray(t))throw new Error(\"coordinates must be an Array\");if(t.length<2)throw new Error(\"coordinates must be at least 2 numbers long\");if(!X(t[0])||!X(t[1]))throw new Error(\"coordinates must contain numbers\");return k({type:\"Point\",coordinates:t},e,n)}function I(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P(t.map(function(t){return w(t,e)}),n)}function N(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.length<4)throw new Error(\"Each LinearRing of a Polygon must have 4 or more Positions.\");if(o[o.length-1].length!==o[0].length)throw new Error(\"First and last Position are not equivalent.\");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error(\"First and last Position are not equivalent.\")}}catch(t){i.e(t)}finally{i.f()}return k({type:\"Polygon\",coordinates:t},e,r)}function S(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P(t.map(function(t){return N(t,e)}),n)}function M(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.length<2)throw new Error(\"coordinates must be an array of two or more positions\");return k({type:\"LineString\",coordinates:t},e,n)}function L(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P(t.map(function(t){return M(t,e)}),n)}function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={type:\"FeatureCollection\"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function C(t,e){return k({type:\"MultiLineString\",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function T(t,e){return k({type:\"MultiPoint\",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function O(t,e){return k({type:\"MultiPolygon\",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function R(t,e){return k({type:\"GeometryCollection\",geometries:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&!(e>=0))throw new Error(\"precision must be a positive number\");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"kilometers\",n=x[e];if(!n)throw new Error(e+\" units is invalid\");return t*n}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"kilometers\",n=x[e];if(!n)throw new Error(e+\" units is invalid\");return t/n}function q(t,e){return B(F(t,e))}function V(t){var e=t%360;return e<0&&(e+=360),e}function G(t){return(t%=360)>180?t-360:t<-180?t+360:t}function B(t){return t%(2*Math.PI)*180/Math.PI}function Y(t){return t%360*Math.PI/180}function z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"kilometers\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"kilometers\";if(!(t>=0))throw new Error(\"length must be a positive number\");return D(F(t,e),n)}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"meters\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"kilometers\";if(!(t>=0))throw new Error(\"area must be a positive number\");var r=E[e];if(!r)throw new Error(\"invalid original units\");var i=E[n];if(!i)throw new Error(\"invalid final units\");return t/r*i}function X(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function U(t){return null!==t&&\"object\"===y(t)&&!Array.isArray(t)}function Z(t){if(!t)throw new Error(\"bbox is required\");if(!Array.isArray(t))throw new Error(\"bbox must be an Array\");if(4!==t.length&&6!==t.length)throw new Error(\"bbox must be an Array of 4 or 6 numbers\");t.forEach(function(t){if(!X(t))throw new Error(\"bbox must only contain numbers\")})}function H(t){if(!t)throw new Error(\"id is required\");if(-1===[\"string\",\"number\"].indexOf(y(t)))throw new Error(\"id must be a number or a string\")}var W=Object.freeze({__proto__:null,areaFactors:E,azimuthToBearing:G,bearingToAzimuth:V,convertArea:j,convertLength:z,degreesToRadians:Y,earthRadius:_,factors:x,feature:k,featureCollection:P,geometry:b,geometryCollection:R,isNumber:X,isObject:U,lengthToDegrees:q,lengthToRadians:F,lineString:M,lineStrings:L,multiLineString:C,multiPoint:T,multiPolygon:O,point:w,points:I,polygon:N,polygons:S,radiansToDegrees:B,radiansToLength:D,round:A,validateBBox:Z,validateId:H});function J(t){if(!t)throw new Error(\"coord is required\");if(!Array.isArray(t)){if(\"Feature\"===t.type&&null!==t.geometry&&\"Point\"===t.geometry.type)return v(t.geometry.coordinates);if(\"Point\"===t.type)return v(t.coordinates)}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return v(t);throw new Error(\"coord must be GeoJSON Point or an Array of numbers\")}function K(t){if(Array.isArray(t))return t;if(\"Feature\"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error(\"coords must be GeoJSON Feature, Geometry Object or an Array\")}function Q(t){if(t.length>1&&X(t[0])&&X(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Q(t[0]);throw new Error(\"coordinates must only contain numbers\")}function $(t,e,n){if(!e||!n)throw new Error(\"type and name required\");if(!t||t.type!==e)throw new Error(\"Invalid input to \"+n+\": must be a \"+e+\", given \"+t.type)}function tt(t,e,n){if(!t)throw new Error(\"No feature passed\");if(!n)throw new Error(\".featureOf() requires a name\");if(!t||\"Feature\"!==t.type||!t.geometry)throw new Error(\"Invalid input to \"+n+\", Feature with geometry required\");if(!t.geometry||t.geometry.type!==e)throw new Error(\"Invalid input to \"+n+\": must be a \"+e+\", given \"+t.geometry.type)}function et(t,e,n){if(!t)throw new Error(\"No featureCollection passed\");if(!n)throw new Error(\".collectionOf() requires a name\");if(!t||\"FeatureCollection\"!==t.type)throw new Error(\"Invalid input to \"+n+\", FeatureCollection required\");var r,i=a(t.features);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!o||\"Feature\"!==o.type||!o.geometry)throw new Error(\"Invalid input to \"+n+\", Feature with geometry required\");if(!o.geometry||o.geometry.type!==e)throw new Error(\"Invalid input to \"+n+\": must be a \"+e+\", given \"+o.geometry.type)}}catch(t){i.e(t)}finally{i.f()}}function nt(t){return\"Feature\"===t.type?t.geometry:t}function rt(t,e){return\"FeatureCollection\"===t.type?\"FeatureCollection\":\"GeometryCollection\"===t.type?\"GeometryCollection\":\"Feature\"===t.type&&null!==t.geometry?t.geometry.type:t.type}var it=Object.freeze({__proto__:null,collectionOf:et,containsNumber:Q,featureOf:tt,geojsonType:$,getCoord:J,getCoords:K,getGeom:nt,getType:rt});function ot(t,e){if(!0===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final)return function(t,e){var n=ot(e,t);return(n+180)%360}(t,e);var n=J(t),r=J(e),i=Y(n[0]),o=Y(r[0]),s=Y(n[1]),a=Y(r[1]),u=Math.sin(o-i)*Math.cos(a),l=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(o-i);return B(Math.atan2(u,l))}function st(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=J(t),o=Y(i[0]),s=Y(i[1]),a=Y(n),u=F(e,r.units),l=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a));return w([B(o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(l))),B(l)],r.properties)}function at(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=J(t),i=J(e),o=Y(i[1]-r[1]),s=Y(i[0]-r[0]),a=Y(r[1]),u=Y(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return D(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function ut(t,e){var n;return(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final?lt(J(e),J(t)):lt(J(t),J(e)))>180?-(360-n):n}function lt(t,e){var n=Y(t[1]),r=Y(e[1]),i=Y(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(B(Math.atan2(i,o))+360)%360}function ht(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,h,c=0,f=0,g=t.type,p=\"FeatureCollection\"===g,v=\"Feature\"===g,d=p?t.features.length:1,y=0;y<d;y++){a=(h=!!(l=p?t.features[y].geometry:v?t.geometry:t)&&\"GeometryCollection\"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,x=0;if(null!==(s=h?l.geometries[m]:l)){u=s.coordinates;var E=s.type;switch(c=!n||\"Polygon\"!==E&&\"MultiPolygon\"!==E?0:1,E){case null:break;case\"Point\":if(!1===e(u,f,y,_,x))return!1;f++,_++;break;case\"LineString\":case\"MultiPoint\":for(r=0;r<u.length;r++){if(!1===e(u[r],f,y,_,x))return!1;f++,\"MultiPoint\"===E&&_++}\"LineString\"===E&&_++;break;case\"Polygon\":case\"MultiLineString\":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(!1===e(u[r][i],f,y,_,x))return!1;f++}\"MultiLineString\"===E&&_++,\"Polygon\"===E&&x++}\"Polygon\"===E&&_++;break;case\"MultiPolygon\":for(r=0;r<u.length;r++){for(x=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(!1===e(u[r][i][o],f,y,_,x))return!1;f++}x++}_++}break;case\"GeometryCollection\":for(r=0;r<s.geometries.length;r++)if(!1===ht(s.geometries[r],e,n))return!1;break;default:throw new Error(\"Unknown Geometry Type\")}}}}}function ct(t,e,n,r){var i=n;return ht(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i}function ft(t,e){var n;switch(t.type){case\"FeatureCollection\":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case\"Feature\":e(t.properties,0)}}function gt(t,e,n){var r=n;return ft(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function pt(t,e){if(\"Feature\"===t.type)e(t,0);else if(\"FeatureCollection\"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function vt(t,e,n){var r=n;return pt(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function dt(t){var e=[];return ht(t,function(t){e.push(t)}),e}function yt(t,e){var n,r,i,o,s,a,u,l,h,c,f=0,g=\"FeatureCollection\"===t.type,p=\"Feature\"===t.type,v=g?t.features.length:1;for(n=0;n<v;n++){for(a=g?t.features[n].geometry:p?t.geometry:t,l=g?t.features[n].properties:p?t.properties:{},h=g?t.features[n].bbox:p?t.bbox:void 0,c=g?t.features[n].id:p?t.id:void 0,s=(u=!!a&&\"GeometryCollection\"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case\"Point\":case\"LineString\":case\"MultiPoint\":case\"Polygon\":case\"MultiLineString\":case\"MultiPolygon\":if(!1===e(o,f,l,h,c))return!1;break;case\"GeometryCollection\":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,h,c))return!1;break;default:throw new Error(\"Unknown Geometry Type\")}else if(!1===e(null,f,l,h,c))return!1;f++}}function mt(t,e,n){var r=n;return yt(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r}function _t(t,e){yt(t,function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case\"Point\":case\"LineString\":case\"Polygon\":return!1!==e(k(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case\"MultiPoint\":s=\"Point\";break;case\"MultiLineString\":s=\"LineString\";break;case\"MultiPolygon\":s=\"Polygon\"}for(var u=0;u<t.coordinates.length;u++){var l=t.coordinates[u];if(!1===e(k({type:s,coordinates:l},r),n,u))return!1}})}function xt(t,e,n){var r=n;return _t(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function Et(t,e){_t(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if(\"Point\"!==o&&\"MultiPoint\"!==o){var s,a=0,u=0,l=0;return!1!==ht(t,function(o,h,c,f,g){if(void 0===s||n>a||f>u||g>l)return s=o,a=n,u=f,l=g,void(i=0);var p=M([s,o],t.properties);if(!1===e(p,n,r,g,i))return!1;i++,s=o})&&void 0}}})}function kt(t,e,n){var r=n,i=!1;return Et(t,function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0}),r}function bt(t,e){if(!t)throw new Error(\"geojson is required\");_t(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case\"LineString\":if(!1===e(t,n,r,0,0))return!1;break;case\"Polygon\":for(var s=0;s<o.length;s++)if(!1===e(M(o[s],t.properties),n,r,s))return!1}}})}function wt(t,e,n){var r=n;return bt(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r}function It(t,e){if(!U(e=e||{}))throw new Error(\"options is invalid\");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case\"FeatureCollection\":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case\"Feature\":a=a||t.properties,n=t.geometry;break;case\"Point\":case\"MultiPoint\":return null;case\"LineString\":case\"Polygon\":case\"MultiLineString\":case\"MultiPolygon\":n=t;break;default:throw new Error(\"geojson is invalid\")}if(null===n)return null;var u=n.coordinates;switch(n.type){case\"Point\":case\"MultiPoint\":return null;case\"LineString\":return s<0&&(s=u.length+s-1),M([u[s],u[s+1]],a,e);case\"Polygon\":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),M([u[o][s],u[o][s+1]],a,e);case\"MultiLineString\":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),M([u[i][s],u[i][s+1]],a,e);case\"MultiPolygon\":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),M([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error(\"geojson is invalid\")}function Nt(t,e){if(!U(e=e||{}))throw new Error(\"options is invalid\");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case\"FeatureCollection\":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case\"Feature\":a=a||t.properties,n=t.geometry;break;case\"Point\":case\"MultiPoint\":return null;case\"LineString\":case\"Polygon\":case\"MultiLineString\":case\"MultiPolygon\":n=t;break;default:throw new Error(\"geojson is invalid\")}if(null===n)return null;var u=n.coordinates;switch(n.type){case\"Point\":return w(u,a,e);case\"MultiPoint\":return i<0&&(i=u.length+i),w(u[i],a,e);case\"LineString\":return s<0&&(s=u.length+s),w(u[s],a,e);case\"Polygon\":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),w(u[o][s],a,e);case\"MultiLineString\":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),w(u[i][s],a,e);case\"MultiPolygon\":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),w(u[i][o][s],a,e)}throw new Error(\"geojson is invalid\")}var St=Object.freeze({__proto__:null,coordAll:dt,coordEach:ht,coordReduce:ct,featureEach:pt,featureReduce:vt,findPoint:Nt,findSegment:It,flattenEach:_t,flattenReduce:xt,geomEach:yt,geomReduce:mt,lineEach:bt,lineReduce:wt,propEach:ft,propReduce:gt,segmentEach:Et,segmentReduce:kt});function Mt(t){return mt(t,function(t,e){return t+function(t){var e,n=0;switch(t.type){case\"Polygon\":return Lt(t.coordinates);case\"MultiPolygon\":for(e=0;e<t.coordinates.length;e++)n+=Lt(t.coordinates[e]);return n;case\"Point\":case\"MultiPoint\":case\"LineString\":case\"MultiLineString\":return 0}return 0}(e)},0)}function Lt(t){var e=0;if(t&&t.length>0){e+=Math.abs(Tt(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Tt(t[n]))}return e}var Pt=_*_/2,Ct=Math.PI/180;function Tt(t){var e=t.length-1;if(e<=2)return 0;for(var n=0,r=0;r<e;){var i=t[r],o=t[r+1===e?0:r+1],s=t[r+2>=e?(r+2)%e:r+2],a=i[0]*Ct,u=o[1]*Ct;n+=(s[0]*Ct-a)*Math.sin(u),r++}return n*Pt}function Ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t.bbox&&!0!==e.recompute)return t.bbox;var n=[1/0,1/0,-1/0,-1/0];return ht(t,function(t){n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),n[2]<t[0]&&(n[2]=t[0]),n[3]<t[1]&&(n[3]=t[1])}),n}function Rt(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Dt(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Dt(a=t[s],e)&r))!==o&&n.push(At(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n}function At(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Dt(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Ft(t,e){var n,r=[],i=a(t);try{for(i.s();!(n=i.n()).done;){var o=Rt(n.value,e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}}catch(t){i.e(t)}finally{i.f()}return r}function qt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error(\"@turf/bbox-polygon does not support BBox with 6 positions\");var s=[n,r];return N([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}var Vt=s(function t(e){i(this,t),this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var r=0;r<this.length-1;r++){var o=this.points[r],s=this.points[r+1];this.centers.push({x:(o.x+s.x)/2,y:(o.y+s.y)/2,z:(o.z+s.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var a=0;a<this.centers.length-1;a++){var u=this.points[a+1].x-(this.centers[a].x+this.centers[a+1].x)/2,l=this.points[a+1].y-(this.centers[a].y+this.centers[a+1].y)/2,h=this.points[a+1].z-(this.centers[a].y+this.centers[a+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a].x+u),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a].y+l),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a].z+h)},{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a+1].x+u),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a+1].y+l),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a+1].z+h)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this},[{key:\"cacheSteps\",value:function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e}},{key:\"vector\",value:function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}}},{key:\"pos\",value:function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}]);function Gt(t){for(var e,n,r=K(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function Bt(t,e){for(var n=0,r=0,i=0,o=0,s=0,a=0,u=0,l=0,h=null,c=null,f=t[0],g=t[1],p=e.length;n<p;n++){r=0;var v=e[n].length-1,d=e[n];if((h=d[0])[0]!==d[v][0]&&h[1]!==d[v][1])throw new Error(\"First and last coordinates in a ring must be the same\");for(s=h[0]-f,a=h[1]-g;r<v;r++)if(l=(c=d[r+1])[1]-g,a<0&&l<0||a>0&&l>0)a=l,s=(h=c)[0]-f;else{if(u=c[0]-t[0],l>0&&a<=0){if((o=s*l-u*a)>0)i+=1;else if(0===o)return 0}else if(a>0&&l<=0){if((o=s*l-u*a)<0)i+=1;else if(0===o)return 0}else if(0===l&&a<0){if(0==(o=s*l-u*a))return 0}else if(0===a&&l<0){if(0==(o=s*l-u*a))return 0}else if(0===a&&0===l){if(u<=0&&s>=0)return 0;if(s<=0&&u>=0)return 0}h=c,a=l,s=u}}return i%2!=0}function Yt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error(\"point is required\");if(!e)throw new Error(\"polygon is required\");var r=J(t),i=nt(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;\"Polygon\"===o&&(a=[a]);for(var u=!1,l=0;l<a.length;++l){var h=Bt(r,a[l]);if(0===h)return!n.ignoreBoundary;h&&(u=!0)}return u}function zt(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=J(t),i=K(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s=\"start\"),o===i.length-2&&(s=\"end\"),0===o&&o+1===i.length-1&&(s=\"both\")),jt(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function jt(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],u=t[1],l=e[0],h=e[1],c=l-a,f=h-u,g=(n[0]-a)*f-(n[1]-u)*c;if(null!==i){if(Math.abs(g)>i)return!1}else if(0!==g)return!1;return Math.abs(c)===Math.abs(f)&&0===Math.abs(c)?!r&&n[0]===t[0]&&n[1]===t[1]:r?\"start\"===r?Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=h:h<=s&&s<u:\"end\"===r?Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<h:h<s&&s<=u:\"both\"===r&&(Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<h:h<s&&s<u):Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=h:h<=s&&s<=u}function Xt(t,e){if(\"Feature\"===t.type&&null===t.geometry)return!1;if(\"Feature\"===e.type&&null===e.geometry)return!1;if(!Ut(Ot(t),Ot(e)))return!1;var n,r=a(nt(e).coordinates);try{for(r.s();!(n=r.n()).done;){var i,o=a(n.value);try{for(o.s();!(i=o.n()).done;)if(!Yt(i.value,t))return!1}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}return!0}function Ut(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Zt(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ht(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var Wt=s(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt;if(i(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)},[{key:\"push\",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:\"pop\",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:\"peek\",value:function(){return this.data[0]}},{key:\"_up\",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:\"_down\",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}}]);function Jt(t,e){return t<e?-1:t>e?1:0}function Kt(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function Qt(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}var $t=s(function t(e,n,r,o){i(this,t),this.p={x:e[0],y:e[1]},this.featureId=n,this.ringId=r,this.eventId=o,this.otherEvent=null,this.isLeftEndpoint=null},[{key:\"isSamePoint\",value:function(t){return this.p.x===t.p.x&&this.p.y===t.p.y}}]),te=0,ee=0,ne=0;function re(t,e){var n=\"Feature\"===t.type?t.geometry:t,r=n.coordinates;\"Polygon\"!==n.type&&\"MultiLineString\"!==n.type||(r=[r]),\"LineString\"===n.type&&(r=[[r]]);for(var i=0;i<r.length;i++)for(var o=0;o<r[i].length;o++){var s=r[i][o][0],a=null;ee+=1;for(var u=0;u<r[i][o].length-1;u++){a=r[i][o][u+1];var l=new $t(s,te,ee,ne),h=new $t(a,te,ee,ne+1);l.otherEvent=h,h.otherEvent=l,Kt(l,h)>0?(h.isLeftEndpoint=!0,l.isLeftEndpoint=!1):(l.isLeftEndpoint=!0,h.isLeftEndpoint=!1),e.push(l),e.push(h),s=a,ne+=1}}te+=1}var ie=s(function t(e){i(this,t),this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent});function oe(t,e){if(null===t||null===e)return!1;if(t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;var n=t.leftSweepEvent.p.x,r=t.leftSweepEvent.p.y,i=t.rightSweepEvent.p.x,o=t.rightSweepEvent.p.y,s=e.leftSweepEvent.p.x,a=e.leftSweepEvent.p.y,u=e.rightSweepEvent.p.x,l=e.rightSweepEvent.p.y,h=(l-a)*(i-n)-(u-s)*(o-r);if(0===h)return!1;var c=((u-s)*(r-a)-(l-a)*(n-s))/h,f=((i-n)*(r-a)-(o-r)*(n-s))/h;return c>=0&&c<=1&&f>=0&&f<=1&&[n+c*(i-n),r+c*(o-r)]}var se=function(t,e){var n=new Wt([],Kt);return function(t,e){if(\"FeatureCollection\"===t.type)for(var n=t.features,r=0;r<n.length;r++)re(n[r],e);else re(t,e)}(t,n),function(t,e){e=e||!1;for(var n=[],r=new Wt([],Qt);t.length;){var i=t.pop();if(i.isLeftEndpoint){for(var o=new ie(i),s=0;s<r.data.length;s++){var a=r.data[s];if(!e||a.leftSweepEvent.featureId!==i.featureId){var u=oe(o,a);!1!==u&&n.push(u)}}r.push(o)}else!1===i.isLeftEndpoint&&r.pop()}return n}(n,e)};function ae(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.removeDuplicates,i=void 0===r||r,o=n.ignoreSelfIntersections,s=void 0===o||o,a=[];\"FeatureCollection\"===t.type?a=a.concat(t.features):\"Feature\"===t.type?a.push(t):\"LineString\"!==t.type&&\"Polygon\"!==t.type&&\"MultiLineString\"!==t.type&&\"MultiPolygon\"!==t.type||a.push(k(t)),\"FeatureCollection\"===e.type?a=a.concat(e.features):\"Feature\"===e.type?a.push(e):\"LineString\"!==e.type&&\"Polygon\"!==e.type&&\"MultiLineString\"!==e.type&&\"MultiPolygon\"!==e.type||a.push(k(e));var u=se(P(a),s),l=[];if(i){var h={};u.forEach(function(t){var e=t.join(\",\");h[e]||(h[e]=!0,l.push(t))})}else l=u;return P(l.map(function(t){return w(t)}))}function ue(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=nt(t);switch(e.properties||\"Feature\"!==t.type||(e.properties=t.properties),n.type){case\"Polygon\":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return le(nt(t).coordinates,e.properties?e.properties:\"Feature\"===t.type?t.properties:{})}(n,e);case\"MultiPolygon\":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=nt(t).coordinates,r=e.properties?e.properties:\"Feature\"===t.type?t.properties:{},i=[];return n.forEach(function(t){i.push(le(t,r))}),P(i)}(n,e);default:throw new Error(\"invalid poly\")}}function le(t,e){return t.length>1?C(t,e):M(t[0],e)}function he(t,e){var n=nt(t),r=nt(e),i=n.type,o=r.type;switch(i){case\"MultiPoint\":switch(o){case\"LineString\":return ce(n,r);case\"Polygon\":return ge(n,r);default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"LineString\":switch(o){case\"MultiPoint\":return ce(r,n);case\"LineString\":return function(t,e){if(ae(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),pe(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case\"Polygon\":return fe(n,r);default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"Polygon\":switch(o){case\"MultiPoint\":return ge(r,n);case\"LineString\":return fe(r,n);default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}default:throw new Error(\"feature1 \"+i+\" geometry not supported\")}}function ce(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),pe(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function fe(t,e){return ae(t,ue(e)).features.length>0}function ge(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)Yt(w(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function pe(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function ve(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ignoreSelfIntersections:!0}).ignoreSelfIntersections,r=void 0===n||n,i=!0;return _t(t,function(t){_t(e,function(e){if(!1===i)return!1;i=function(t,e,n){switch(t.type){case\"Point\":switch(e.type){case\"Point\":return r=t.coordinates,i=e.coordinates,!(r[0]===i[0]&&r[1]===i[1]);case\"LineString\":return!de(e,t);case\"Polygon\":return!Yt(t,e)}break;case\"LineString\":switch(e.type){case\"Point\":return!de(t,e);case\"LineString\":return!function(t,e,n){return ae(t,e,{ignoreSelfIntersections:n}).features.length>0}(t,e,n);case\"Polygon\":return!ye(e,t,n)}break;case\"Polygon\":switch(e.type){case\"Point\":return!Yt(e,t);case\"LineString\":return!ye(t,e,n);case\"Polygon\":return!function(t,e,n){var r,i=a(t.coordinates[0]);try{for(i.s();!(r=i.n()).done;)if(Yt(r.value,e))return!0}catch(t){i.e(t)}finally{i.f()}var o,s=a(e.coordinates[0]);try{for(s.s();!(o=s.n()).done;)if(Yt(o.value,t))return!0}catch(t){s.e(t)}finally{s.f()}return ae(ue(t),ue(e),{ignoreSelfIntersections:n}).features.length>0}(e,t,n)}}var r,i;return!1}(t.geometry,e.geometry,r)})}),i}function de(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(me(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ye(t,e,n){var r,i=a(e.coordinates);try{for(i.s();!(r=i.n()).done;)if(Yt(r.value,t))return!0}catch(t){i.e(t)}finally{i.f()}return ae(e,ue(t),{ignoreSelfIntersections:n}).features.length>0}function me(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==r*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}var _e=Object.defineProperty,xe=function(t,e){return _e(t,\"name\",{value:e,configurable:!0})},Ee=s(function t(e){var n,r,o;i(this,t),this.direction=!1,this.compareProperties=!0,this.precision=Math.pow(10,-(null!=(n=null==e?void 0:e.precision)?n:17)),this.direction=null!=(r=null==e?void 0:e.direction)&&r,this.compareProperties=null==(o=null==e?void 0:e.compareProperties)||o},[{key:\"compare\",value:function(t,e){var n=this;if(t.type!==e.type)return!1;if(!be(t,e))return!1;switch(t.type){case\"Point\":return this.compareCoord(t.coordinates,e.coordinates);case\"LineString\":return this.compareLine(t.coordinates,e.coordinates);case\"Polygon\":return this.comparePolygon(t,e);case\"GeometryCollection\":return this.compareGeometryCollection(t,e);case\"Feature\":return this.compareFeature(t,e);case\"FeatureCollection\":return this.compareFeatureCollection(t,e);default:if(t.type.startsWith(\"Multi\")){var r=we(t),i=we(e);return r.every(function(t){return i.some(function(e){return n.compare(t,e)})})}}return!1}},{key:\"compareCoord\",value:function(t,e){var n=this;return t.length===e.length&&t.every(function(t,r){return Math.abs(t-e[r])<n.precision})}},{key:\"compareLine\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!be(t,e))return!1;var i=t,o=e;if(r&&!this.compareCoord(i[0],o[0])){var s=this.fixStartIndex(o,i);if(!s)return!1;o=s}var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},{key:\"fixStartIndex\",value:function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n}},{key:\"comparePath\",value:function(t,e){var n=this;return t.every(function(t,r){return n.compareCoord(t,e[r])})}},{key:\"comparePolygon\",value:function(t,e){var n=this;if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length);return r.every(function(t){return i.some(function(e){return n.compareLine(t,e,1,!0)})})}return!1}},{key:\"compareGeometryCollection\",value:function(t,e){var n=this;return be(t.geometries,e.geometries)&&this.compareBBox(t,e)&&t.geometries.every(function(t,r){return n.compare(t,e.geometries[r])})}},{key:\"compareFeature\",value:function(t,e){return t.id===e.id&&(!this.compareProperties||Ne(t.properties,e.properties))&&this.compareBBox(t,e)&&this.compare(t.geometry,e.geometry)}},{key:\"compareFeatureCollection\",value:function(t,e){var n=this;return be(t.features,e.features)&&this.compareBBox(t,e)&&t.features.every(function(t,r){return n.compare(t,e.features[r])})}},{key:\"compareBBox\",value:function(t,e){return Boolean(!t.bbox&&!e.bbox)||!(!t.bbox||!e.bbox)&&this.compareCoord(t.bbox,e.bbox)}}]);xe(Ee,\"GeojsonEquality\");var ke=Ee;function be(t,e){return t.coordinates?t.coordinates.length===e.coordinates.length:t.length===e.length}function we(t){return t.coordinates.map(function(e){return{type:t.type.replace(\"Multi\",\"\"),coordinates:e}})}function Ie(t,e,n){return new ke(n).compare(t,e)}function Ne(t,e){if(null===t&&null===e)return!0;if(null===t||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0,o=n;i<o.length;i++){var s=o[i],a=t[s],u=e[s],l=Se(a)&&Se(u);if(l&&!Ne(a,u)||!l&&a!==u)return!1}return!0}xe(be,\"sameLength\"),xe(we,\"explode\"),xe(Ie,\"geojsonEquality\"),xe(Ne,\"equal\");var Se=xe(function(t){return null!=t&&\"object\"===y(t)},\"isObject\");function Me(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=\"object\"===y(e)?e.mutate:e;if(!t)throw new Error(\"geojson is required\");var r=rt(t),i=[];switch(r){case\"LineString\":i=Le(t,r);break;case\"MultiLineString\":case\"Polygon\":K(t).forEach(function(t){i.push(Le(t,r))});break;case\"MultiPolygon\":K(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Le(t,r))}),i.push(e)});break;case\"Point\":return t;case\"MultiPoint\":var o={};K(t).forEach(function(t){var e=t.join(\"-\");Object.prototype.hasOwnProperty.call(o,e)||(i.push(t),o[e]=!0)});break;default:throw new Error(r+\" geometry not supported\")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):k({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function Le(t,e){var n=K(t);if(2===n.length&&!Pe(n[0],n[1]))return n;var r=[],i=n.length-1,o=r.length;r.push(n[0]);for(var s=1;s<i;s++){var a=r[r.length-1];n[s][0]===a[0]&&n[s][1]===a[1]||(r.push(n[s]),(o=r.length)>2&&Ce(r[o-3],r[o-1],r[o-2])&&r.splice(r.length-2,1))}if(r.push(n[n.length-1]),o=r.length,(\"Polygon\"===e||\"MultiPolygon\"===e)&&Pe(n[0],n[n.length-1])&&o<4)throw new Error(\"invalid polygon\");return\"LineString\"===e&&o<3||Ce(r[o-3],r[o-1],r[o-2])&&r.splice(r.length-2,1),r}function Pe(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ce(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,h=u-s;return 0==(r-o)*h-(i-s)*l&&(Math.abs(l)>=Math.abs(h)?l>0?o<=r&&r<=a:a<=r&&r<=o:h>0?s<=i&&i<=u:u<=i&&i<=s)}function Te(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).ignoreSelfIntersections,r=void 0===n||n,i=!1;return _t(t,function(t){_t(e,function(e){if(!0===i)return!0;i=!ve(t.geometry,e.geometry,{ignoreSelfIntersections:r})})}),i}function Oe(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var s=i-r+1,a=n-r+1,u=Math.log(s),l=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-a*l/s+h)),Math.min(i,Math.floor(n+(s-a)*l/s+h)),o)}var c=e[n],f=r,g=i;for(Re(e,r,n),o(e[i],c)>0&&Re(e,r,i);f<g;){for(Re(e,f,g),f++,g--;o(e[f],c)<0;)f++;for(;o(e[g],c)>0;)g--}0===o(e[r],c)?Re(e,r,g):Re(e,++g,i),g<=n&&(r=g+1),n<=g&&(i=g-1)}}(t,e,n||0,r||t.length-1,i||Ae)}function Re(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Ae(t,e){return t<e?-1:t>e?1:0}var De=s(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;i(this,t),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()},[{key:\"all\",value:function(){return this._all(this.data,[])}},{key:\"search\",value:function(t){var e=this.data,n=[];if(!Ue(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;Ue(t,a)&&(e.leaf?n.push(s):Xe(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n}},{key:\"collides\",value:function(t){var e=this.data;if(!Ue(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(Ue(t,o)){if(e.leaf||Xe(t,o))return!0;n.push(i)}}e=n.pop()}return!1}},{key:\"load\",value:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this}},{key:\"insert\",value:function(t){return t&&this._insert(t,this.data.height-1),this}},{key:\"clear\",value:function(){return this.data=Ze([]),this}},{key:\"remove\",value:function(t,e){if(!t)return this;for(var n,r,i,o=this.data,s=this.toBBox(t),a=[],u=[];o||a.length;){if(o||(o=a.pop(),r=a[a.length-1],n=u.pop(),i=!0),o.leaf){var l=Fe(t,o.children,e);if(-1!==l)return o.children.splice(l,1),a.push(o),this._condense(a),this}i||o.leaf||!Xe(o,s)?r?(n++,o=r.children[n],i=!1):o=null:(a.push(o),u.push(n),n=0,r=o,o=o.children[0])}return this}},{key:\"toBBox\",value:function(t){return t}},{key:\"compareMinX\",value:function(t,e){return t.minX-e.minX}},{key:\"compareMinY\",value:function(t,e){return t.minY-e.minY}},{key:\"toJSON\",value:function(){return this.data}},{key:\"fromJSON\",value:function(t){return this.data=t,this}},{key:\"_all\",value:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,v(t.children)):n.push.apply(n,v(t.children)),t=n.pop();return e}},{key:\"_build\",value:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return qe(i=Ze(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=Ze([])).leaf=!1,i.height=r;var a=Math.ceil(o/s),u=a*Math.ceil(Math.sqrt(s));He(t,e,n,u,this.compareMinX);for(var l=e;l<=n;l+=u){var h=Math.min(l+u-1,n);He(t,l,h,a,this.compareMinY);for(var c=l;c<=h;c+=a){var f=Math.min(c+a-1,h);i.children.push(this._build(t,c,f,r-1))}}return qe(i,this.toBBox),i}},{key:\"_chooseSubtree\",value:function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],l=ze(u),h=(c=t,f=u,(Math.max(f.maxX,c.maxX)-Math.min(f.minX,c.minX))*(Math.max(f.maxY,c.maxY)-Math.min(f.minY,c.minY))-l);h<o?(o=h,i=l<i?l:i,s=u):h===o&&l<i&&(i=l,s=u)}e=s||e.children[0]}var c,f;return e}},{key:\"_insert\",value:function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),Ge(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)}},{key:\"_split\",value:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=Ze(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,qe(n,this.toBBox),qe(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}},{key:\"_splitRoot\",value:function(t,e){this.data=Ze([t,e]),this.data.height=t.height+1,this.data.leaf=!1,qe(this.data,this.toBBox)}},{key:\"_chooseSplitIndex\",value:function(t,e,n){for(var r,i,o,s,a,u,l,h=1/0,c=1/0,f=e;f<=n-e;f++){var g=Ve(t,0,f,this.toBBox),p=Ve(t,f,n,this.toBBox),v=(i=g,o=p,s=Math.max(i.minX,o.minX),a=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),l=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,l-a)),d=ze(g)+ze(p);v<h?(h=v,r=f,c=d<c?d:c):v===h&&d<c&&(c=d,r=f)}return r||n-e}},{key:\"_chooseSplitAxis\",value:function(t,e,n){var r=t.leaf?this.compareMinX:Be,i=t.leaf?this.compareMinY:Ye;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)}},{key:\"_allDistMargin\",value:function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=Ve(t,0,e,i),s=Ve(t,n-e,n,i),a=je(o)+je(s),u=e;u<n-e;u++){var l=t.children[u];Ge(o,t.leaf?i(l):l),a+=je(o)}for(var h=n-e-1;h>=e;h--){var c=t.children[h];Ge(s,t.leaf?i(c):c),a+=je(s)}return a}},{key:\"_adjustParentBBoxes\",value:function(t,e,n){for(var r=n;r>=0;r--)Ge(e[r],t)}},{key:\"_condense\",value:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():qe(t[n],this.toBBox)}}]);function Fe(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function qe(t,e){Ve(t,0,t.children.length,e,t)}function Ve(t,e,n,r,i){i||(i=Ze(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];Ge(i,t.leaf?r(s):s)}return i}function Ge(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Be(t,e){return t.minX-e.minX}function Ye(t,e){return t.minY-e.minY}function ze(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function je(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Xe(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ue(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ze(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function He(t,e,n,r,i){for(var o=[e,n];o.length;)if(!((n=o.pop())-(e=o.pop())<=r)){var s=e+Math.ceil((n-e)/r/2)*r;Oe(t,s,e,n,i),o.push(e,s,s,n)}}var We=Object.freeze({__proto__:null,default:De});function Je(t){var e=new De(t);return e.insert=function(t){if(\"Feature\"!==t.type)throw new Error(\"invalid feature\");return t.bbox=t.bbox?t.bbox:Ot(t),De.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if(\"Feature\"!==t.type)throw new Error(\"invalid features\");t.bbox=t.bbox?t.bbox:Ot(t),e.push(t)}):pt(t,function(t){if(\"Feature\"!==t.type)throw new Error(\"invalid features\");t.bbox=t.bbox?t.bbox:Ot(t),e.push(t)}),De.prototype.load.call(this,e)},e.remove=function(t,e){if(\"Feature\"!==t.type)throw new Error(\"invalid feature\");return t.bbox=t.bbox?t.bbox:Ot(t),De.prototype.remove.call(this,t,e)},e.clear=function(){return De.prototype.clear.call(this)},e.search=function(t){return P(De.prototype.search.call(this,this.toBBox(t)))},e.collides=function(t){return De.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return P(De.prototype.all.call(this))},e.toJSON=function(){return De.prototype.toJSON.call(this)},e.fromJSON=function(t){return De.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if(\"Feature\"===t.type)e=Ot(t);else{if(\"FeatureCollection\"!==t.type)throw new Error(\"invalid geojson\");e=Ot(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Ke(t){if(!t)throw new Error(\"geojson is required\");var e=[];return _t(t,function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case\"Polygon\":n=K(r);break;case\"LineString\":n=[K(r)]}n.forEach(function(n){(function(t,e){var n=[];return t.reduce(function(t,r){var i=M([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r}),n})(n,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),P(e)}var Qe,$e,tn=Object.defineProperty,en=Object.defineProperties,nn=Object.getOwnPropertyDescriptors,rn=Object.getOwnPropertySymbols,on=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,an=function(t,e,n){return e in t?tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},un=function(t,e){for(var n in e||(e={}))on.call(e,n)&&an(t,n,e[n]);if(rn){var r,i=a(rn(e));try{for(i.s();!(r=i.n()).done;)n=r.value,sn.call(e,n)&&an(t,n,e[n])}catch(t){i.e(t)}finally{i.f()}}return t},ln=function(t,e){return en(t,nn(e))};function hn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!e)throw new Error(\"lines and pt are required arguments\");var r=J(e),i=w([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),o=0;return _t(t,function(t,s,a){for(var u=K(t),l=0;l<u.length-1;l++){var h=w(u[l]);h.properties.dist=at(e,h,n);var c=J(h),f=w(u[l+1]);f.properties.dist=at(e,f,n);var g=J(f),v=at(h,f,n),d=void 0,y=void 0;if(c[0]===r[0]&&c[1]===r[1]){var m=[c,void 0,!1];d=m[0],y=m[2]}else if(g[0]===r[0]&&g[1]===r[1]){var _=[g,void 0,!0];d=_[0],y=_[2]}else{var x=p(vn(h.geometry.coordinates,f.geometry.coordinates,J(e)),3);d=x[0],y=x[2]}var E=void 0;d&&(E=w(d,{dist:at(e,d,n),multiFeatureIndex:a,location:o+at(h,d,n)})),E&&E.properties.dist<i.properties.dist&&(i=ln(un({},E),{properties:ln(un({},E.properties),{index:y?l+1:l})})),o+=v}}),i}function cn(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))}function fn(t,e){var n=function(t,e){var n=p(t,3),r=n[0],i=n[1],o=n[2],s=p(e,3);return r*s[0]+i*s[1]+o*s[2]}(t,e)/(cn(t)*cn(e));return Math.acos(Math.min(Math.max(n,-1),1))}function gn(t){var e=Y(t[1]),n=Y(t[0]);return[Math.cos(e)*Math.cos(n),Math.cos(e)*Math.sin(n),Math.sin(e)]}function pn(t){var e=p(t,3),n=e[0],r=e[1],i=e[2],o=B(Math.asin(i));return[B(Math.atan2(r,n)),o]}function vn(t,e,n){var r,i,o,s,a,u,l,h,c,f,g=gn(t),v=gn(e),d=p(gn(n),3),y=d[0],m=d[1],_=d[2],x=(r=v,o=(i=p(g,3))[0],s=i[1],a=i[2],l=(u=p(r,3))[0],h=u[1],[s*(c=u[2])-a*h,a*l-o*c,o*h-s*l]),E=p(x,3),k=E[0],b=E[1],w=E[2],I=b*_-w*m,N=w*y-k*_,S=k*m-b*y,M=S*b-N*w,L=I*w-S*k,P=N*k-I*b,C=1/Math.sqrt(Math.pow(M,2)+Math.pow(L,2)+Math.pow(P,2)),T=[M*C,L*C,P*C],O=[-1*M*C,-1*L*C,-1*P*C],R=fn(g,v),A=fn(g,T),D=fn(v,T),F=fn(g,O),q=fn(v,O);return fn(g,f=A<F&&A<q||D<F&&D<q?T:O)>R||fn(v,f)>R?at(pn(f),pn(g))<=at(pn(f),pn(v))?[pn(g),!0,!1]:[pn(v),!1,!0]:[pn(f),!1,!1]}function dn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,\"default\")?t.default:t}function yn(t){if(t.__esModule)return t;var e=t.default;if(\"function\"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,\"__esModule\",{value:!0}),Object.keys(t).forEach(function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}),n}var mn=dn(($e||($e=1,Qe=function t(e,n){if(e===n)return!0;if(e&&n&&\"object\"==y(e)&&\"object\"==y(n)){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n}),Qe));function _n(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!U(n=n||{}))throw new Error(\"options is invalid\");var r,i=n.tolerance||0,o=[],s=Je(),a=Ke(t);s.load(a);var u=[];return Et(e,function(t){var e=!1;t&&(pt(s.search(t),function(n){if(!1===e){var o=K(t).sort(),s=K(n).sort();if(mn(o,s))e=!0,r=r?xn(r,t)||r:t;else if(0===i?zt(o[0],n)&&zt(o[1],n):hn(n,o[0]).properties.dist<=i&&hn(n,o[1]).properties.dist<=i)e=!0,r=r?xn(r,t)||r:t;else if(0===i?zt(s[0],t)&&zt(s[1],t):hn(t,s[0]).properties.dist<=i&&hn(t,s[1]).properties.dist<=i)if(r){var a=xn(r,n);a?r=a:u.push(n)}else r=n}}),!1===e&&r&&(o.push(r),u.length&&(o=o.concat(u),u=[]),r=void 0))}),r&&o.push(r),P(o)}function xn(t,e){var n=K(e),r=K(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;if(mn(n[0],i))s.unshift(n[1]);else if(mn(n[0],o))s.push(n[1]);else if(mn(n[1],i))s.unshift(n[0]);else{if(!mn(n[1],o))return;s.push(n[0])}return t}function En(t,e){var n=V(ut(t[0],t[1])),r=V(ut(e[0],e[1]));return n===r||(r-n)%180==0}function kn(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error(\"Invalid GeoJSON object for \"+e)}function bn(t,e){return!!wn(e.coordinates[0],t.coordinates)||!!wn(e.coordinates[e.coordinates.length-1],t.coordinates)}function wn(t,e){return t[0]===e[0]&&t[1]===e[1]}function In(t){return t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function Nn(t){for(var e=0;e<t.length-1;e++)for(var n=t[e],r=e+1;r<t.length-2;r++)if(zt(n,M([t[r],t[r+1]])))return!0;return!1}function Sn(t,e,n){for(var r=N(t),i=n+1;i<e.length;i++)if(!ve(r,N(e[i]))&&he(r,M(e[i][0])))return!1;return!0}function Mn(t,e){var n=nt(t),r=nt(e),i=n.type,o=r.type;switch(i){case\"Point\":switch(o){case\"MultiPoint\":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Pn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case\"LineString\":return zt(n,r,{ignoreEndVertices:!0});case\"Polygon\":case\"MultiPolygon\":return Yt(n,r,{ignoreBoundary:!0});default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"MultiPoint\":switch(o){case\"MultiPoint\":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Pn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case\"LineString\":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!zt(t.coordinates[r],e))return!1;n||(n=zt(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case\"Polygon\":case\"MultiPolygon\":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=Yt(t.coordinates[i],e))){n=!1;break}r=Yt(t.coordinates[i],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"LineString\":switch(o){case\"LineString\":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!zt(t.coordinates[n],e))return!1;return!0}(n,r);case\"Polygon\":case\"MultiPolygon\":return function(t,e){if(!Ln(Ot(e),Ot(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Yt(t.coordinates[r],e))return!1;n||(n=Yt(t.coordinates[r],e,{ignoreBoundary:!0})),!n&&r<t.coordinates.length-1&&(n=Yt(Cn(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(n,r);default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"Polygon\":switch(o){case\"Polygon\":case\"MultiPolygon\":return function(t,e){var n=Ot(t);if(!Ln(Ot(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Yt(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}default:throw new Error(\"feature1 \"+i+\" geometry not supported\")}}function Ln(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Pn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Cn(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Tn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ot(t);return w([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}var On,Rn={exports:{}},An=(On||(On=1,Rn.exports=function(){function t(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function a(t,e,n){return(a=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function u(t){var e=\"function\"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf(\"[native code]\")))return t;var n;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return a(t,arguments,i(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,t)})(t)}function l(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function h(t){var e=s();return function(){var n,r=i(t);if(e){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&(\"object\"==y(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return l(t)}(this,n)}}function c(t,e,n){return(c=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function g(t,e){if(t){if(\"string\"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){var n=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=g(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}var d=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getEndCapStyle\",value:function(){return this._endCapStyle}},{key:\"isSingleSided\",value:function(){return this._isSingleSided}},{key:\"setQuadrantSegments\",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=e.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=e.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==e.JOIN_ROUND&&(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:\"getJoinStyle\",value:function(){return this._joinStyle}},{key:\"setJoinStyle\",value:function(t){this._joinStyle=t}},{key:\"setSimplifyFactor\",value:function(t){this._simplifyFactor=t<0?0:t}},{key:\"getSimplifyFactor\",value:function(){return this._simplifyFactor}},{key:\"getQuadrantSegments\",value:function(){return this._quadrantSegments}},{key:\"setEndCapStyle\",value:function(t){this._endCapStyle=t}},{key:\"getMitreLimit\",value:function(){return this._mitreLimit}},{key:\"setMitreLimit\",value:function(t){this._mitreLimit=t}},{key:\"setSingleSided\",value:function(t){this._isSingleSided=t}}],[{key:\"constructor_\",value:function(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},{key:\"bufferDistanceError\",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}]),e}();d.CAP_ROUND=1,d.CAP_FLAT=2,d.CAP_SQUARE=3,d.JOIN_ROUND=1,d.JOIN_MITRE=2,d.JOIN_BEVEL=3,d.DEFAULT_QUADRANT_SEGMENTS=8,d.DEFAULT_MITRE_LIMIT=5,d.DEFAULT_SIMPLIFY_FACTOR=.01;var m=function(e){r(o,u(Error));var i=h(o);function o(e){var n;return t(this,o),(n=i.call(this,e)).name=Object.keys({Exception:o})[0],n}return n(o,[{key:\"toString\",value:function(){return this.message}}]),o}(),_=function(e){r(i,m);var n=h(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({IllegalArgumentException:i})[0],r}return i}(),x=function(){function e(){t(this,e)}return n(e,[{key:\"filter\",value:function(t){}}]),e}();function E(){}function k(){}function b(){}var w,I,N,S,M,L,P,C=function(){function e(){t(this,e)}return n(e,null,[{key:\"equalsWithTolerance\",value:function(t,e,n){return Math.abs(t-e)<=n}}]),e}(),T=function(){function e(n,r){t(this,e),this.low=r||0,this.high=n||0}return n(e,null,[{key:\"toBinaryString\",value:function(t){var e,n=\"\";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?\"1\":\"0\";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?\"1\":\"0\";return n}}]),e}();function O(){}function R(){}O.NaN=NaN,O.isNaN=function(t){return Number.isNaN(t)},O.isInfinite=function(t){return!Number.isFinite(t)},O.MAX_VALUE=Number.MAX_VALUE,O.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,O.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,\"function\"==typeof Float64Array&&\"function\"==typeof Int32Array?(M=2146435072,L=new Float64Array(1),P=new Int32Array(L.buffer),O.doubleToLongBits=function(t){L[0]=t;var e=0|P[0],n=0|P[1];return(n&M)===M&&0!=(1048575&n)&&0!==e&&(e=0,n=2146959360),new T(n,e)},O.longBitsToDouble=function(t){return P[0]=t.low,P[1]=t.high,L[0]}):(w=Math.log2,I=Math.floor,N=Math.pow,S=function(){for(var t=53;t>0;t--){var e=N(2,t)-1;if(I(w(e))+1===t)return e}return 0}(),O.doubleToLongBits=function(t){var e,n,r,i,o,s,a,u,l;if(t<0||1/t===Number.NEGATIVE_INFINITY?(s=1<<31,t=-t):s=0,0===t)return new T(u=s,l=0);if(t===1/0)return new T(u=2146435072|s,l=0);if(t!=t)return new T(u=2146959360,l=0);if(i=0,l=0,(e=I(t))>1)if(e<=S)(i=I(w(e)))<=20?(l=0,u=e<<20-i&1048575):(l=e%(n=N(2,r=i-20))<<32-r,u=e/n&1048575);else for(r=e,l=0;0!==(r=I(n=r/2));)i++,l>>>=1,l|=(1&u)<<31,u>>>=1,n!==r&&(u|=524288);if(a=i+1023,o=0===e,e=t-e,i<52&&0!==e)for(r=0;;){if((n=2*e)>=1?(e=n-1,o?(a--,o=!1):(r<<=1,r|=1,i++)):(e=n,o?0==--a&&(i++,o=!1):(r<<=1,i++)),20===i)u|=r,r=0;else if(52===i){l|=r;break}if(1===n){i<20?u|=r<<20-i:i<52&&(l|=r<<52-i);break}}return u|=a<<20,new T(u|=s,l)},O.longBitsToDouble=function(t){var e,n,r,i,o=t.high,s=t.low,a=o&1<<31?-1:1;for(r=((2146435072&o)>>20)-1023,i=0,n=1<<19,e=1;e<=20;e++)o&n&&(i+=N(2,-e)),n>>>=1;for(n=1<<31,e=21;e<=52;e++)s&n&&(i+=N(2,-e)),n>>>=1;if(-1023===r){if(0===i)return 0*a;r=-1022}else{if(1024===r)return 0===i?a/0:NaN;i+=1}return a*i*N(2,r)});var A=function(e){r(i,m);var n=h(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({RuntimeException:i})[0],r}return i}(),D=function(e){r(o,A);var i=h(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,null,[{key:\"constructor_\",value:function(){if(0===arguments.length)A.constructor_.call(this);else if(1===arguments.length){var t=arguments[0];A.constructor_.call(this,t)}}}]),o}(),F=function(){function e(){t(this,e)}return n(e,null,[{key:\"shouldNeverReachHere\",value:function(){if(0===arguments.length)e.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new D(\"Should never reach here\"+(null!==t?\": \"+t:\"\"))}}},{key:\"isTrue\",value:function(){if(1===arguments.length){var t=arguments[0];e.isTrue(t,null)}else if(2===arguments.length){var n=arguments[1];if(!arguments[0])throw null===n?new D:new D(n)}}},{key:\"equals\",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];e.equals(t,n,null)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(!i.equals(r))throw new D(\"Expected \"+r+\" but encountered \"+i+(null!==o?\": \"+o:\"\"))}}}]),e}(),q=new ArrayBuffer(8),V=new Float64Array(q),G=new Int32Array(q),B=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getM\",value:function(){return O.NaN}},{key:\"setOrdinate\",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.setZ(n);break;default:throw new _(\"Invalid ordinate index: \"+t)}}},{key:\"equals2D\",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!C.equalsWithTolerance(this.x,e.x,n)&&!!C.equalsWithTolerance(this.y,e.y,n)}}},{key:\"setM\",value:function(t){throw new _(\"Invalid ordinate index: \"+e.M)}},{key:\"getZ\",value:function(){return this.z}},{key:\"getOrdinate\",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.getZ()}throw new _(\"Invalid ordinate index: \"+t)}},{key:\"equals3D\",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||O.isNaN(this.getZ())&&O.isNaN(t.getZ()))}},{key:\"equals\",value:function(t){return t instanceof e&&this.equals2D(t)}},{key:\"equalInZ\",value:function(t,e){return C.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:\"setX\",value:function(t){this.x=t}},{key:\"compareTo\",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:\"getX\",value:function(){return this.x}},{key:\"setZ\",value:function(t){this.z=t}},{key:\"clone\",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return F.shouldNeverReachHere(\"this shouldn't happen because this class is Cloneable\"),null;throw t}}},{key:\"copy\",value:function(){return new e(this)}},{key:\"toString\",value:function(){return\"(\"+this.x+\", \"+this.y+\", \"+this.getZ()+\")\"}},{key:\"distance3D\",value:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+r*r)}},{key:\"getY\",value:function(){return this.y}},{key:\"setY\",value:function(t){this.y=t}},{key:\"distance\",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:\"hashCode\",value:function(){var t=17;return 37*(t=37*t+e.hashCode(this.x))+e.hashCode(this.y)}},{key:\"setCoordinate\",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:\"interfaces_\",get:function(){return[E,k,b]}}],[{key:\"constructor_\",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)e.constructor_.call(this,0,0);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){var n=arguments[0],r=arguments[1];e.constructor_.call(this,n,r,e.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this.x=i,this.y=o,this.z=s}}},{key:\"hashCode\",value:function(t){return V[0]=t,G[0]^G[1]}}]),e}(),Y=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"compare\",value:function(t,n){var r=e.compare(t.x,n.x);if(0!==r)return r;var i=e.compare(t.y,n.y);return 0!==i?i:this._dimensionsToTest<=2?0:e.compare(t.getZ(),n.getZ())}},{key:\"interfaces_\",get:function(){return[R]}}],[{key:\"constructor_\",value:function(){if(this._dimensionsToTest=2,0===arguments.length)e.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new _(\"only 2 or 3 dimensions may be specified\");this._dimensionsToTest=t}}},{key:\"compare\",value:function(t,e){return t<e?-1:t>e?1:O.isNaN(t)?O.isNaN(e)?0:-1:O.isNaN(e)?1:0}}]),e}();B.DimensionalComparator=Y,B.NULL_ORDINATE=O.NaN,B.X=0,B.Y=1,B.Z=2,B.M=3;var z=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getArea\",value:function(){return this.getWidth()*this.getHeight()}},{key:\"equals\",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()}},{key:\"intersection\",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny;return new e(n,this._maxx<t._maxx?this._maxx:t._maxx,r,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:\"isNull\",value:function(){return this._maxx<this._minx}},{key:\"getMaxX\",value:function(){return this._maxx}},{key:\"covers\",value:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof e){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return!this.isNull()&&r>=this._minx&&r<=this._maxx&&i>=this._miny&&i<=this._maxy}}},{key:\"intersects\",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof B){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){if(arguments[0]instanceof B&&arguments[1]instanceof B){var r=arguments[0],i=arguments[1];return!(this.isNull()||(r.x<i.x?r.x:i.x)>this._maxx||(r.x>i.x?r.x:i.x)<this._minx||(r.y<i.y?r.y:i.y)>this._maxy||(r.y>i.y?r.y:i.y)<this._miny)}if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||s>this._maxy||s<this._miny)}}}},{key:\"getMinY\",value:function(){return this._miny}},{key:\"getDiameter\",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:\"getMinX\",value:function(){return this._minx}},{key:\"expandToInclude\",value:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=i,this._maxy=i):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}}},{key:\"minExtent\",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:\"getWidth\",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:\"compareTo\",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:\"translate\",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:\"copy\",value:function(){return new e(this)}},{key:\"toString\",value:function(){return\"Env[\"+this._minx+\" : \"+this._maxx+\", \"+this._miny+\" : \"+this._maxy+\"]\"}},{key:\"setToNull\",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:\"disjoint\",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:\"getHeight\",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:\"maxExtent\",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:\"expandBy\",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:\"contains\",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof B){var n=arguments[0];return this.covers(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return this.covers(r,i)}}},{key:\"centre\",value:function(){return this.isNull()?null:new B((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:\"init\",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];o<s?(this._minx=o,this._maxx=s):(this._minx=s,this._maxx=o),a<u?(this._miny=a,this._maxy=u):(this._miny=u,this._maxy=a)}}},{key:\"getMaxY\",value:function(){return this._maxy}},{key:\"distance\",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:\"hashCode\",value:function(){var t=17;return 37*(t=37*(t=37*(t=37*t+B.hashCode(this._minx))+B.hashCode(this._maxx))+B.hashCode(this._miny))+B.hashCode(this._maxy)}},{key:\"interfaces_\",get:function(){return[E,b]}}],[{key:\"constructor_\",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}}},{key:\"intersects\",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),h=Math.max(r.x,i.x);return!(l>u||h<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),h=Math.max(r.y,i.y),l>u||h<a))}}}]),e}(),j=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"isGeometryCollection\",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION}},{key:\"getFactory\",value:function(){return this._factory}},{key:\"getGeometryN\",value:function(t){return this}},{key:\"getArea\",value:function(){return 0}},{key:\"isRectangle\",value:function(){return!1}},{key:\"equalsExact\",value:function(t){return this===t||this.equalsExact(t,0)}},{key:\"geometryChanged\",value:function(){this.apply(e.geometryChangedFilter)}},{key:\"geometryChangedAction\",value:function(){this._envelope=null}},{key:\"equalsNorm\",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:\"getLength\",value:function(){return 0}},{key:\"getNumGeometries\",value:function(){return 1}},{key:\"compareTo\",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,r)}}},{key:\"getUserData\",value:function(){return this._userData}},{key:\"getSRID\",value:function(){return this._SRID}},{key:\"getEnvelope\",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:\"checkNotGeometryCollection\",value:function(t){if(t.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION)throw new _(\"This method does not support GeometryCollection arguments\")}},{key:\"equal\",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:\"norm\",value:function(){var t=this.copy();return t.normalize(),t}},{key:\"reverse\",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:\"copy\",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:\"getPrecisionModel\",value:function(){return this._factory.getPrecisionModel()}},{key:\"getEnvelopeInternal\",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new z(this._envelope)}},{key:\"setSRID\",value:function(t){this._SRID=t}},{key:\"setUserData\",value:function(t){this._userData=t}},{key:\"compare\",value:function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0}},{key:\"hashCode\",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:\"isEquivalentClass\",value:function(t){return this.getClass()===t.getClass()}},{key:\"isGeometryCollectionOrDerived\",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===e.TYPECODE_MULTIPOINT||this.getTypeCode()===e.TYPECODE_MULTILINESTRING||this.getTypeCode()===e.TYPECODE_MULTIPOLYGON}},{key:\"interfaces_\",get:function(){return[k,E,b]}},{key:\"getClass\",value:function(){return e}}],[{key:\"hasNonEmptyElements\",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:\"hasNullElements\",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}]),e}();j.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},j.TYPECODE_POINT=0,j.TYPECODE_MULTIPOINT=1,j.TYPECODE_LINESTRING=2,j.TYPECODE_LINEARRING=3,j.TYPECODE_MULTILINESTRING=4,j.TYPECODE_POLYGON=5,j.TYPECODE_MULTIPOLYGON=6,j.TYPECODE_GEOMETRYCOLLECTION=7,j.TYPENAME_POINT=\"Point\",j.TYPENAME_MULTIPOINT=\"MultiPoint\",j.TYPENAME_LINESTRING=\"LineString\",j.TYPENAME_LINEARRING=\"LinearRing\",j.TYPENAME_MULTILINESTRING=\"MultiLineString\",j.TYPENAME_POLYGON=\"Polygon\",j.TYPENAME_MULTIPOLYGON=\"MultiPolygon\",j.TYPENAME_GEOMETRYCOLLECTION=\"GeometryCollection\",j.geometryChangedFilter={get interfaces_(){return[x]},filter:function(t){t.geometryChangedAction()}};var X=function(){function e(){t(this,e)}return n(e,null,[{key:\"toLocationSymbol\",value:function(t){switch(t){case e.EXTERIOR:return\"e\";case e.BOUNDARY:return\"b\";case e.INTERIOR:return\"i\";case e.NONE:return\"-\"}throw new _(\"Unknown location value: \"+t)}}]),e}();X.INTERIOR=0,X.BOUNDARY=1,X.EXTERIOR=2,X.NONE=-1;var U=function(){function e(){t(this,e)}return n(e,[{key:\"add\",value:function(){}},{key:\"addAll\",value:function(){}},{key:\"isEmpty\",value:function(){}},{key:\"iterator\",value:function(){}},{key:\"size\",value:function(){}},{key:\"toArray\",value:function(){}},{key:\"remove\",value:function(){}}]),e}(),Z=function(e){r(i,m);var n=h(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({NoSuchElementException:i})[0],r}return i}(),H=function(e){r(i,m);var n=h(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({UnsupportedOperationException:i})[0],r}return i}(),W=function(e){r(o,U);var i=h(o);function o(){return t(this,o),i.apply(this,arguments)}return n(o,[{key:\"contains\",value:function(){}}]),o}(),J=function(e,i){r(s,e);var o=h(s);function s(e){var n;return t(this,s),(n=o.call(this)).map=new Map,e instanceof U&&n.addAll(e),n}return n(s,[{key:\"contains\",value:function(t){var e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}},{key:\"add\",value:function(t){var e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}},{key:\"addAll\",value:function(t){var e,n=v(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:\"remove\",value:function(){throw new H}},{key:\"size\",value:function(){return this.map.size}},{key:\"isEmpty\",value:function(){return 0===this.map.size}},{key:\"toArray\",value:function(){return Array.from(this.map.values())}},{key:\"iterator\",value:function(){return new K(this.map)}},{key:i,value:function(){return this.map}}]),s}(W,Symbol.iterator),K=function(){function e(n){t(this,e),this.iterator=n.values();var r=this.iterator.next(),i=r.done,o=r.value;this.done=i,this.value=o}return n(e,[{key:\"next\",value:function(){if(this.done)throw new Z;var t=this.value,e=this.iterator.next(),n=e.done,r=e.value;return this.done=n,this.value=r,t}},{key:\"hasNext\",value:function(){return!this.done}},{key:\"remove\",value:function(){throw new H}}]),e}(),Q=function(){function e(){t(this,e)}return n(e,null,[{key:\"opposite\",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();Q.ON=0,Q.LEFT=1,Q.RIGHT=2;var $=function(e){r(i,m);var n=h(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({EmptyStackException:i})[0],r}return i}(),tt=function(e){r(i,m);var n=h(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({IndexOutOfBoundsException:i})[0],r}return i}(),et=function(e){r(o,U);var i=h(o);function o(){return t(this,o),i.apply(this,arguments)}return n(o,[{key:\"get\",value:function(){}},{key:\"set\",value:function(){}},{key:\"isEmpty\",value:function(){}}]),o}(),nt=function(e){r(o,et);var i=h(o);function o(){var e;return t(this,o),(e=i.call(this)).array=[],e}return n(o,[{key:\"add\",value:function(t){return this.array.push(t),!0}},{key:\"get\",value:function(t){if(t<0||t>=this.size())throw new tt;return this.array[t]}},{key:\"push\",value:function(t){return this.array.push(t),t}},{key:\"pop\",value:function(){if(0===this.array.length)throw new $;return this.array.pop()}},{key:\"peek\",value:function(){if(0===this.array.length)throw new $;return this.array[this.array.length-1]}},{key:\"empty\",value:function(){return 0===this.array.length}},{key:\"isEmpty\",value:function(){return this.empty()}},{key:\"search\",value:function(t){return this.array.indexOf(t)}},{key:\"size\",value:function(){return this.array.length}},{key:\"toArray\",value:function(){return this.array.slice()}}]),o}();function rt(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}var it=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:\"append\",value:function(t){this.str+=t}},{key:\"setCharAt\",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:\"toString\",value:function(){return this.str}}]),e}(),ot=function(){function e(n){t(this,e),this.value=n}return n(e,[{key:\"intValue\",value:function(){return this.value}},{key:\"compareTo\",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:\"compare\",value:function(t,e){return t<e?-1:t>e?1:0}},{key:\"isNan\",value:function(t){return Number.isNaN(t)}},{key:\"valueOf\",value:function(t){return new e(t)}}]),e}(),st=function(){function e(){t(this,e)}return n(e,null,[{key:\"isWhitespace\",value:function(t){return t<=32&&t>=0||127===t}},{key:\"toUpperCase\",value:function(t){return t.toUpperCase()}}]),e}(),at=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"le\",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:\"extractSignificantDigits\",value:function(t,n){var r=this.abs(),i=e.magnitude(r._hi),o=e.TEN.pow(i);(r=r.divide(o)).gt(e.TEN)?(r=r.divide(e.TEN),i+=1):r.lt(e.ONE)&&(r=r.multiply(e.TEN),i-=1);for(var s=i+1,a=new it,u=e.MAX_PRINT_DIGITS-1,l=0;l<=u;l++){t&&l===s&&a.append(\".\");var h=Math.trunc(r._hi);if(h<0)break;var c=!1,f=0;h>9?(c=!0,f=\"9\"):f=\"0\"+h,a.append(f),r=r.subtract(e.valueOf(h)).multiply(e.TEN),c&&r.selfAdd(e.TEN);var g=!0,p=e.magnitude(r._hi);if(p<0&&Math.abs(p)>=u-l&&(g=!1),!g)break}return n[0]=i,a.toString()}},{key:\"sqr\",value:function(){return this.multiply(this)}},{key:\"doubleValue\",value:function(){return this._hi+this._lo}},{key:\"subtract\",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.add(t.negate())}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.add(-n)}}},{key:\"equals\",value:function(){if(1===arguments.length&&arguments[0]instanceof e){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:\"isZero\",value:function(){return 0===this._hi&&0===this._lo}},{key:\"selfSubtract\",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}}},{key:\"getSpecialNumberString\",value:function(){return this.isZero()?\"0.0\":this.isNaN()?\"NaN \":null}},{key:\"min\",value:function(t){return this.le(t)?this:t}},{key:\"selfDivide\",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.selfDivide(n,0)}}else if(2===arguments.length){var r,i,o,s,a=arguments[0],u=arguments[1],l=null,h=null,c=null,f=null;return o=this._hi/a,f=(l=(c=e.SPLIT*o)-(l=c-o))*(h=(f=e.SPLIT*a)-(h=f-a))-(s=o*a)+l*(i=a-h)+(r=o-l)*h+r*i,f=o+(c=(this._hi-s-f+this._lo-o*u)/a),this._hi=f,this._lo=o-f+c,this}}},{key:\"dump\",value:function(){return\"DD<\"+this._hi+\", \"+this._lo+\">\"}},{key:\"divide\",value:function(){if(arguments[0]instanceof e){var t,n,r,i,o=arguments[0],s=null,a=null,u=null,l=null;return t=(r=this._hi/o._hi)-(s=(u=e.SPLIT*r)-(s=u-r)),l=s*(a=(l=e.SPLIT*o._hi)-(a=l-o._hi))-(i=r*o._hi)+s*(n=o._hi-a)+t*a+t*n,new e(l=r+(u=(this._hi-i-l+this._lo-r*o._lo)/o._hi),r-l+u)}if(\"number\"==typeof arguments[0]){var h=arguments[0];return O.isNaN(h)?e.createNaN():e.copy(this).selfDivide(h,0)}}},{key:\"ge\",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:\"pow\",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),r=e.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&r.selfMultiply(n),(i/=2)>0&&(n=n.sqr());else r=n;return t<0?r.reciprocal():r}},{key:\"ceil\",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new e(t,n)}},{key:\"compareTo\",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:\"rint\",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:\"setValue\",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.init(t),this}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.init(n),this}}},{key:\"max\",value:function(t){return this.ge(t)?this:t}},{key:\"sqrt\",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,r=e.valueOf(n),i=this.subtract(r.sqr())._hi*(.5*t);return r.add(i)}},{key:\"selfAdd\",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if(\"number\"==typeof arguments[0]){var n,r,i,o,s,a=arguments[0],u=null;return u=(i=this._hi+a)-(o=i-this._hi),r=(s=(u=a-o+(this._hi-u))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l,h,c,f,g=arguments[0],p=arguments[1],v=null,d=null,y=null;c=this._hi+g,h=this._lo+p,d=c-(y=c-this._hi),v=h-(f=h-this._lo);var m=(l=c+(y=(d=g-y+(this._hi-d))+h))+(y=(v=p-f+(this._lo-v))+(y+(c-l))),_=y+(l-m);return this._hi=m,this._lo=_,this}}},{key:\"selfMultiply\",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.selfMultiply(n,0)}}else if(2===arguments.length){var r,i,o=arguments[0],s=arguments[1],a=null,u=null,l=null,h=null;a=(l=e.SPLIT*this._hi)-this._hi,h=e.SPLIT*o,a=l-a,r=this._hi-a,u=h-o;var c=(l=this._hi*o)+(h=a*(u=h-u)-l+a*(i=o-u)+r*u+r*i+(this._hi*s+this._lo*o)),f=h+(a=l-c);return this._hi=c,this._lo=f,this}}},{key:\"selfSqr\",value:function(){return this.selfMultiply(this)}},{key:\"floor\",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new e(t,n)}},{key:\"negate\",value:function(){return this.isNaN()?this:new e(-this._hi,-this._lo)}},{key:\"clone\",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:\"multiply\",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return t.isNaN()?e.createNaN():e.copy(this).selfMultiply(t)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return O.isNaN(n)?e.createNaN():e.copy(this).selfMultiply(n,0)}}},{key:\"isNaN\",value:function(){return O.isNaN(this._hi)}},{key:\"intValue\",value:function(){return Math.trunc(this._hi)}},{key:\"toString\",value:function(){var t=e.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:\"toStandardNotation\",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!0,n),i=n[0]+1,o=r;if(\".\"===r.charAt(0))o=\"0\"+r;else if(i<0)o=\"0.\"+e.stringOfChar(\"0\",-i)+r;else if(-1===r.indexOf(\".\")){var s=i-r.length;o=r+e.stringOfChar(\"0\",s)+\".0\"}return this.isNegative()?\"-\"+o:o}},{key:\"reciprocal\",value:function(){var t,n,r,i,o=null,s=null,a=null,u=null;t=(r=1/this._hi)-(o=(a=e.SPLIT*r)-(o=a-r)),s=(u=e.SPLIT*this._hi)-this._hi;var l=r+(a=(1-(i=r*this._hi)-(u=o*(s=u-s)-i+o*(n=this._hi-s)+t*s+t*n)-r*this._lo)/this._hi);return new e(l,r-l+a)}},{key:\"toSciNotation\",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!1,n),i=e.SCI_NOT_EXPONENT_CHAR+n[0];if(\"0\"===r.charAt(0))throw new IllegalStateException(\"Found leading zero: \"+r);var o=\"\";r.length>1&&(o=r.substring(1));var s=r.charAt(0)+\".\"+o;return this.isNegative()?\"-\"+s+i:s+i}},{key:\"abs\",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:\"isPositive\",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:\"lt\",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:\"add\",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return e.copy(this).selfAdd(t)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return e.copy(this).selfAdd(n)}}},{key:\"init\",value:function(){if(1===arguments.length){if(\"number\"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof e){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this._hi=r,this._lo=i}}},{key:\"gt\",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:\"isNegative\",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:\"trunc\",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:\"signum\",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:\"interfaces_\",get:function(){return[b,E,k]}}],[{key:\"constructor_\",value:function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if(\"number\"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(\"string\"==typeof arguments[0]){var r=arguments[0];e.constructor_.call(this,e.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}}},{key:\"determinant\",value:function(){if(\"number\"==typeof arguments[3]&&\"number\"==typeof arguments[2]&&\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];return e.determinant(e.valueOf(t),e.valueOf(n),e.valueOf(r),e.valueOf(i))}if(arguments[3]instanceof e&&arguments[2]instanceof e&&arguments[0]instanceof e&&arguments[1]instanceof e){var o=arguments[1],s=arguments[2],a=arguments[3];return arguments[0].multiply(a).selfSubtract(o.multiply(s))}}},{key:\"sqr\",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:\"valueOf\",value:function(){if(\"string\"==typeof arguments[0]){var t=arguments[0];return e.parse(t)}if(\"number\"==typeof arguments[0])return new e(arguments[0])}},{key:\"sqrt\",value:function(t){return e.valueOf(t).sqrt()}},{key:\"parse\",value:function(t){for(var n=0,r=t.length;st.isWhitespace(t.charAt(n));)n++;var i=!1;if(n<r){var o=t.charAt(n);\"-\"!==o&&\"+\"!==o||(n++,\"-\"===o&&(i=!0))}for(var s=new e,a=0,u=0,l=0,h=!1;!(n>=r);){var c=t.charAt(n);if(n++,st.isDigit(c)){var f=c-\"0\";s.selfMultiply(e.TEN),s.selfAdd(f),a++}else{if(\".\"!==c){if(\"e\"===c||\"E\"===c){var g=t.substring(n);try{l=ot.parseInt(g)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException(\"Invalid exponent \"+g+\" in string \"+t):e}break}throw new NumberFormatException(\"Unexpected character '\"+c+\"' at position \"+n+\" in string \"+t)}u=a,h=!0}}var p=s;h||(u=a);var v=a-u-l;if(0===v)p=s;else if(v>0){var d=e.TEN.pow(v);p=s.divide(d)}else if(v<0){var y=e.TEN.pow(-v);p=s.multiply(y)}return i?p.negate():p}},{key:\"createNaN\",value:function(){return new e(O.NaN,O.NaN)}},{key:\"copy\",value:function(t){return new e(t)}},{key:\"magnitude\",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r}},{key:\"stringOfChar\",value:function(t,e){for(var n=new it,r=0;r<e;r++)n.append(t);return n.toString()}}]),e}();at.PI=new at(3.141592653589793,1.2246467991473532e-16),at.TWO_PI=new at(6.283185307179586,2.4492935982947064e-16),at.PI_2=new at(1.5707963267948966,6.123233995736766e-17),at.E=new at(2.718281828459045,1.4456468917292502e-16),at.NaN=new at(O.NaN,O.NaN),at.EPS=1.23259516440783e-32,at.SPLIT=134217729,at.MAX_PRINT_DIGITS=32,at.TEN=at.valueOf(10),at.ONE=at.valueOf(1),at.SCI_NOT_EXPONENT_CHAR=\"E\",at.SCI_NOT_ZERO=\"0.0E0\";var ut=function(){function e(){t(this,e)}return n(e,null,[{key:\"orientationIndex\",value:function(t,n,r){var i=e.orientationIndexFilter(t,n,r);if(i<=1)return i;var o=at.valueOf(n.x).selfAdd(-t.x),s=at.valueOf(n.y).selfAdd(-t.y),a=at.valueOf(r.x).selfAdd(-n.x),u=at.valueOf(r.y).selfAdd(-n.y);return o.selfMultiply(u).selfSubtract(s.selfMultiply(a)).signum()}},{key:\"signOfDet2x2\",value:function(){if(arguments[3]instanceof at&&arguments[2]instanceof at&&arguments[0]instanceof at&&arguments[1]instanceof at){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if(\"number\"==typeof arguments[3]&&\"number\"==typeof arguments[2]&&\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=at.valueOf(r),u=at.valueOf(i),l=at.valueOf(o),h=at.valueOf(s);return a.multiply(h).selfSubtract(u.multiply(l)).signum()}}},{key:\"intersection\",value:function(t,e,n,r){var i=new at(t.y).selfSubtract(e.y),o=new at(e.x).selfSubtract(t.x),s=new at(t.x).selfMultiply(e.y).selfSubtract(new at(e.x).selfMultiply(t.y)),a=new at(n.y).selfSubtract(r.y),u=new at(r.x).selfSubtract(n.x),l=new at(n.x).selfMultiply(r.y).selfSubtract(new at(r.x).selfMultiply(n.y)),h=o.multiply(l).selfSubtract(u.multiply(s)),c=a.multiply(s).selfSubtract(i.multiply(l)),f=i.multiply(u).selfSubtract(a.multiply(o)),g=h.selfDivide(f).doubleValue(),p=c.selfDivide(f).doubleValue();return O.isNaN(g)||O.isInfinite(g)||O.isNaN(p)||O.isInfinite(p)?null:new B(g,p)}},{key:\"orientationIndexFilter\",value:function(t,n,r){var i=null,o=(t.x-r.x)*(n.y-r.y),s=(t.y-r.y)*(n.x-r.x),a=o-s;if(o>0){if(s<=0)return e.signum(a);i=o+s}else{if(!(o<0))return e.signum(a);if(s>=0)return e.signum(a);i=-o-s}var u=e.DP_SAFE_EPSILON*i;return a>=u||-a>=u?e.signum(a):2}},{key:\"signum\",value:function(t){return t>0?1:t<0?-1:0}}]),e}();ut.DP_SAFE_EPSILON=1e-15;var lt=function(){function e(){t(this,e)}return n(e,[{key:\"getM\",value:function(t){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return O.NaN}},{key:\"setOrdinate\",value:function(t,e,n){}},{key:\"getZ\",value:function(t){return this.hasZ()?this.getOrdinate(t,2):O.NaN}},{key:\"size\",value:function(){}},{key:\"getOrdinate\",value:function(t,e){}},{key:\"getCoordinate\",value:function(){}},{key:\"getCoordinateCopy\",value:function(t){}},{key:\"createCoordinate\",value:function(){}},{key:\"getDimension\",value:function(){}},{key:\"hasM\",value:function(){return this.getMeasures()>0}},{key:\"getX\",value:function(t){}},{key:\"hasZ\",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:\"getMeasures\",value:function(){return 0}},{key:\"expandEnvelope\",value:function(t){}},{key:\"copy\",value:function(){}},{key:\"getY\",value:function(t){}},{key:\"toCoordinateArray\",value:function(){}},{key:\"interfaces_\",get:function(){return[k]}}]),e}();lt.X=0,lt.Y=1,lt.Z=2,lt.M=3;var ht=function(){function e(){t(this,e)}return n(e,null,[{key:\"index\",value:function(t,e,n){return ut.orientationIndex(t,e,n)}},{key:\"isCCW\",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],n=t.length-1;if(n<3)throw new _(\"Ring has fewer than 4 points, so orientation cannot be determined\");for(var r=t[0],i=0,o=1;o<=n;o++){var s=t[o];s.y>r.y&&(r=s,i=o)}var a=i;do{(a-=1)<0&&(a=n)}while(t[a].equals2D(r)&&a!==i);var u=i;do{u=(u+1)%n}while(t[u].equals2D(r)&&u!==i);var l=t[a],h=t[u];if(l.equals2D(r)||h.equals2D(r)||l.equals2D(h))return!1;var c=e.index(l,r,h);return 0===c?l.x>h.x:c>0}if(rt(arguments[0],lt)){var f=arguments[0],g=f.size()-1;if(g<3)throw new _(\"Ring has fewer than 4 points, so orientation cannot be determined\");for(var p=f.getCoordinate(0),v=0,d=1;d<=g;d++){var y=f.getCoordinate(d);y.y>p.y&&(p=y,v=d)}var m=null,x=v;do{(x-=1)<0&&(x=g),m=f.getCoordinate(x)}while(m.equals2D(p)&&x!==v);var E=null,k=v;do{k=(k+1)%g,E=f.getCoordinate(k)}while(E.equals2D(p)&&k!==v);if(m.equals2D(p)||E.equals2D(p)||m.equals2D(E))return!1;var b=e.index(m,p,E);return 0===b?m.x>E.x:b>0}}}]),e}();ht.CLOCKWISE=-1,ht.RIGHT=ht.CLOCKWISE,ht.COUNTERCLOCKWISE=1,ht.LEFT=ht.COUNTERCLOCKWISE,ht.COLLINEAR=0,ht.STRAIGHT=ht.COLLINEAR;var ct=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getCoordinate\",value:function(){return this._minCoord}},{key:\"getRightmostSide\",value:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}},{key:\"findRightmostEdgeAtVertex\",value:function(){var t=this._minDe.getEdge().getCoordinates();F.isTrue(this._minIndex>0&&this._minIndex<t.length,\"rightmost point expected to be interior vertex of edge\");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=ht.index(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===ht.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===ht.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)}},{key:\"getRightmostSideOfSegment\",value:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Q.LEFT;return n[e].y<n[e+1].y&&(r=Q.RIGHT),r}},{key:\"getEdge\",value:function(){return this._orientedDe}},{key:\"checkForRightmostCoordinate\",value:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])}},{key:\"findRightmostEdgeAtNode\",value:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:\"findEdge\",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}F.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),\"inconsistency in rightmost processing\"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Q.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:\"constructor_\",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),e}(),ft=function(e){r(o,A);var i=h(o);function o(e,n){var r;return t(this,o),(r=i.call(this,n?e+\" [ \"+n+\" ]\":e)).pt=n?new B(n):void 0,r.name=Object.keys({TopologyException:o})[0],r}return n(o,[{key:\"getCoordinate\",value:function(){return this.pt}}]),o}(),gt=function(){function e(){t(this,e),this.array=[]}return n(e,[{key:\"addLast\",value:function(t){this.array.push(t)}},{key:\"removeFirst\",value:function(){return this.array.shift()}},{key:\"isEmpty\",value:function(){return 0===this.array.length}}]),e}(),pt=function(e,i){r(s,e);var o=h(s);function s(e){var n;return t(this,s),(n=o.call(this)).array=[],e instanceof U&&n.addAll(e),n}return n(s,[{key:\"interfaces_\",get:function(){return[et,U]}},{key:\"ensureCapacity\",value:function(){}},{key:\"add\",value:function(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:\"clear\",value:function(){this.array=[]}},{key:\"addAll\",value:function(t){var e,n=v(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.array.push(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:\"set\",value:function(t,e){var n=this.array[t];return this.array[t]=e,n}},{key:\"iterator\",value:function(){return new vt(this)}},{key:\"get\",value:function(t){if(t<0||t>=this.size())throw new tt;return this.array[t]}},{key:\"isEmpty\",value:function(){return 0===this.array.length}},{key:\"sort\",value:function(t){t?this.array.sort(function(e,n){return t.compare(e,n)}):this.array.sort()}},{key:\"size\",value:function(){return this.array.length}},{key:\"toArray\",value:function(){return this.array.slice()}},{key:\"remove\",value:function(t){for(var e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}},{key:i,value:function(){return this.array.values()}}]),s}(et,Symbol.iterator),vt=function(){function e(n){t(this,e),this.arrayList=n,this.position=0}return n(e,[{key:\"next\",value:function(){if(this.position===this.arrayList.size())throw new Z;return this.arrayList.get(this.position++)}},{key:\"hasNext\",value:function(){return this.position<this.arrayList.size()}},{key:\"set\",value:function(t){return this.arrayList.set(this.position-1,t)}},{key:\"remove\",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),e}(),dt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"clearVisitedEdges\",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}},{key:\"getRightmostCoordinate\",value:function(){return this._rightMostCoord}},{key:\"computeNodeDepth\",value:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new ft(\"unable to find edge to compute depths at \"+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}}},{key:\"computeDepth\",value:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(Q.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}},{key:\"create\",value:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:\"findResultEdges\",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Q.RIGHT)>=1&&e.getDepth(Q.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:\"computeDepths\",value:function(t){var e=new J,n=new gt,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}}},{key:\"compareTo\",value:function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}},{key:\"getEnvelope\",value:function(){if(null===this._env){for(var t=new z,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env}},{key:\"addReachable\",value:function(t){var e=new nt;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}}},{key:\"copySymDepths\",value:function(t){var e=t.getSym();e.setDepth(Q.LEFT,t.getDepth(Q.RIGHT)),e.setDepth(Q.RIGHT,t.getDepth(Q.LEFT))}},{key:\"add\",value:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}}},{key:\"getNodes\",value:function(){return this._nodes}},{key:\"getDirectedEdges\",value:function(){return this._dirEdgeList}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){this._finder=null,this._dirEdgeList=new pt,this._nodes=new pt,this._rightMostCoord=null,this._env=null,this._finder=new ct}}]),e}(),yt=function(){function e(){t(this,e)}return n(e,null,[{key:\"intersection\",value:function(t,e,n,r){var i=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,c=n.y>r.y?n.y:r.y,f=((i>u?i:u)+(s<h?s:h))/2,g=((o>l?o:l)+(a<c?a:c))/2,p=t.x-f,v=t.y-g,d=e.x-f,y=e.y-g,m=n.x-f,_=n.y-g,x=r.x-f,E=r.y-g,k=v-y,b=d-p,w=p*y-d*v,I=_-E,N=x-m,S=m*E-x*_,M=k*N-I*b,L=(b*S-N*w)/M,P=(I*w-k*S)/M;return O.isNaN(L)||O.isInfinite(L)||O.isNaN(P)||O.isInfinite(P)?null:new B(L+f,P+g)}}]),e}(),mt=function(){function e(){t(this,e)}return n(e,null,[{key:\"arraycopy\",value:function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++}},{key:\"getProperty\",value:function(t){return{\"line.separator\":\"\\n\"}[t]}}]),e}(),_t=function(){function e(){t(this,e)}return n(e,null,[{key:\"log10\",value:function(t){var n=Math.log(t);return O.isInfinite(n)||O.isNaN(n)?n:n/e.LOG_10}},{key:\"min\",value:function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i}},{key:\"clamp\",value:function(){if(\"number\"==typeof arguments[2]&&\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}}},{key:\"wrap\",value:function(t,e){return t<0?e- -t%e:t%e}},{key:\"max\",value:function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}}},{key:\"average\",value:function(t,e){return(t+e)/2}}]),e}();_t.LOG_10=Math.log(10);var xt=function(){function e(){t(this,e)}return n(e,null,[{key:\"segmentToSegment\",value:function(t,n,r,i){if(t.equals(n))return e.pointToSegment(t,r,i);if(r.equals(i))return e.pointToSegment(i,t,n);var o=!1;if(z.intersects(t,n,r,i)){var s=(n.x-t.x)*(i.y-r.y)-(n.y-t.y)*(i.x-r.x);if(0===s)o=!0;else{var a=(t.y-r.y)*(i.x-r.x)-(t.x-r.x)*(i.y-r.y),u=((t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y))/s,l=a/s;(l<0||l>1||u<0||u>1)&&(o=!0)}}else o=!0;return o?_t.min(e.pointToSegment(t,r,i),e.pointToSegment(n,r,i),e.pointToSegment(r,t,n),e.pointToSegment(i,t,n)):0}},{key:\"pointToSegment\",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;if(i<=0)return t.distance(e);if(i>=1)return t.distance(n);var o=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(o)*Math.sqrt(r)}},{key:\"pointToLinePerpendicular\",value:function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)}},{key:\"pointToSegmentString\",value:function(t,n){if(0===n.length)throw new _(\"Line array must contain at least one vertex\");for(var r=t.distance(n[0]),i=0;i<n.length-1;i++){var o=e.pointToSegment(t,n[i],n[i+1]);o<r&&(r=o)}return r}}]),e}(),Et=function(){function e(){t(this,e)}return n(e,[{key:\"create\",value:function(){if(1===arguments.length)arguments[0]instanceof Array||rt(arguments[0],lt);else if(2===arguments.length);else if(3===arguments.length){var t=arguments[0],e=arguments[1];return this.create(t,e)}}}]),e}(),kt=function(){function e(){t(this,e)}return n(e,[{key:\"filter\",value:function(t){}}]),e}(),bt=function(){function e(){t(this,e)}return n(e,null,[{key:\"ofLine\",value:function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new B;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,h=u-o;n+=Math.sqrt(l*l+h*h),i=a,o=u}return n}}]),e}(),wt=function e(){t(this,e)},It=function(){function e(){t(this,e)}return n(e,null,[{key:\"copyCoord\",value:function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))}},{key:\"isRing\",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,lt.X)===t.getOrdinate(e-1,lt.X)&&t.getOrdinate(0,lt.Y)===t.getOrdinate(e-1,lt.Y)}},{key:\"scroll\",value:function(){if(2===arguments.length){if(rt(arguments[0],lt)&&Number.isInteger(arguments[1])){var t=arguments[0],n=arguments[1];e.scroll(t,n,e.isRing(t))}else if(rt(arguments[0],lt)&&arguments[1]instanceof B){var r=arguments[0],i=arguments[1],o=e.indexOf(i,r);if(o<=0)return null;e.scroll(r,o)}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];if(a<=0)return null;for(var l=s.copy(),h=u?s.size()-1:s.size(),c=0;c<h;c++)for(var f=0;f<s.getDimension();f++)s.setOrdinate(c,f,l.getOrdinate((a+c)%h,f));if(u)for(var g=0;g<s.getDimension();g++)s.setOrdinate(h,g,s.getOrdinate(0,g))}}},{key:\"isEqual\",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||O.isNaN(s)&&O.isNaN(a)))return!1}return!0}},{key:\"minCoordinateIndex\",value:function(){if(1===arguments.length){var t=arguments[0];return e.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){for(var n=arguments[0],r=arguments[2],i=-1,o=null,s=arguments[1];s<=r;s++){var a=n.getCoordinate(s);(null===o||o.compareTo(a)>0)&&(o=a,i=s)}return i}}},{key:\"extend\",value:function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();if(e.copy(n,0,i,0,o),o>0)for(var s=o;s<r;s++)e.copy(n,o-1,i,s,1);return i}},{key:\"reverse\",value:function(t){for(var n=t.size()-1,r=Math.trunc(n/2),i=0;i<=r;i++)e.swap(t,i,n-i)}},{key:\"swap\",value:function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}}},{key:\"copy\",value:function(t,n,r,i,o){for(var s=0;s<o;s++)e.copyCoord(t,n+s,r,i+s)}},{key:\"ensureValidRing\",value:function(t,n){var r=n.size();return 0===r?n:r<=3?e.createClosedRing(t,n,4):n.getOrdinate(0,lt.X)===n.getOrdinate(r-1,lt.X)&&n.getOrdinate(0,lt.Y)===n.getOrdinate(r-1,lt.Y)?n:e.createClosedRing(t,n,r+1)}},{key:\"indexOf\",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,lt.X)&&t.y===e.getOrdinate(n,lt.Y))return n;return-1}},{key:\"createClosedRing\",value:function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();e.copy(n,0,i,0,o);for(var s=o;s<r;s++)e.copy(n,0,i,s,1);return i}},{key:\"minCoordinate\",value:function(t){for(var e=null,n=0;n<t.size();n++){var r=t.getCoordinate(n);(null===e||e.compareTo(r)>0)&&(e=r)}return e}}]),e}(),Nt=function(){function e(){t(this,e)}return n(e,null,[{key:\"toDimensionSymbol\",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new _(\"Unknown dimension value: \"+t)}},{key:\"toDimensionValue\",value:function(t){switch(st.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new _(\"Unknown dimension symbol: \"+t)}}]),e}();Nt.P=0,Nt.L=1,Nt.A=2,Nt.FALSE=-1,Nt.TRUE=-2,Nt.DONTCARE=-3,Nt.SYM_FALSE=\"F\",Nt.SYM_TRUE=\"T\",Nt.SYM_DONTCARE=\"*\",Nt.SYM_P=\"0\",Nt.SYM_L=\"1\",Nt.SYM_A=\"2\";var St=function(){function e(){t(this,e)}return n(e,[{key:\"filter\",value:function(t){}}]),e}(),Mt=function(){function e(){t(this,e)}return n(e,[{key:\"filter\",value:function(t,e){}},{key:\"isDone\",value:function(){}},{key:\"isGeometryChanged\",value:function(){}}]),e}(),Lt=function(e){r(s,j);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"computeEnvelopeInternal\",value:function(){return this.isEmpty()?new z:this._points.expandEnvelope(new z)}},{key:\"isRing\",value:function(){return this.isClosed()&&this.isSimple()}},{key:\"getCoordinates\",value:function(){return this._points.toCoordinateArray()}},{key:\"copyInternal\",value:function(){return new s(this._points.copy(),this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof j){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),e))return!1;return!0}return c(i(s.prototype),\"equalsExact\",this).apply(this,arguments)}},{key:\"normalize\",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();It.reverse(n),this._points=n}return null}}}},{key:\"getCoordinate\",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:\"getBoundaryDimension\",value:function(){return this.isClosed()?Nt.FALSE:0}},{key:\"isClosed\",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:\"reverseInternal\",value:function(){var t=this._points.copy();return It.reverse(t),this.getFactory().createLineString(t)}},{key:\"getEndPoint\",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:\"getTypeCode\",value:function(){return j.TYPECODE_LINESTRING}},{key:\"getDimension\",value:function(){return 1}},{key:\"getLength\",value:function(){return bt.ofLine(this._points)}},{key:\"getNumPoints\",value:function(){return this._points.size()}},{key:\"compareToSameClass\",value:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}}},{key:\"apply\",value:function(){if(rt(arguments[0],kt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(rt(arguments[0],Mt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(rt(arguments[0],St)||rt(arguments[0],x))&&arguments[0].filter(this)}},{key:\"getBoundary\",value:function(){throw new H}},{key:\"isEquivalentClass\",value:function(t){return t instanceof s}},{key:\"getCoordinateN\",value:function(t){return this._points.getCoordinate(t)}},{key:\"getGeometryType\",value:function(){return j.TYPENAME_LINESTRING}},{key:\"getCoordinateSequence\",value:function(){return this._points}},{key:\"isEmpty\",value:function(){return 0===this._points.size()}},{key:\"init\",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new _(\"Invalid number of points in LineString (found \"+t.size()+\" - must be 0 or >= 2)\");this._points=t}},{key:\"isCoordinate\",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:\"getStartPoint\",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:\"getPointN\",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:\"interfaces_\",get:function(){return[wt]}}],[{key:\"constructor_\",value:function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];j.constructor_.call(this,e),this.init(t)}}}]),s}(),Pt=function e(){t(this,e)},Ct=function(e){r(s,j);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"computeEnvelopeInternal\",value:function(){if(this.isEmpty())return new z;var t=new z;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:\"getCoordinates\",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:\"copyInternal\",value:function(){return new s(this._coordinates.copy(),this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof j){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return c(i(s.prototype),\"equalsExact\",this).apply(this,arguments)}},{key:\"normalize\",value:function(){}},{key:\"getCoordinate\",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:\"getBoundaryDimension\",value:function(){return Nt.FALSE}},{key:\"reverseInternal\",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:\"getTypeCode\",value:function(){return j.TYPECODE_POINT}},{key:\"getDimension\",value:function(){return 0}},{key:\"getNumPoints\",value:function(){return this.isEmpty()?0:1}},{key:\"getX\",value:function(){if(null===this.getCoordinate())throw new IllegalStateException(\"getX called on empty Point\");return this.getCoordinate().x}},{key:\"compareToSameClass\",value:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}},{key:\"apply\",value:function(){if(rt(arguments[0],kt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(rt(arguments[0],Mt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(rt(arguments[0],St)||rt(arguments[0],x))&&arguments[0].filter(this)}},{key:\"getBoundary\",value:function(){return this.getFactory().createGeometryCollection()}},{key:\"getGeometryType\",value:function(){return j.TYPENAME_POINT}},{key:\"getCoordinateSequence\",value:function(){return this._coordinates}},{key:\"getY\",value:function(){if(null===this.getCoordinate())throw new IllegalStateException(\"getY called on empty Point\");return this.getCoordinate().y}},{key:\"isEmpty\",value:function(){return 0===this._coordinates.size()}},{key:\"init\",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),F.isTrue(t.size()<=1),this._coordinates=t}},{key:\"isSimple\",value:function(){return!0}},{key:\"interfaces_\",get:function(){return[Pt]}}],[{key:\"constructor_\",value:function(){this._coordinates=null;var t=arguments[0],e=arguments[1];j.constructor_.call(this,e),this.init(t)}}]),s}(),Tt=function(){function e(){t(this,e)}return n(e,null,[{key:\"ofRing\",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(e.ofRingSigned(t))}if(rt(arguments[0],lt)){var n=arguments[0];return Math.abs(e.ofRingSigned(n))}}},{key:\"ofRingSigned\",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(rt(arguments[0],lt)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new B,l=new B,h=new B;s.getCoordinate(0,l),s.getCoordinate(1,h);var c=l.x;h.x-=c;for(var f=0,g=1;g<a-1;g++)u.y=l.y,l.x=h.x,l.y=h.y,s.getCoordinate(g+1,h),h.x-=c,f+=l.x*(u.y-h.y);return f/2}}}]),e}(),Ot=function(){function e(){t(this,e)}return n(e,null,[{key:\"sort\",value:function(){var t=arguments,e=arguments[0];if(1===arguments.length)e.sort(function(t,e){return t.compareTo(e)});else if(2===arguments.length)e.sort(function(e,n){return t[1].compare(e,n)});else if(3===arguments.length){var n=e.slice(arguments[1],arguments[2]);n.sort();var r=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));e.splice(0,e.length);var i,o=v(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.push(s)}}catch(t){o.e(t)}finally{o.f()}}else if(4===arguments.length){var a=e.slice(arguments[1],arguments[2]);a.sort(function(e,n){return t[3].compare(e,n)});var u=e.slice(0,arguments[1]).concat(a,e.slice(arguments[2],e.length));e.splice(0,e.length);var l,h=v(u);try{for(h.s();!(l=h.n()).done;){var c=l.value;e.push(c)}}catch(t){h.e(t)}finally{h.f()}}}},{key:\"asList\",value:function(t){var e,n=new pt,r=v(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.add(i)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:\"copyOf\",value:function(t,e){return t.slice(0,e)}}]),e}(),Rt=function e(){t(this,e)},At=function(e){r(s,j);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"computeEnvelopeInternal\",value:function(){return this._shell.getEnvelopeInternal()}},{key:\"getCoordinates\",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t}},{key:\"getArea\",value:function(){var t=0;t+=Tt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=Tt.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:\"copyInternal\",value:function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new s(t,e,this._factory)}},{key:\"isRectangle\",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof j){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this._shell,o=n._shell;if(!r.equalsExact(o,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(n._holes[a],e))return!1;return!0}return c(i(s.prototype),\"equalsExact\",this).apply(this,arguments)}},{key:\"normalize\",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);Ot.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=e.getCoordinateSequence(),i=It.minCoordinateIndex(r,0,r.size()-2);It.scroll(r,i,!0),ht.isCCW(r)===n&&It.reverse(r)}}},{key:\"getCoordinate\",value:function(){return this._shell.getCoordinate()}},{key:\"getNumInteriorRing\",value:function(){return this._holes.length}},{key:\"getBoundaryDimension\",value:function(){return 1}},{key:\"reverseInternal\",value:function(){for(var t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null),n=0;n<e.length;n++)e[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(t,e)}},{key:\"getTypeCode\",value:function(){return j.TYPECODE_POLYGON}},{key:\"getDimension\",value:function(){return 2}},{key:\"getLength\",value:function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:\"getNumPoints\",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:\"convexHull\",value:function(){return this.getExteriorRing().convexHull()}},{key:\"normalized\",value:function(t,e){var n=t.copy();return this.normalize(n,e),n}},{key:\"compareToSameClass\",value:function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,s=i._shell,a=o.compareToSameClass(s,r);if(0!==a)return a;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),h=0;h<u&&h<l;){var c=this.getInteriorRingN(h),f=i.getInteriorRingN(h),g=c.compareToSameClass(f,r);if(0!==g)return g;h++}return h<u?1:h<l?-1:0}}},{key:\"apply\",value:function(){if(rt(arguments[0],kt)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(rt(arguments[0],Mt)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var r=0;r<this._holes.length&&(this._holes[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],St))arguments[0].filter(this);else if(rt(arguments[0],x)){var i=arguments[0];i.filter(this),this._shell.apply(i);for(var o=0;o<this._holes.length;o++)this._holes[o].apply(i)}}},{key:\"getBoundary\",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:\"getGeometryType\",value:function(){return j.TYPENAME_POLYGON}},{key:\"getExteriorRing\",value:function(){return this._shell}},{key:\"isEmpty\",value:function(){return this._shell.isEmpty()}},{key:\"getInteriorRingN\",value:function(t){return this._holes[t]}},{key:\"interfaces_\",get:function(){return[Rt]}}],[{key:\"constructor_\",value:function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(j.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),j.hasNullElements(e))throw new _(\"holes must not contain null elements\");if(t.isEmpty()&&j.hasNonEmptyElements(e))throw new _(\"shell is empty but holes are not\");this._shell=t,this._holes=e}}]),s}(),Dt=function(e){r(i,W);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return i}(),Ft=function(e){r(o,Dt);var i=h(o);function o(e){var n;return t(this,o),(n=i.call(this)).array=[],e instanceof U&&n.addAll(e),n}return n(o,[{key:\"contains\",value:function(t){var e,n=v(this.array);try{for(n.s();!(e=n.n()).done;)if(0===e.value.compareTo(t))return!0}catch(t){n.e(t)}finally{n.f()}return!1}},{key:\"add\",value:function(t){if(this.contains(t))return!1;for(var e=0,n=this.array.length;e<n;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}},{key:\"addAll\",value:function(t){var e,n=v(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:\"remove\",value:function(){throw new H}},{key:\"size\",value:function(){return this.array.length}},{key:\"isEmpty\",value:function(){return 0===this.array.length}},{key:\"toArray\",value:function(){return this.array.slice()}},{key:\"iterator\",value:function(){return new qt(this.array)}}]),o}(),qt=function(){function e(n){t(this,e),this.array=n,this.position=0}return n(e,[{key:\"next\",value:function(){if(this.position===this.array.length)throw new Z;return this.array[this.position++]}},{key:\"hasNext\",value:function(){return this.position<this.array.length}},{key:\"remove\",value:function(){throw new H}}]),e}(),Vt=function(e){r(s,j);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"computeEnvelopeInternal\",value:function(){for(var t=new z,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:\"getGeometryN\",value:function(t){return this._geometries[t]}},{key:\"getCoordinates\",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t}},{key:\"getArea\",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:\"copyInternal\",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof j){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],e))return!1;return!0}return c(i(s.prototype),\"equalsExact\",this).apply(this,arguments)}},{key:\"normalize\",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ot.sort(this._geometries)}},{key:\"getCoordinate\",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:\"getBoundaryDimension\",value:function(){for(var t=Nt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:\"reverseInternal\",value:function(){for(var t=this._geometries.length,e=new pt(t),n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}},{key:\"getTypeCode\",value:function(){return j.TYPECODE_GEOMETRYCOLLECTION}},{key:\"getDimension\",value:function(){for(var t=Nt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:\"getLength\",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:\"getNumPoints\",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:\"getNumGeometries\",value:function(){return this._geometries.length}},{key:\"compareToSameClass\",value:function(){if(1===arguments.length){var t=arguments[0],e=new Ft(Ot.asList(this._geometries)),n=new Ft(Ot.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),s=i.getNumGeometries(),a=0;a<o&&a<s;){var u=this.getGeometryN(a),l=i.getGeometryN(a),h=u.compareToSameClass(l,r);if(0!==h)return h;a++}return a<o?1:a<s?-1:0}}},{key:\"apply\",value:function(){if(rt(arguments[0],kt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(rt(arguments[0],Mt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],St)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(rt(arguments[0],x)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}}},{key:\"getBoundary\",value:function(){return j.checkNotGeometryCollection(this),F.shouldNeverReachHere(),null}},{key:\"getGeometryType\",value:function(){return j.TYPENAME_GEOMETRYCOLLECTION}},{key:\"isEmpty\",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:\"constructor_\",value:function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];if(j.constructor_.call(this,e),null===t&&(t=[]),j.hasNullElements(t))throw new _(\"geometries must not contain null elements\");this._geometries=t}}}]),s}(),Gt=function(e){r(s,Vt);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"copyInternal\",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:\"isValid\",value:function(){return!0}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof j){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&c(i(s.prototype),\"equalsExact\",this).call(this,t,e)}return c(i(s.prototype),\"equalsExact\",this).apply(this,arguments)}},{key:\"getCoordinate\",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return c(i(s.prototype),\"getCoordinate\",this).apply(this,arguments)}},{key:\"getBoundaryDimension\",value:function(){return Nt.FALSE}},{key:\"getTypeCode\",value:function(){return j.TYPECODE_MULTIPOINT}},{key:\"getDimension\",value:function(){return 0}},{key:\"getBoundary\",value:function(){return this.getFactory().createGeometryCollection()}},{key:\"getGeometryType\",value:function(){return j.TYPENAME_MULTIPOINT}},{key:\"interfaces_\",get:function(){return[Pt]}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Vt.constructor_.call(this,t,e)}}]),s}(),Bt=function(e){r(s,Lt);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"copyInternal\",value:function(){return new s(this._points.copy(),this._factory)}},{key:\"getBoundaryDimension\",value:function(){return Nt.FALSE}},{key:\"isClosed\",value:function(){return!!this.isEmpty()||c(i(s.prototype),\"isClosed\",this).call(this)}},{key:\"reverseInternal\",value:function(){var t=this._points.copy();return It.reverse(t),this.getFactory().createLinearRing(t)}},{key:\"getTypeCode\",value:function(){return j.TYPECODE_LINEARRING}},{key:\"validateConstruction\",value:function(){if(!this.isEmpty()&&!c(i(s.prototype),\"isClosed\",this).call(this))throw new _(\"Points of LinearRing do not form a closed linestring\");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<s.MINIMUM_VALID_SIZE)throw new _(\"Invalid number of points in LinearRing (found \"+this.getCoordinateSequence().size()+\" - must be 0 or >= 4)\")}},{key:\"getGeometryType\",value:function(){return j.TYPENAME_LINEARRING}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Lt.constructor_.call(this,t,e),this.validateConstruction()}}]),s}();Bt.MINIMUM_VALID_SIZE=4;var Yt=function(e){r(o,B);var i=h(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:\"setOrdinate\",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;default:throw new _(\"Invalid ordinate index: \"+t)}}},{key:\"getZ\",value:function(){return B.NULL_ORDINATE}},{key:\"getOrdinate\",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y}throw new _(\"Invalid ordinate index: \"+t)}},{key:\"setZ\",value:function(t){throw new _(\"CoordinateXY dimension 2 does not support z-ordinate\")}},{key:\"copy\",value:function(){return new o(this)}},{key:\"toString\",value:function(){return\"(\"+this.x+\", \"+this.y+\")\"}},{key:\"setCoordinate\",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:\"constructor_\",value:function(){if(0===arguments.length)B.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];B.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof B){var e=arguments[0];B.constructor_.call(this,e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];B.constructor_.call(this,n,r,B.NULL_ORDINATE)}}}]),o}();Yt.X=0,Yt.Y=1,Yt.Z=-1,Yt.M=-1;var zt=function(e){r(o,B);var i=h(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:\"getM\",value:function(){return this._m}},{key:\"setOrdinate\",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;case o.M:this._m=e;break;default:throw new _(\"Invalid ordinate index: \"+t)}}},{key:\"setM\",value:function(t){this._m=t}},{key:\"getZ\",value:function(){return B.NULL_ORDINATE}},{key:\"getOrdinate\",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y;case o.M:return this._m}throw new _(\"Invalid ordinate index: \"+t)}},{key:\"setZ\",value:function(t){throw new _(\"CoordinateXY dimension 2 does not support z-ordinate\")}},{key:\"copy\",value:function(){return new o(this)}},{key:\"toString\",value:function(){return\"(\"+this.x+\", \"+this.y+\" m=\"+this.getM()+\")\"}},{key:\"setCoordinate\",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:\"constructor_\",value:function(){if(this._m=null,0===arguments.length)B.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];B.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof B){var e=arguments[0];B.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];B.constructor_.call(this,n,r,B.NULL_ORDINATE),this._m=i}}}]),o}();zt.X=0,zt.Y=1,zt.Z=-1,zt.M=2;var jt=function(e){r(o,B);var i=h(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:\"getM\",value:function(){return this._m}},{key:\"setOrdinate\",value:function(t,e){switch(t){case B.X:this.x=e;break;case B.Y:this.y=e;break;case B.Z:this.z=e;break;case B.M:this._m=e;break;default:throw new _(\"Invalid ordinate index: \"+t)}}},{key:\"setM\",value:function(t){this._m=t}},{key:\"getOrdinate\",value:function(t){switch(t){case B.X:return this.x;case B.Y:return this.y;case B.Z:return this.getZ();case B.M:return this.getM()}throw new _(\"Invalid ordinate index: \"+t)}},{key:\"copy\",value:function(){return new o(this)}},{key:\"toString\",value:function(){return\"(\"+this.x+\", \"+this.y+\", \"+this.getZ()+\" m=\"+this.getM()+\")\"}},{key:\"setCoordinate\",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:\"constructor_\",value:function(){if(this._m=null,0===arguments.length)B.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];B.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof B){var e=arguments[0];B.constructor_.call(this,e),this._m=this.getM()}}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];B.constructor_.call(this,n,r,i),this._m=s}}}]),o}(),Xt=function(){function e(){t(this,e)}return n(e,null,[{key:\"measures\",value:function(t){return t instanceof Yt?0:t instanceof zt||t instanceof jt?1:0}},{key:\"dimension\",value:function(t){return t instanceof Yt?2:t instanceof zt?3:t instanceof jt?4:3}},{key:\"create\",value:function(){if(1===arguments.length){var t=arguments[0];return e.create(t,0)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return 2===n?new Yt:3===n&&0===r?new B:3===n&&1===r?new zt:4===n&&1===r?new jt:new B}}}]),e}(),Ut=function(e){r(s,pt);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"getCoordinate\",value:function(t){return this.get(t)}},{key:\"addAll\",value:function(){if(2===arguments.length&&\"boolean\"==typeof arguments[1]&&rt(arguments[0],U)){for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e}return c(i(s.prototype),\"addAll\",this).apply(this,arguments)}},{key:\"clone\",value:function(){for(var t=c(i(s.prototype),\"clone\",this).call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}},{key:\"toCoordinateArray\",value:function(){if(0===arguments.length)return this.toArray(s.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(s.coordArrayType);for(var t=this.size(),e=new Array(t).fill(null),n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}},{key:\"add\",value:function(){if(1===arguments.length){var t=arguments[0];return c(i(s.prototype),\"add\",this).call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&\"boolean\"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof B&&\"boolean\"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;c(i(s.prototype),\"add\",this).call(this,r)}else if(arguments[0]instanceof Object&&\"boolean\"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if(\"boolean\"==typeof arguments[2]&&arguments[0]instanceof Array&&\"boolean\"==typeof arguments[1]){var u=arguments[0],l=arguments[1];if(arguments[2])for(var h=0;h<u.length;h++)this.add(u[h],l);else for(var f=u.length-1;f>=0;f--)this.add(u[f],l);return!0}if(\"boolean\"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof B){var g=arguments[0],p=arguments[1];if(!arguments[2]){var v=this.size();if(v>0){if(g>0&&this.get(g-1).equals2D(p))return null;if(g<v&&this.get(g).equals2D(p))return null}}c(i(s.prototype),\"add\",this).call(this,g,p)}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],m=arguments[2],_=arguments[3],x=1;m>_&&(x=-1);for(var E=m;E!==_;E+=x)this.add(d[E],y);return!0}}},{key:\"closeRing\",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:\"constructor_\",value:function(){if(0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}]),s}();Ut.coordArrayType=new Array(0).fill(null);var Zt=function(){function e(){t(this,e)}return n(e,null,[{key:\"isRing\",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:\"ptNotInList\",value:function(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.indexOf(i,n)<0)return i}return null}},{key:\"scroll\",value:function(t,n){var r=e.indexOf(n,t);if(r<0)return null;var i=new Array(t.length).fill(null);mt.arraycopy(t,r,i,0,t.length-r),mt.arraycopy(t,0,i,t.length-r,r),mt.arraycopy(i,0,t,0,t.length)}},{key:\"equals\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}}},{key:\"intersection\",value:function(t,e){for(var n=new Ut,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()}},{key:\"measures\",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,r=v(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n=Math.max(n,Xt.measures(i))}}catch(t){r.e(t)}finally{r.f()}return n}},{key:\"hasRepeatedPoints\",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:\"removeRepeatedPoints\",value:function(t){return e.hasRepeatedPoints(t)?new Ut(t,!1).toCoordinateArray():t}},{key:\"reverse\",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}}},{key:\"removeNull\",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r}},{key:\"copyDeep\",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=r[i+u].copy()}},{key:\"isEqualReversed\",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0}},{key:\"envelope\",value:function(t){for(var e=new z,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:\"toCoordinateArray\",value:function(t){return t.toArray(e.coordArrayType)}},{key:\"dimension\",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,r=v(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n=Math.max(n,Xt.dimension(i))}}catch(t){r.e(t)}finally{r.f()}return n}},{key:\"atLeastNCoordinatesOrNothing\",value:function(t,e){return e.length>=t?e:[]}},{key:\"indexOf\",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:\"increasingDirection\",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1}},{key:\"compare\",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0}},{key:\"minCoordinate\",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:\"extract\",value:function(t,e,n){e=_t.clamp(e,0,t.length);var r=(n=_t.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i}}]),e}(),Ht=function(){function e(){t(this,e)}return n(e,[{key:\"compare\",value:function(t,e){var n=t,r=e;return Zt.compare(n,r)}},{key:\"interfaces_\",get:function(){return[R]}}]),e}(),Wt=function(){function e(){t(this,e)}return n(e,[{key:\"compare\",value:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Zt.compare(n,r);return Zt.isEqualReversed(n,r)?0:i}},{key:\"OLDcompare\",value:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Zt.increasingDirection(n),o=Zt.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0}},{key:\"interfaces_\",get:function(){return[R]}}]),e}();Zt.ForwardComparator=Ht,Zt.BidirectionalComparator=Wt,Zt.coordArrayType=new Array(0).fill(null);var Jt=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:\"append\",value:function(t){this.str+=t}},{key:\"setCharAt\",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:\"toString\",value:function(){return this.str}}]),e}(),Kt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getM\",value:function(t){return this.hasM()?this._coordinates[t].getM():O.NaN}},{key:\"setOrdinate\",value:function(t,e,n){switch(e){case lt.X:this._coordinates[t].x=n;break;case lt.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:\"getZ\",value:function(t){return this.hasZ()?this._coordinates[t].getZ():O.NaN}},{key:\"size\",value:function(){return this._coordinates.length}},{key:\"getOrdinate\",value:function(t,e){switch(e){case lt.X:return this._coordinates[t].x;case lt.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:\"getCoordinate\",value:function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:\"getCoordinateCopy\",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:\"createCoordinate\",value:function(){return Xt.create(this.getDimension(),this.getMeasures())}},{key:\"getDimension\",value:function(){return this._dimension}},{key:\"getX\",value:function(t){return this._coordinates[t].x}},{key:\"getMeasures\",value:function(){return this._measures}},{key:\"expandEnvelope\",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:\"copy\",value:function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++){var r=this.createCoordinate();r.setCoordinate(this._coordinates[n]),t[n]=r}return new e(t,this._dimension,this._measures)}},{key:\"toString\",value:function(){if(this._coordinates.length>0){var t=new Jt(17*this._coordinates.length);t.append(\"(\"),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(\", \"),t.append(this._coordinates[e]);return t.append(\")\"),t.toString()}return\"()\"}},{key:\"getY\",value:function(t){return this._coordinates[t].y}},{key:\"toCoordinateArray\",value:function(){return this._coordinates}},{key:\"interfaces_\",get:function(){return[lt,b]}}],[{key:\"constructor_\",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];e.constructor_.call(this,t,Zt.dimension(t),Zt.measures(t))}else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var r=0;r<n;r++)this._coordinates[r]=new B}else if(rt(arguments[0],lt)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._measures=i.getMeasures(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=i.getCoordinateCopy(o)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];e.constructor_.call(this,s,a,Zt.measures(s))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],l=arguments[1];this._coordinates=new Array(u).fill(null),this._dimension=l;for(var h=0;h<u;h++)this._coordinates[h]=Xt.create(l)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0],f=arguments[1],g=arguments[2];this._dimension=f,this._measures=g,this._coordinates=null===c?new Array(0).fill(null):c}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var p=arguments[0],v=arguments[1],d=arguments[2];this._coordinates=new Array(p).fill(null),this._dimension=v,this._measures=d;for(var y=0;y<p;y++)this._coordinates[y]=this.createCoordinate()}}}]),e}(),Qt=function(){function e(){t(this,e)}return n(e,[{key:\"readResolve\",value:function(){return e.instance()}},{key:\"create\",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Kt(arguments[0]);if(rt(arguments[0],lt))return new Kt(arguments[0])}else{if(2===arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Kt(arguments[0],t)}if(3===arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new Kt(arguments[0],n+e,e)}}}},{key:\"interfaces_\",get:function(){return[Et,b]}}],[{key:\"instance\",value:function(){return e.instanceObject}}]),e}();Qt.instanceObject=new Qt;var $t=function(e){r(s,Vt);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"copyInternal\",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof j){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&c(i(s.prototype),\"equalsExact\",this).call(this,t,e)}return c(i(s.prototype),\"equalsExact\",this).apply(this,arguments)}},{key:\"getBoundaryDimension\",value:function(){return 1}},{key:\"getTypeCode\",value:function(){return j.TYPECODE_MULTIPOLYGON}},{key:\"getDimension\",value:function(){return 2}},{key:\"getBoundary\",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new pt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))}},{key:\"getGeometryType\",value:function(){return j.TYPENAME_MULTIPOLYGON}},{key:\"interfaces_\",get:function(){return[Rt]}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Vt.constructor_.call(this,t,e)}}]),s}(),te=function(){function e(){t(this,e)}return n(e,[{key:\"get\",value:function(){}},{key:\"put\",value:function(){}},{key:\"size\",value:function(){}},{key:\"values\",value:function(){}},{key:\"entrySet\",value:function(){}}]),e}(),ee=function(e){r(o,te);var i=h(o);function o(){var e;return t(this,o),(e=i.call(this)).map=new Map,e}return n(o,[{key:\"get\",value:function(t){return this.map.get(t)||null}},{key:\"put\",value:function(t,e){return this.map.set(t,e),e}},{key:\"values\",value:function(){for(var t=new pt,e=this.map.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t}},{key:\"entrySet\",value:function(){var t=new J;return this.map.entries().forEach(function(e){return t.add(e)}),t}},{key:\"size\",value:function(){return this.map.size()}}]),o}(),ne=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"equals\",value:function(t){if(!(t instanceof e))return!1;var n=t;return this._modelType===n._modelType&&this._scale===n._scale}},{key:\"compareTo\",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return ot.compare(n,r)}},{key:\"getScale\",value:function(){return this._scale}},{key:\"isFloating\",value:function(){return this._modelType===e.FLOATING||this._modelType===e.FLOATING_SINGLE}},{key:\"getType\",value:function(){return this._modelType}},{key:\"toString\",value:function(){var t=\"UNKNOWN\";return this._modelType===e.FLOATING?t=\"Floating\":this._modelType===e.FLOATING_SINGLE?t=\"Floating-Single\":this._modelType===e.FIXED&&(t=\"Fixed (Scale=\"+this.getScale()+\")\"),t}},{key:\"makePrecise\",value:function(){if(\"number\"==typeof arguments[0]){var t=arguments[0];return O.isNaN(t)||this._modelType===e.FLOATING_SINGLE?t:this._modelType===e.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof B){var n=arguments[0];if(this._modelType===e.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}}},{key:\"getMaximumSignificantDigits\",value:function(){var t=16;return this._modelType===e.FLOATING?t=16:this._modelType===e.FLOATING_SINGLE?t=6:this._modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:\"setScale\",value:function(t){this._scale=Math.abs(t)}},{key:\"interfaces_\",get:function(){return[b,E]}}],[{key:\"constructor_\",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof re){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(\"number\"==typeof arguments[0]){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},{key:\"mostPrecise\",value:function(t,e){return t.compareTo(e)>=0?t:e}}]),e}(),re=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"readResolve\",value:function(){return e.nameToTypeMap.get(this._name)}},{key:\"toString\",value:function(){return this._name}},{key:\"interfaces_\",get:function(){return[b]}}],[{key:\"constructor_\",value:function(){this._name=null;var t=arguments[0];this._name=t,e.nameToTypeMap.put(t,this)}}]),e}();re.nameToTypeMap=new ee,ne.Type=re,ne.FIXED=new re(\"FIXED\"),ne.FLOATING=new re(\"FLOATING\"),ne.FLOATING_SINGLE=new re(\"FLOATING SINGLE\"),ne.maximumPreciseValue=9007199254740992;var ie=function(e){r(s,Vt);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"copyInternal\",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof j){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&c(i(s.prototype),\"equalsExact\",this).call(this,t,e)}return c(i(s.prototype),\"equalsExact\",this).apply(this,arguments)}},{key:\"getBoundaryDimension\",value:function(){return this.isClosed()?Nt.FALSE:0}},{key:\"isClosed\",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:\"getTypeCode\",value:function(){return j.TYPECODE_MULTILINESTRING}},{key:\"getDimension\",value:function(){return 1}},{key:\"getBoundary\",value:function(){throw new H}},{key:\"getGeometryType\",value:function(){return j.TYPENAME_MULTILINESTRING}},{key:\"interfaces_\",get:function(){return[wt]}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Vt.constructor_.call(this,t,e)}}]),s}(),oe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"createEmpty\",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new _(\"Invalid dimension: \"+t)}}},{key:\"toGeometry\",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new B(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new B(t.getMinX(),t.getMinY()),new B(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new B(t.getMinX(),t.getMinY()),new B(t.getMinX(),t.getMaxY()),new B(t.getMaxX(),t.getMaxY()),new B(t.getMaxX(),t.getMinY()),new B(t.getMinX(),t.getMinY())]),null)}},{key:\"createLineString\",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],lt))return new Lt(arguments[0],this)}}},{key:\"createMultiLineString\",value:function(){return 0===arguments.length?new ie(null,this):1===arguments.length?new ie(arguments[0],this):void 0}},{key:\"buildGeometry\",value:function(t){for(var n=null,r=!1,i=!1,o=t.iterator();o.hasNext();){var s=o.next(),a=s.getTypeCode();null===n&&(n=a),a!==n&&(r=!0),s instanceof Vt&&(i=!0)}if(null===n)return this.createGeometryCollection();if(r||i)return this.createGeometryCollection(e.toGeometryArray(t));var u=t.iterator().next();if(t.size()>1){if(u instanceof At)return this.createMultiPolygon(e.toPolygonArray(t));if(u instanceof Lt)return this.createMultiLineString(e.toLineStringArray(t));if(u instanceof Ct)return this.createMultiPoint(e.toPointArray(t));F.shouldNeverReachHere(\"Unhandled geometry type: \"+u.getGeometryType())}return u}},{key:\"createMultiPointFromCoords\",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:\"createPoint\",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(rt(arguments[0],lt))return new Ct(arguments[0],this)}}},{key:\"getCoordinateSequenceFactory\",value:function(){return this._coordinateSequenceFactory}},{key:\"createPolygon\",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(rt(arguments[0],lt)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Bt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new At(arguments[0],arguments[1],this)}},{key:\"getSRID\",value:function(){return this._SRID}},{key:\"createGeometryCollection\",value:function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0}},{key:\"getPrecisionModel\",value:function(){return this._precisionModel}},{key:\"createLinearRing\",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],lt))return new Bt(arguments[0],this)}}},{key:\"createMultiPolygon\",value:function(){return 0===arguments.length?new $t(null,this):1===arguments.length?new $t(arguments[0],this):void 0}},{key:\"createMultiPoint\",value:function(){if(0===arguments.length)return new Gt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Gt(arguments[0],this);if(rt(arguments[0],lt)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var r=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());It.copy(t,n,r,0,1),e[n]=this.createPoint(r)}return this.createMultiPoint(e)}}}},{key:\"interfaces_\",get:function(){return[b]}}],[{key:\"constructor_\",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)e.constructor_.call(this,new ne,0);else if(1===arguments.length){if(rt(arguments[0],Et)){var t=arguments[0];e.constructor_.call(this,new ne,0,t)}else if(arguments[0]instanceof ne){var n=arguments[0];e.constructor_.call(this,n,0,e.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];e.constructor_.call(this,r,i,e.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this._precisionModel=o,this._coordinateSequenceFactory=a,this._SRID=s}}},{key:\"toMultiPolygonArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toGeometryArray\",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"getDefaultCoordinateSequenceFactory\",value:function(){return Qt.instance()}},{key:\"toMultiLineStringArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toLineStringArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toMultiPointArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toLinearRingArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toPointArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toPolygonArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"createPointFromInternalCoord\",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}]),e}(),se=\"XY\",ae={POINT:\"Point\",LINE_STRING:\"LineString\",LINEAR_RING:\"LinearRing\",POLYGON:\"Polygon\",MULTI_POINT:\"MultiPoint\",MULTI_LINE_STRING:\"MultiLineString\",MULTI_POLYGON:\"MultiPolygon\",GEOMETRY_COLLECTION:\"GeometryCollection\",CIRCLE:\"Circle\"},ue=\"EMPTY\";for(var le in ae)ae[le].toUpperCase();var he=function(){function e(n){t(this,e),this.wkt=n,this.index_=-1}return n(e,[{key:\"isAlpha_\",value:function(t){return t>=\"a\"&&t<=\"z\"||t>=\"A\"&&t<=\"Z\"}},{key:\"isNumeric_\",value:function(t,e){return t>=\"0\"&&t<=\"9\"||\".\"==t&&!(void 0!==e&&e)}},{key:\"isWhiteSpace_\",value:function(t){return\" \"==t||\"\\t\"==t||\"\\r\"==t||\"\\n\"==t}},{key:\"nextChar_\",value:function(){return this.wkt.charAt(++this.index_)}},{key:\"nextToken\",value:function(){var t,e=this.nextChar_(),n=this.index_,r=e;if(\"(\"==e)t=2;else if(\",\"==e)t=5;else if(\")\"==e)t=3;else if(this.isNumeric_(e)||\"-\"==e)t=4,r=this.readNumber_();else if(this.isAlpha_(e))t=1,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(\"\"!==e)throw new Error(\"Unexpected character: \"+e);t=6}return{position:n,value:r,type:t}}},{key:\"readNumber_\",value:function(){var t,e=this.index_,n=!1,r=!1;do{\".\"==t?n=!0:\"e\"!=t&&\"E\"!=t||(r=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!r&&(\"e\"==t||\"E\"==t)||r&&(\"-\"==t||\"+\"==t));return parseFloat(this.wkt.substring(e,this.index_--))}},{key:\"readText_\",value:function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}]),e}(),ce=function(){function e(n,r){t(this,e),this.lexer_=n,this.token_,this.layout_=se,this.factory=r}return n(e,[{key:\"consume_\",value:function(){this.token_=this.lexer_.nextToken()}},{key:\"isTokenType\",value:function(t){return this.token_.type==t}},{key:\"match\",value:function(t){var e=this.isTokenType(t);return e&&this.consume_(),e}},{key:\"parse\",value:function(){return this.consume_(),this.parseGeometry_()}},{key:\"parseGeometryLayout_\",value:function(){var t=se,e=this.token_;if(this.isTokenType(1)){var n=e.value;\"Z\"===n?t=\"XYZ\":\"M\"===n?t=\"XYM\":\"ZM\"===n&&(t=\"XYZM\"),t!==se&&this.consume_()}return t}},{key:\"parseGeometryCollectionText_\",value:function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parsePointText_\",value:function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:\"parseLineStringText_\",value:function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parsePolygonText_\",value:function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parseMultiPointText_\",value:function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parseMultiLineStringText_\",value:function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parseMultiPolygonText_\",value:function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parsePoint_\",value:function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var r=this.token_;if(!this.match(4))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}},{key:\"parsePointList_\",value:function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t}},{key:\"parsePointTextList_\",value:function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t}},{key:\"parseLineStringTextList_\",value:function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t}},{key:\"parsePolygonTextList_\",value:function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t}},{key:\"isEmptyGeometry_\",value:function(){var t=this.isTokenType(1)&&this.token_.value==ue;return t&&this.consume_(),t}},{key:\"formatErrorMessage_\",value:function(){return\"Unexpected `\"+this.token_.value+\"` at position \"+this.token_.position+\" in `\"+this.lexer_.wkt+\"`\"}},{key:\"parseGeometry_\",value:function(){var t=this.factory,e=function(t){return a(B,f(t))},n=function(n){var r=n.map(function(n){return t.createLinearRing(n.map(e))});return r.length>1?t.createPolygon(r[0],r.slice(1)):t.createPolygon(r[0])},r=this.token_;if(this.match(1)){var i=r.value;if(this.layout_=this.parseGeometryLayout_(),\"GEOMETRYCOLLECTION\"==i){var o=this.parseGeometryCollectionText_();return t.createGeometryCollection(o)}switch(i){case\"POINT\":var s=this.parsePointText_();return s?t.createPoint(a(B,f(s))):t.createPoint();case\"LINESTRING\":var u=this.parseLineStringText_().map(e);return t.createLineString(u);case\"LINEARRING\":var l=this.parseLineStringText_().map(e);return t.createLinearRing(l);case\"POLYGON\":var h=this.parsePolygonText_();return h&&0!==h.length?n(h):t.createPolygon();case\"MULTIPOINT\":var c=this.parseMultiPointText_();if(!c||0===c.length)return t.createMultiPoint();var g=c.map(e).map(function(e){return t.createPoint(e)});return t.createMultiPoint(g);case\"MULTILINESTRING\":var p=this.parseMultiLineStringText_().map(function(n){return t.createLineString(n.map(e))});return t.createMultiLineString(p);case\"MULTIPOLYGON\":var v=this.parseMultiPolygonText_();if(!v||0===v.length)return t.createMultiPolygon();var d=v.map(n);return t.createMultiPolygon(d);default:throw new Error(\"Invalid geometry type: \"+i)}}throw new Error(this.formatErrorMessage_())}}]),e}();function fe(t){if(t.isEmpty())return\"\";var e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(\" \")}function ge(t){for(var e=t.getCoordinates().map(function(t){var e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e}),n=[],r=0,i=e.length;r<i;++r)n.push(e[r].join(\" \"));return n.join(\", \")}function pe(t){var e=[];e.push(\"(\"+ge(t.getExteriorRing())+\")\");for(var n=0,r=t.getNumInteriorRing();n<r;++n)e.push(\"(\"+ge(t.getInteriorRingN(n))+\")\");return e.join(\", \")}var ve={Point:fe,LineString:ge,LinearRing:ge,Polygon:pe,MultiPoint:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push(\"(\"+fe(t.getGeometryN(n))+\")\");return e.join(\", \")},MultiLineString:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push(\"(\"+ge(t.getGeometryN(n))+\")\");return e.join(\", \")},MultiPolygon:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push(\"(\"+pe(t.getGeometryN(n))+\")\");return e.join(\", \")},GeometryCollection:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push(de(t.getGeometryN(n)));return e.join(\", \")}};function de(t){var e=t.getGeometryType(),n=ve[e];e=e.toUpperCase();var r=function(t){var e=\"\";if(t.isEmpty())return e;var n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+=\"Z\"),void 0===n.m||Number.isNaN(n.m)||(e+=\"M\"),e}(t);return r.length>0&&(e+=\" \"+r),t.isEmpty()?e+\" \"+ue:e+\" (\"+n(t)+\")\"}var ye=function(){function e(n){t(this,e),this.geometryFactory=n||new oe,this.precisionModel=this.geometryFactory.getPrecisionModel()}return n(e,[{key:\"read\",value:function(t){var e=new he(t);return new ce(e,this.geometryFactory).parse()}},{key:\"write\",value:function(t){return de(t)}}]),e}(),me=function(){function e(n){t(this,e),this.parser=new ye(n)}return n(e,[{key:\"write\",value:function(t){return this.parser.write(t)}}],[{key:\"toLineString\",value:function(t,e){if(2!==arguments.length)throw new Error(\"Not implemented\");return\"LINESTRING ( \"+t.x+\" \"+t.y+\", \"+e.x+\" \"+e.y+\" )\"}}]),e}(),_e=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getIndexAlongSegment\",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:\"getTopologySummary\",value:function(){var t=new Jt;return this.isEndPoint()&&t.append(\" endpoint\"),this._isProper&&t.append(\" proper\"),this.isCollinear()&&t.append(\" collinear\"),t.toString()}},{key:\"computeIntersection\",value:function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)}},{key:\"getIntersectionNum\",value:function(){return this._result}},{key:\"computeIntLineIndex\",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:\"isProper\",value:function(){return this.hasIntersection()&&this._isProper}},{key:\"setPrecisionModel\",value:function(t){this._precisionModel=t}},{key:\"isInteriorIntersection\",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:\"getIntersection\",value:function(t){return this._intPt[t]}},{key:\"isEndPoint\",value:function(){return this.hasIntersection()&&!this._isProper}},{key:\"hasIntersection\",value:function(){return this._result!==e.NO_INTERSECTION}},{key:\"getEdgeDistance\",value:function(t,n){return e.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1])}},{key:\"isCollinear\",value:function(){return this._result===e.COLLINEAR_INTERSECTION}},{key:\"toString\",value:function(){return me.toLineString(this._inputLines[0][0],this._inputLines[0][1])+\" - \"+me.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:\"getEndpoint\",value:function(t,e){return this._inputLines[t][e]}},{key:\"isIntersection\",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:\"getIntersectionAlongSegment\",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:\"constructor_\",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new B,this._intPt[1]=new B,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:\"computeEdgeDistance\",value:function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return F.isTrue(!(0===o&&!t.equals(e)),\"Bad distance calculation\"),o}},{key:\"nonRobustComputeEdgeDistance\",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return F.isTrue(!(0===o&&!t.equals(e)),\"Invalid distance calculation\"),o}}]),e}();_e.DONT_INTERSECT=0,_e.DO_INTERSECT=1,_e.COLLINEAR=2,_e.NO_INTERSECTION=0,_e.POINT_INTERSECTION=1,_e.COLLINEAR_INTERSECTION=2;var xe=function(e){r(s,_e);var o=h(s);function s(){return t(this,s),o.call(this)}return n(s,[{key:\"isInSegmentEnvelopes\",value:function(t){var e=new z(this._inputLines[0][0],this._inputLines[0][1]),n=new z(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}},{key:\"computeIntersection\",value:function(){if(3!==arguments.length)return c(i(s.prototype),\"computeIntersection\",this).apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,z.intersects(e,n,t)&&0===ht.index(e,n,t)&&0===ht.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=_e.POINT_INTERSECTION,null;this._result=_e.NO_INTERSECTION}},{key:\"intersection\",value:function(t,e,n,r){var i=this.intersectionSafe(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new B(s.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}},{key:\"checkDD\",value:function(t,e,n,r,i){var o=ut.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);mt.out.println(\"DD in env = \"+s+\"  --------------------- \"+o),i.distance(o)>1e-4&&mt.out.println(\"Distance = \"+i.distance(o))}},{key:\"intersectionSafe\",value:function(t,e,n,r){var i=yt.intersection(t,e,n,r);return null===i&&(i=s.nearestEndpoint(t,e,n,r)),i}},{key:\"computeCollinearIntersection\",value:function(t,e,n,r){var i=z.intersects(t,e,n),o=z.intersects(t,e,r),s=z.intersects(n,r,t),a=z.intersects(n,r,e);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,_e.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,_e.COLLINEAR_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?_e.COLLINEAR_INTERSECTION:_e.POINT_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?_e.COLLINEAR_INTERSECTION:_e.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?_e.COLLINEAR_INTERSECTION:_e.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?_e.COLLINEAR_INTERSECTION:_e.POINT_INTERSECTION):_e.NO_INTERSECTION}},{key:\"computeIntersect\",value:function(t,e,n,r){if(this._isProper=!1,!z.intersects(t,e,n,r))return _e.NO_INTERSECTION;var i=ht.index(t,e,n),o=ht.index(t,e,r);if(i>0&&o>0||i<0&&o<0)return _e.NO_INTERSECTION;var s=ht.index(n,r,t),a=ht.index(n,r,e);return s>0&&a>0||s<0&&a<0?_e.NO_INTERSECTION:0===i&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new B(n):0===o?this._intPt[0]=new B(r):0===s?this._intPt[0]=new B(t):0===a&&(this._intPt[0]=new B(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),_e.POINT_INTERSECTION)}}],[{key:\"nearestEndpoint\",value:function(t,e,n,r){var i=t,o=xt.pointToSegment(t,n,r),s=xt.pointToSegment(e,n,r);return s<o&&(o=s,i=e),(s=xt.pointToSegment(n,t,e))<o&&(o=s,i=n),(s=xt.pointToSegment(r,t,e))<o&&(o=s,i=r),i}}]),s}(),Ee=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"countSegment\",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=ht.index(t,e,this._p);if(i===ht.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(i=-i),i===ht.LEFT&&this._crossingCount++}}},{key:\"isPointInPolygon\",value:function(){return this.getLocation()!==X.EXTERIOR}},{key:\"getLocation\",value:function(){return this._isPointOnSegment?X.BOUNDARY:this._crossingCount%2==1?X.INTERIOR:X.EXTERIOR}},{key:\"isOnSegment\",value:function(){return this._isPointOnSegment}}],[{key:\"constructor_\",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:\"locatePointInRing\",value:function(){if(arguments[0]instanceof B&&rt(arguments[1],lt)){for(var t=arguments[1],n=new e(arguments[0]),r=new B,i=new B,o=1;o<t.size();o++)if(t.getCoordinate(o,r),t.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof B&&arguments[1]instanceof Array){for(var s=arguments[1],a=new e(arguments[0]),u=1;u<s.length;u++){var l=s[u],h=s[u-1];if(a.countSegment(l,h),a.isOnSegment())return a.getLocation()}return a.getLocation()}}}]),e}(),ke=function(){function e(){t(this,e)}return n(e,null,[{key:\"isOnLine\",value:function(){if(arguments[0]instanceof B&&rt(arguments[1],lt)){for(var t=arguments[0],e=arguments[1],n=new xe,r=new B,i=new B,o=e.size(),s=1;s<o;s++)if(e.getCoordinate(s-1,r),e.getCoordinate(s,i),n.computeIntersection(t,r,i),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof B&&arguments[1]instanceof Array){for(var a=arguments[0],u=arguments[1],l=new xe,h=1;h<u.length;h++){var c=u[h-1],f=u[h];if(l.computeIntersection(a,c,f),l.hasIntersection())return!0}return!1}}},{key:\"locateInRing\",value:function(t,e){return Ee.locatePointInRing(t,e)}},{key:\"isInRing\",value:function(t,n){return e.locateInRing(t,n)!==X.EXTERIOR}}]),e}(),be=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"setAllLocations\",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:\"isNull\",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==X.NONE)return!1;return!0}},{key:\"setAllLocationsIfNull\",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===X.NONE&&(this.location[e]=t)}},{key:\"isLine\",value:function(){return 1===this.location.length}},{key:\"merge\",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Q.ON]=this.location[Q.ON],e[Q.LEFT]=X.NONE,e[Q.RIGHT]=X.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===X.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:\"getLocations\",value:function(){return this.location}},{key:\"flip\",value:function(){if(this.location.length<=1)return null;var t=this.location[Q.LEFT];this.location[Q.LEFT]=this.location[Q.RIGHT],this.location[Q.RIGHT]=t}},{key:\"toString\",value:function(){var t=new it;return this.location.length>1&&t.append(X.toLocationSymbol(this.location[Q.LEFT])),t.append(X.toLocationSymbol(this.location[Q.ON])),this.location.length>1&&t.append(X.toLocationSymbol(this.location[Q.RIGHT])),t.toString()}},{key:\"setLocations\",value:function(t,e,n){this.location[Q.ON]=t,this.location[Q.LEFT]=e,this.location[Q.RIGHT]=n}},{key:\"get\",value:function(t){return t<this.location.length?this.location[t]:X.NONE}},{key:\"isArea\",value:function(){return this.location.length>1}},{key:\"isAnyNull\",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===X.NONE)return!0;return!1}},{key:\"setLocation\",value:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Q.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:\"init\",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(X.NONE)}},{key:\"isEqualOnSide\",value:function(t,e){return this.location[e]===t.location[e]}},{key:\"allPositionsEqual\",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:\"constructor_\",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Q.ON]=n}else if(arguments[0]instanceof e){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Q.ON]=o,this.location[Q.LEFT]=s,this.location[Q.RIGHT]=a}}}]),e}(),we=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getGeometryCount\",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:\"setAllLocations\",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:\"isNull\",value:function(t){return this.elt[t].isNull()}},{key:\"setAllLocationsIfNull\",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:\"isLine\",value:function(t){return this.elt[t].isLine()}},{key:\"merge\",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new be(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:\"flip\",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:\"getLocation\",value:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Q.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:\"toString\",value:function(){var t=new it;return null!==this.elt[0]&&(t.append(\"A:\"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(\" B:\"),t.append(this.elt[1].toString())),t.toString()}},{key:\"isArea\",value:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}}},{key:\"isAnyNull\",value:function(t){return this.elt[t].isAnyNull()}},{key:\"setLocation\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Q.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}}},{key:\"isEqualOnSide\",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:\"allPositionsEqual\",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:\"toLine\",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new be(this.elt[t].location[0]))}}],[{key:\"constructor_\",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new be(t),this.elt[1]=new be(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new be(n.elt[0]),this.elt[1]=new be(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new be(X.NONE),this.elt[1]=new be(X.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new be(o,s,a),this.elt[1]=new be(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new be(X.NONE,X.NONE,X.NONE),this.elt[1]=new be(X.NONE,X.NONE,X.NONE),this.elt[u].setLocations(l,h,c)}}},{key:\"toLineLabel\",value:function(t){for(var n=new e(X.NONE),r=0;r<2;r++)n.setLocation(r,t.getLocation(r));return n}}]),e}(),Ie=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"computeRing\",value:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ht.isCCW(this._ring.getCoordinates())}},{key:\"isIsolated\",value:function(){return 1===this._label.getGeometryCount()}},{key:\"computePoints\",value:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new ft(\"Found null DirectedEdge\");if(e.getEdgeRing()===this)throw new ft(\"Directed Edge visited twice during ring-building at \"+e.getCoordinate());this._edges.add(e);var r=e.getLabel();F.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:\"getLinearRing\",value:function(){return this._ring}},{key:\"getCoordinate\",value:function(t){return this._pts.get(t)}},{key:\"computeMaxNodeDegree\",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}},{key:\"addPoints\",value:function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}}},{key:\"isHole\",value:function(){return this._isHole}},{key:\"setInResult\",value:function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}},{key:\"containsPoint\",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!ke.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0}},{key:\"addHole\",value:function(t){this._holes.add(t)}},{key:\"isShell\",value:function(){return null===this._shell}},{key:\"getLabel\",value:function(){return this._label}},{key:\"getEdges\",value:function(){return this._edges}},{key:\"getMaxNodeDegree\",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:\"getShell\",value:function(){return this._shell}},{key:\"mergeLabel\",value:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Q.RIGHT);if(n===X.NONE)return null;if(this._label.getLocation(e)===X.NONE)return this._label.setLocation(e,n),null}}},{key:\"setShell\",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:\"toPolygon\",value:function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}],[{key:\"constructor_\",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new pt,this._pts=new pt,this._label=new we(X.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new pt,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}}]),e}(),Ne=function(e){r(o,Ie);var i=h(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:\"setEdgeRing\",value:function(t,e){t.setMinEdgeRing(e)}},{key:\"getNext\",value:function(t){return t.getNextMin()}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Ie.constructor_.call(this,t,e)}}]),o}(),Se=function(e){r(o,Ie);var i=h(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:\"buildMinimalRings\",value:function(){var t=new pt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ne(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}},{key:\"setEdgeRing\",value:function(t,e){t.setEdgeRing(e)}},{key:\"linkDirectedEdgesForMinimalEdgeRings\",value:function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}},{key:\"getNext\",value:function(t){return t.getNext()}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Ie.constructor_.call(this,t,e)}}]),o}(),Me=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"setVisited\",value:function(t){this._isVisited=t}},{key:\"setInResult\",value:function(t){this._isInResult=t}},{key:\"isCovered\",value:function(){return this._isCovered}},{key:\"isCoveredSet\",value:function(){return this._isCoveredSet}},{key:\"setLabel\",value:function(t){this._label=t}},{key:\"getLabel\",value:function(){return this._label}},{key:\"setCovered\",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:\"updateIM\",value:function(t){F.isTrue(this._label.getGeometryCount()>=2,\"found partial label\"),this.computeIM(t)}},{key:\"isInResult\",value:function(){return this._isInResult}},{key:\"isVisited\",value:function(){return this._isVisited}}],[{key:\"constructor_\",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}}}]),e}(),Le=function(e){r(s,Me);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"isIncidentEdgeInResult\",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:\"isIsolated\",value:function(){return 1===this._label.getGeometryCount()}},{key:\"getCoordinate\",value:function(){return this._coord}},{key:\"print\",value:function(t){t.println(\"node \"+this._coord+\" lbl: \"+this._label)}},{key:\"computeIM\",value:function(t){}},{key:\"computeMergedLocation\",value:function(t,e){var n=X.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==X.BOUNDARY&&(n=r)}return n}},{key:\"setLabel\",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return c(i(s.prototype),\"setLabel\",this).apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new we(t,e):this._label.setLocation(t,e)}},{key:\"getEdges\",value:function(){return this._edges}},{key:\"mergeLabel\",value:function(){if(arguments[0]instanceof s){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof we)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this._label.getLocation(n)===X.NONE&&this._label.setLocation(n,r)}}},{key:\"add\",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:\"setLabelBoundary\",value:function(t){if(null===this._label)return null;var e=X.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case X.BOUNDARY:n=X.INTERIOR;break;case X.INTERIOR:default:n=X.BOUNDARY}this._label.setLocation(t,n)}}],[{key:\"constructor_\",value:function(){this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new we(0,X.NONE)}}]),s}(),Pe=function(e){r(i,te);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return i}();function Ce(t){return null==t?0:t.color}function Te(t){return null==t?null:t.parent}function Oe(t,e){null!==t&&(t.color=e)}function Re(t){return null==t?null:t.left}function Ae(t){return null==t?null:t.right}var De=function(e){r(o,Pe);var i=h(o);function o(){var e;return t(this,o),(e=i.call(this)).root_=null,e.size_=0,e}return n(o,[{key:\"get\",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}},{key:\"put\",value:function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null}},{key:\"fixAfterInsertion\",value:function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)Te(t)===Re(Te(Te(t)))?1===Ce(e=Ae(Te(Te(t))))?(Oe(Te(t),0),Oe(e,0),Oe(Te(Te(t)),1),t=Te(Te(t))):(t===Ae(Te(t))&&(t=Te(t),this.rotateLeft(t)),Oe(Te(t),0),Oe(Te(Te(t)),1),this.rotateRight(Te(Te(t)))):1===Ce(e=Re(Te(Te(t))))?(Oe(Te(t),0),Oe(e,0),Oe(Te(Te(t)),1),t=Te(Te(t))):(t===Re(Te(t))&&(t=Te(t),this.rotateRight(t)),Oe(Te(t),0),Oe(Te(Te(t)),1),this.rotateLeft(Te(Te(t))));this.root_.color=0}},{key:\"values\",value:function(){var t=new pt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=o.successor(e));)t.add(e.value);return t}},{key:\"entrySet\",value:function(){var t=new J,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=o.successor(e));)t.add(e);return t}},{key:\"rotateLeft\",value:function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}},{key:\"rotateRight\",value:function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}},{key:\"getFirstEntry\",value:function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}},{key:\"size\",value:function(){return this.size_}},{key:\"containsKey\",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}],[{key:\"successor\",value:function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e}}]),o}(),Fe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"find\",value:function(t){return this.nodeMap.get(t)}},{key:\"addNode\",value:function(){if(arguments[0]instanceof B){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Le){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}}},{key:\"print\",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:\"iterator\",value:function(){return this.nodeMap.values().iterator()}},{key:\"values\",value:function(){return this.nodeMap.values()}},{key:\"getBoundaryNodes\",value:function(t){for(var e=new pt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===X.BOUNDARY&&e.add(r)}return e}},{key:\"add\",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}}],[{key:\"constructor_\",value:function(){this.nodeMap=new De,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}}]),e}(),qe=function(){function e(){t(this,e)}return n(e,null,[{key:\"isNorthern\",value:function(t){return t===e.NE||t===e.NW}},{key:\"isOpposite\",value:function(t,e){return t!==e&&2==(t-e+4)%4}},{key:\"commonHalfPlane\",value:function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:\"isInHalfPlane\",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:\"quadrant\",value:function(){if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new _(\"Cannot compute the quadrant for point ( \"+t+\", \"+n+\" )\");return t>=0?n>=0?e.NE:e.SE:n>=0?e.NW:e.SW}if(arguments[0]instanceof B&&arguments[1]instanceof B){var r=arguments[0],i=arguments[1];if(i.x===r.x&&i.y===r.y)throw new _(\"Cannot compute the quadrant for two identical points \"+r);return i.x>=r.x?i.y>=r.y?e.NE:e.SE:i.y>=r.y?e.NW:e.SW}}}]),e}();qe.NE=0,qe.NW=1,qe.SW=2,qe.SE=3;var Ve=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"compareDirection\",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ht.index(t._p0,t._p1,this._p1)}},{key:\"getDy\",value:function(){return this._dy}},{key:\"getCoordinate\",value:function(){return this._p0}},{key:\"setNode\",value:function(t){this._node=t}},{key:\"print\",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf(\".\"),i=n.substring(r+1);t.print(\"  \"+i+\": \"+this._p0+\" - \"+this._p1+\" \"+this._quadrant+\":\"+e+\"   \"+this._label)}},{key:\"compareTo\",value:function(t){var e=t;return this.compareDirection(e)}},{key:\"getDirectedCoordinate\",value:function(){return this._p1}},{key:\"getDx\",value:function(){return this._dx}},{key:\"getLabel\",value:function(){return this._label}},{key:\"getEdge\",value:function(){return this._edge}},{key:\"getQuadrant\",value:function(){return this._quadrant}},{key:\"getNode\",value:function(){return this._node}},{key:\"toString\",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(\".\");return\"  \"+e.substring(n+1)+\": \"+this._p0+\" - \"+this._p1+\" \"+this._quadrant+\":\"+t+\"   \"+this._label}},{key:\"computeLabel\",value:function(t){}},{key:\"init\",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=qe.quadrant(this._dx,this._dy),F.isTrue(!(0===this._dx&&0===this._dy),\"EdgeEnd with identical endpoints found\")}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];e.constructor_.call(this,n,r,i,null)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];e.constructor_.call(this,o),this.init(s,a),this._label=u}}}]),e}(),Ge=function(e){r(s,Ve);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"getNextMin\",value:function(){return this._nextMin}},{key:\"getDepth\",value:function(t){return this._depth[t]}},{key:\"setVisited\",value:function(t){this._isVisited=t}},{key:\"computeDirectedLabel\",value:function(){this._label=new we(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:\"getNext\",value:function(){return this._next}},{key:\"setDepth\",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new ft(\"assigned depths do not match\",this.getCoordinate());this._depth[t]=e}},{key:\"isInteriorAreaEdge\",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Q.LEFT)===X.INTERIOR&&this._label.getLocation(e,Q.RIGHT)===X.INTERIOR||(t=!1);return t}},{key:\"setNextMin\",value:function(t){this._nextMin=t}},{key:\"print\",value:function(t){c(i(s.prototype),\"print\",this).call(this,t),t.print(\" \"+this._depth[Q.LEFT]+\"/\"+this._depth[Q.RIGHT]),t.print(\" (\"+this.getDepthDelta()+\")\"),this._isInResult&&t.print(\" inResult\")}},{key:\"setMinEdgeRing\",value:function(t){this._minEdgeRing=t}},{key:\"isLineEdge\",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,X.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,X.EXTERIOR);return t&&e&&n}},{key:\"setEdgeRing\",value:function(t){this._edgeRing=t}},{key:\"getMinEdgeRing\",value:function(){return this._minEdgeRing}},{key:\"getDepthDelta\",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:\"setInResult\",value:function(t){this._isInResult=t}},{key:\"getSym\",value:function(){return this._sym}},{key:\"isForward\",value:function(){return this._isForward}},{key:\"getEdge\",value:function(){return this._edge}},{key:\"printEdge\",value:function(t){this.print(t),t.print(\" \"),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:\"setSym\",value:function(t){this._sym=t}},{key:\"setVisitedEdge\",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:\"setEdgeDepths\",value:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Q.LEFT&&(r=-1);var i=Q.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)}},{key:\"getEdgeRing\",value:function(){return this._edgeRing}},{key:\"isInResult\",value:function(){return this._isInResult}},{key:\"setNext\",value:function(t){this._next=t}},{key:\"isVisited\",value:function(){return this._isVisited}}],[{key:\"constructor_\",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(Ve.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:\"depthFactor\",value:function(t,e){return t===X.EXTERIOR&&e===X.INTERIOR?1:t===X.INTERIOR&&e===X.EXTERIOR?-1:0}}]),s}(),Be=function(){function e(){t(this,e)}return n(e,[{key:\"createNode\",value:function(t){return new Le(t,null)}}]),e}(),Ye=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"printEdges\",value:function(t){t.println(\"Edges:\");for(var e=0;e<this._edges.size();e++){t.println(\"edge \"+e+\":\");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}},{key:\"find\",value:function(t){return this._nodes.find(t)}},{key:\"addNode\",value:function(){if(arguments[0]instanceof Le){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof B){var e=arguments[0];return this._nodes.addNode(e)}}},{key:\"getNodeIterator\",value:function(){return this._nodes.iterator()}},{key:\"linkResultDirectedEdges\",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:\"debugPrintln\",value:function(t){mt.out.println(t)}},{key:\"isBoundaryNode\",value:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===X.BOUNDARY}},{key:\"linkAllDirectedEdges\",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:\"matchInSameDirection\",value:function(t,e,n,r){return!!t.equals(n)&&ht.index(t,e,r)===ht.COLLINEAR&&qe.quadrant(t,e)===qe.quadrant(n,r)}},{key:\"getEdgeEnds\",value:function(){return this._edgeEndList}},{key:\"debugPrint\",value:function(t){mt.out.print(t)}},{key:\"getEdgeIterator\",value:function(){return this._edges.iterator()}},{key:\"findEdgeInSameDirection\",value:function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null}},{key:\"insertEdge\",value:function(t){this._edges.add(t)}},{key:\"findEdgeEnd\",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}},{key:\"addEdges\",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ge(n,!0),i=new Ge(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}}},{key:\"add\",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:\"getNodes\",value:function(){return this._nodes.values()}},{key:\"findEdge\",value:function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null}}],[{key:\"constructor_\",value:function(){if(this._edges=new pt,this._nodes=null,this._edgeEndList=new pt,0===arguments.length)this._nodes=new Fe(new Be);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}}},{key:\"linkResultDirectedEdges\",value:function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}]),e}(),ze=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"sortShellsAndHoles\",value:function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}}},{key:\"computePolygons\",value:function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e}},{key:\"placeFreeHoles\",value:function(t,n){for(var r=n.iterator();r.hasNext();){var i=r.next();if(null===i.getShell()){var o=e.findEdgeRingContaining(i,t);if(null===o)throw new ft(\"unable to assign hole to a shell\",i.getCoordinate(0));i.setShell(o)}}}},{key:\"buildMinimalEdgeRings\",value:function(t,e,n){for(var r=new pt,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r}},{key:\"buildMaximalEdgeRings\",value:function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Se(r,this._geometryFactory);e.add(i),i.setInResult()}}return e}},{key:\"placePolygonHoles\",value:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}}},{key:\"getPolygons\",value:function(){return this.computePolygons(this._shellList)}},{key:\"findShell\",value:function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return F.isTrue(e<=1,\"found two shells in MinimalEdgeRing list\"),n}},{key:\"add\",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ye.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new pt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}}}],[{key:\"constructor_\",value:function(){this._geometryFactory=null,this._shellList=new pt;var t=arguments[0];this._geometryFactory=t}},{key:\"findEdgeRingContaining\",value:function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();if(!h.equals(r)&&h.contains(r)){i=Zt.ptNotInList(n.getCoordinates(),l.getCoordinates());var c=!1;ke.isInRing(i,l.getCoordinates())&&(c=!0),c&&(null===o||s.contains(h))&&(s=(o=u).getLinearRing().getEnvelopeInternal())}}return o}}]),e}(),je=function(){function e(){t(this,e)}return n(e,[{key:\"getBounds\",value:function(){}}]),e}(),Xe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getItem\",value:function(){return this._item}},{key:\"getBounds\",value:function(){return this._bounds}},{key:\"interfaces_\",get:function(){return[je,b]}}],[{key:\"constructor_\",value:function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}}]),e}(),Ue=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"poll\",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:\"size\",value:function(){return this._size}},{key:\"reorder\",value:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}},{key:\"clear\",value:function(){this._size=0,this._items.clear()}},{key:\"peek\",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:\"isEmpty\",value:function(){return 0===this._size}},{key:\"add\",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}],[{key:\"constructor_\",value:function(){this._size=null,this._items=null,this._size=0,this._items=new pt,this._items.add(null)}}]),e}(),Ze=function(){function e(){t(this,e)}return n(e,[{key:\"insert\",value:function(t,e){}},{key:\"remove\",value:function(t,e){}},{key:\"query\",value:function(){}}]),e}(),He=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getLevel\",value:function(){return this._level}},{key:\"size\",value:function(){return this._childBoundables.size()}},{key:\"getChildBoundables\",value:function(){return this._childBoundables}},{key:\"addChildBoundable\",value:function(t){F.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:\"isEmpty\",value:function(){return this._childBoundables.isEmpty()}},{key:\"getBounds\",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:\"interfaces_\",get:function(){return[je,b]}}],[{key:\"constructor_\",value:function(){if(this._childBoundables=new pt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}}}]),e}(),We={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return We.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?Ot.sort(n,e):Ot.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},singletonList:function(t){var e=new pt;return e.add(t),e}},Je=function(){function e(){t(this,e)}return n(e,null,[{key:\"maxDistance\",value:function(t,n,r,i,o,s,a,u){var l=e.distance(t,n,o,s);return l=Math.max(l,e.distance(t,n,a,u)),l=Math.max(l,e.distance(r,i,o,s)),Math.max(l,e.distance(r,i,a,u))}},{key:\"distance\",value:function(t,e,n,r){var i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}},{key:\"maximumDistance\",value:function(t,n){var r=Math.min(t.getMinX(),n.getMinX()),i=Math.min(t.getMinY(),n.getMinY()),o=Math.max(t.getMaxX(),n.getMaxX()),s=Math.max(t.getMaxY(),n.getMaxY());return e.distance(r,i,o,s)}},{key:\"minMaxDistance\",value:function(t,n){var r=t.getMinX(),i=t.getMinY(),o=t.getMaxX(),s=t.getMaxY(),a=n.getMinX(),u=n.getMinY(),l=n.getMaxX(),h=n.getMaxY(),c=e.maxDistance(r,i,r,s,a,u,a,h);return c=Math.min(c,e.maxDistance(r,i,r,s,a,u,l,u)),c=Math.min(c,e.maxDistance(r,i,r,s,l,h,a,h)),c=Math.min(c,e.maxDistance(r,i,r,s,l,h,l,u)),c=Math.min(c,e.maxDistance(r,i,o,i,a,u,a,h)),c=Math.min(c,e.maxDistance(r,i,o,i,a,u,l,u)),c=Math.min(c,e.maxDistance(r,i,o,i,l,h,a,h)),c=Math.min(c,e.maxDistance(r,i,o,i,l,h,l,u)),c=Math.min(c,e.maxDistance(o,s,r,s,a,u,a,h)),c=Math.min(c,e.maxDistance(o,s,r,s,a,u,l,u)),c=Math.min(c,e.maxDistance(o,s,r,s,l,h,a,h)),c=Math.min(c,e.maxDistance(o,s,r,s,l,h,l,u)),c=Math.min(c,e.maxDistance(o,s,o,i,a,u,a,h)),c=Math.min(c,e.maxDistance(o,s,o,i,a,u,l,u)),c=Math.min(c,e.maxDistance(o,s,o,i,l,h,a,h)),Math.min(c,e.maxDistance(o,s,o,i,l,h,l,u))}}]),e}(),Ke=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"maximumDistance\",value:function(){return Je.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:\"expandToQueue\",value:function(t,n){var r=e.isComposite(this._boundable1),i=e.isComposite(this._boundable2);if(r&&i)return e.area(this._boundable1)>e.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,n),null):(this.expand(this._boundable2,this._boundable1,!0,t,n),null);if(r)return this.expand(this._boundable1,this._boundable2,!1,t,n),null;if(i)return this.expand(this._boundable2,this._boundable1,!0,t,n),null;throw new _(\"neither boundable is composite\")}},{key:\"isLeaves\",value:function(){return!(e.isComposite(this._boundable1)||e.isComposite(this._boundable2))}},{key:\"compareTo\",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:\"expand\",value:function(t,n,r,i,o){for(var s=t.getChildBoundables().iterator();s.hasNext();){var a=s.next(),u=null;(u=r?new e(n,a,this._itemDistance):new e(a,n,this._itemDistance)).getDistance()<o&&i.add(u)}}},{key:\"getBoundable\",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:\"getDistance\",value:function(){return this._distance}},{key:\"distance\",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:\"area\",value:function(t){return t.getBounds().getArea()}},{key:\"isComposite\",value:function(t){return t instanceof He}}]),e}(),Qe=function(){function e(){t(this,e)}return n(e,[{key:\"visitItem\",value:function(t){}}]),e}(),$e=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"queryInternal\",value:function(){if(rt(arguments[2],Qe)&&arguments[0]instanceof Object&&arguments[1]instanceof He)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),r=0;r<n.size();r++){var i=n.get(r);this.getIntersectsOp().intersects(i.getBounds(),t)&&(i instanceof He?this.queryInternal(t,i,e):i instanceof Xe?e.visitItem(i.getItem()):F.shouldNeverReachHere())}else if(rt(arguments[2],et)&&arguments[0]instanceof Object&&arguments[1]instanceof He)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof He?this.queryInternal(o,l,s):l instanceof Xe?s.add(l.getItem()):F.shouldNeverReachHere())}}},{key:\"getNodeCapacity\",value:function(){return this._nodeCapacity}},{key:\"lastNode\",value:function(t){return t.get(t.size()-1)}},{key:\"size\",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof He?t+=this.size(n):n instanceof Xe&&(t+=1)}return t}}},{key:\"removeItem\",value:function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Xe&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:\"itemsTree\",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new pt:t}if(1===arguments.length){for(var e=arguments[0],n=new pt,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof He){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Xe?n.add(i.getItem()):F.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:\"insert\",value:function(t,e){F.isTrue(!this._built,\"Cannot insert items into an STR packed R-tree after it has been built.\"),this._itemBoundables.add(new Xe(t,e))}},{key:\"boundablesAtLevel\",value:function(){if(1===arguments.length){var t=arguments[0],e=new pt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(F.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof He?this.boundablesAtLevel(n,s,i):(F.isTrue(s instanceof Xe),-1===n&&i.add(s))}return null}}},{key:\"query\",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new pt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,r)}}},{key:\"build\",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:\"getRoot\",value:function(){return this.build(),this._root}},{key:\"remove\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof He&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}}},{key:\"createHigherLevels\",value:function(t,e){F.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:\"depth\",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof He){var r=this.depth(n);r>t&&(t=r)}}return t+1}}},{key:\"createParentBoundables\",value:function(t,e){F.isTrue(!t.isEmpty());var n=new pt;n.add(this.createNode(e));var r=new pt(t);We.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n}},{key:\"isEmpty\",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:\"interfaces_\",get:function(){return[b]}}],[{key:\"constructor_\",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new pt,this._nodeCapacity=null,0===arguments.length)e.constructor_.call(this,e.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];F.isTrue(t>1,\"Node capacity must be greater than 1\"),this._nodeCapacity=t}}},{key:\"compareDoubles\",value:function(t,e){return t>e?1:t<e?-1:0}}]),e}();$e.IntersectsOp=function(){},$e.DEFAULT_NODE_CAPACITY=10;var tn=function(){function e(){t(this,e)}return n(e,[{key:\"distance\",value:function(t,e){}}]),e}(),en=function(e){r(s,$e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"createParentBoundablesFromVerticalSlices\",value:function(t,e){F.isTrue(t.length>0);for(var n=new pt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n}},{key:\"nearestNeighbourK\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,O.POSITIVE_INFINITY,e)}if(3===arguments.length){var n=arguments[0],r=arguments[2],i=arguments[1],o=new Ue;o.add(n);for(var a=new Ue;!o.isEmpty()&&i>=0;){var u=o.poll(),l=u.getDistance();if(l>=i)break;u.isLeaves()?a.size()<r?a.add(u):(a.peek().getDistance()>l&&(a.poll(),a.add(u)),i=a.peek().getDistance()):u.expandToQueue(o,i)}return s.getItems(a)}}},{key:\"createNode\",value:function(t){return new nn(t)}},{key:\"size\",value:function(){return 0===arguments.length?c(i(s.prototype),\"size\",this).call(this):c(i(s.prototype),\"size\",this).apply(this,arguments)}},{key:\"insert\",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof z))return c(i(s.prototype),\"insert\",this).apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;c(i(s.prototype),\"insert\",this).call(this,t,e)}},{key:\"getIntersectsOp\",value:function(){return s.intersectsOp}},{key:\"verticalSlices\",value:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new pt;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r}},{key:\"query\",value:function(){if(1===arguments.length){var t=arguments[0];return c(i(s.prototype),\"query\",this).call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];c(i(s.prototype),\"query\",this).call(this,e,n)}}},{key:\"getComparator\",value:function(){return s.yComparator}},{key:\"createParentBoundablesFromVerticalSlice\",value:function(t,e){return c(i(s.prototype),\"createParentBoundables\",this).call(this,t,e)}},{key:\"remove\",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof z){var t=arguments[0],e=arguments[1];return c(i(s.prototype),\"remove\",this).call(this,t,e)}return c(i(s.prototype),\"remove\",this).apply(this,arguments)}},{key:\"depth\",value:function(){return 0===arguments.length?c(i(s.prototype),\"depth\",this).call(this):c(i(s.prototype),\"depth\",this).apply(this,arguments)}},{key:\"createParentBoundables\",value:function(t,e){F.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new pt(t);We.sort(r,s.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,e)}},{key:\"nearestNeighbour\",value:function(){if(1===arguments.length){if(rt(arguments[0],tn)){var t=arguments[0];if(this.isEmpty())return null;var e=new Ke(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ke){var n=arguments[0],r=O.POSITIVE_INFINITY,i=null,o=new Ue;for(o.add(n);!o.isEmpty()&&r>0;){var s=o.poll(),a=s.getDistance();if(a>=r)break;s.isLeaves()?(r=a,i=s):s.expandToQueue(o,r)}return null===i?null:[i.getBoundable(0).getItem(),i.getBoundable(1).getItem()]}}else{if(2===arguments.length){var u=arguments[0],l=arguments[1];if(this.isEmpty()||u.isEmpty())return null;var h=new Ke(this.getRoot(),u.getRoot(),l);return this.nearestNeighbour(h)}if(3===arguments.length){var c=arguments[2],f=new Xe(arguments[0],arguments[1]),g=new Ke(this.getRoot(),f,c);return this.nearestNeighbour(g)[0]}if(4===arguments.length){var p=arguments[2],v=arguments[3],d=new Xe(arguments[0],arguments[1]),y=new Ke(this.getRoot(),d,p);return this.nearestNeighbourK(y,v)}}}},{key:\"isWithinDistance\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=O.POSITIVE_INFINITY,r=new Ue;for(r.add(t);!r.isEmpty();){var i=r.poll(),o=i.getDistance();if(o>e)return!1;if(i.maximumDistance()<=e)return!0;if(i.isLeaves()){if((n=o)<=e)return!0}else i.expandToQueue(r,n)}return!1}if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2],l=new Ke(this.getRoot(),s.getRoot(),a);return this.isWithinDistance(l,u)}}},{key:\"interfaces_\",get:function(){return[Ze,b]}}],[{key:\"constructor_\",value:function(){if(0===arguments.length)s.constructor_.call(this,s.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];$e.constructor_.call(this,t)}}},{key:\"centreX\",value:function(t){return s.avg(t.getMinX(),t.getMaxX())}},{key:\"avg\",value:function(t,e){return(t+e)/2}},{key:\"getItems\",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;!t.isEmpty();){var r=t.poll();e[n]=r.getBoundable(0).getItem(),n++}return e}},{key:\"centreY\",value:function(t){return s.avg(t.getMinY(),t.getMaxY())}}]),s}(),nn=function(e){r(o,He);var i=h(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:\"computeBounds\",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new z(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}],[{key:\"constructor_\",value:function(){var t=arguments[0];He.constructor_.call(this,t)}}]),o}();en.STRtreeNode=nn,en.xComparator=new(function(){function e(){t(this,e)}return n(e,[{key:\"interfaces_\",get:function(){return[R]}},{key:\"compare\",value:function(t,e){return $e.compareDoubles(en.centreX(t.getBounds()),en.centreX(e.getBounds()))}}]),e}()),en.yComparator=new(function(){function e(){t(this,e)}return n(e,[{key:\"interfaces_\",get:function(){return[R]}},{key:\"compare\",value:function(t,e){return $e.compareDoubles(en.centreY(t.getBounds()),en.centreY(e.getBounds()))}}]),e}()),en.intersectsOp=new(function(){function e(){t(this,e)}return n(e,[{key:\"interfaces_\",get:function(){return[IntersectsOp]}},{key:\"intersects\",value:function(t,e){return t.intersects(e)}}]),e}()),en.DEFAULT_NODE_CAPACITY=10;var rn=function(){function e(){t(this,e)}return n(e,null,[{key:\"relativeSign\",value:function(t,e){return t<e?-1:t>e?1:0}},{key:\"compare\",value:function(t,n,r){if(n.equals2D(r))return 0;var i=e.relativeSign(n.x,r.x),o=e.relativeSign(n.y,r.y);switch(t){case 0:return e.compareValue(i,o);case 1:return e.compareValue(o,i);case 2:return e.compareValue(o,-i);case 3:return e.compareValue(-i,o);case 4:return e.compareValue(-i,-o);case 5:return e.compareValue(-o,-i);case 6:return e.compareValue(-o,i);case 7:return e.compareValue(i,-o)}return F.shouldNeverReachHere(\"invalid octant value\"),0}},{key:\"compareValue\",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}]),e}(),on=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getCoordinate\",value:function(){return this.coord}},{key:\"print\",value:function(t){t.print(this.coord),t.print(\" seg # = \"+this.segmentIndex)}},{key:\"compareTo\",value:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?rn.compare(this._segmentOctant,this.coord,e.coord):1:-1}},{key:\"isEndPoint\",value:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}},{key:\"toString\",value:function(){return this.segmentIndex+\":\"+this.coord.toString()}},{key:\"isInterior\",value:function(){return this._isInterior}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new B(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}}]),e}(),sn=function(){function e(){t(this,e)}return n(e,[{key:\"hasNext\",value:function(){}},{key:\"next\",value:function(){}},{key:\"remove\",value:function(){}}]),e}(),an=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getSplitCoordinates\",value:function(){var t=new Ut;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()}},{key:\"addCollapsedNodes\",value:function(){var t=new pt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:\"createSplitEdgePts\",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2;if(2===n)return[new B(t.coord),new B(e.coord)];var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new B(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new B(e.coord)),o}},{key:\"print\",value:function(t){t.println(\"Intersections:\");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:\"findCollapsesFromExistingVertices\",value:function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);var r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(ot.valueOf(e+1))}}},{key:\"addEdgeCoordinates\",value:function(t,e,n){var r=this.createSplitEdgePts(t,e);n.add(r,!1)}},{key:\"iterator\",value:function(){return this._nodeMap.values().iterator()}},{key:\"addSplitEdges\",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}}},{key:\"findCollapseIndex\",value:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)}},{key:\"findCollapsesFromInsertedNodes\",value:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(ot.valueOf(e[0])),r=i}}},{key:\"getEdge\",value:function(){return this._edge}},{key:\"addEndpoints\",value:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}},{key:\"createSplitEdge\",value:function(t,e){var n=this.createSplitEdgePts(t,e);return new cn(n,this._edge.getData())}},{key:\"add\",value:function(t,e){var n=new on(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(F.isTrue(r.coord.equals2D(t),\"Found equal nodes with different coordinates\"),r):(this._nodeMap.put(n,n),n)}},{key:\"checkSplitEdgesCorrectness\",value:function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new A(\"bad split edge start point at \"+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new A(\"bad split edge end point at \"+i)}}],[{key:\"constructor_\",value:function(){this._nodeMap=new De,this._edge=null;var t=arguments[0];this._edge=t}}]),e}(),un=function(){function e(){t(this,e)}return n(e,null,[{key:\"octant\",value:function(){if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new _(\"Cannot compute the octant for point ( \"+t+\", \"+n+\" )\");var r=Math.abs(t),i=Math.abs(n);return t>=0?n>=0?r>=i?0:1:r>=i?7:6:n>=0?r>=i?3:2:r>=i?4:5}if(arguments[0]instanceof B&&arguments[1]instanceof B){var o=arguments[0],s=arguments[1],a=s.x-o.x,u=s.y-o.y;if(0===a&&0===u)throw new _(\"Cannot compute the octant for two identical points \"+o);return e.octant(a,u)}}}]),e}(),ln=function(){function e(){t(this,e)}return n(e,[{key:\"getCoordinates\",value:function(){}},{key:\"size\",value:function(){}},{key:\"getCoordinate\",value:function(t){}},{key:\"isClosed\",value:function(){}},{key:\"setData\",value:function(t){}},{key:\"getData\",value:function(){}}]),e}(),hn=function(){function e(){t(this,e)}return n(e,[{key:\"addIntersection\",value:function(t,e){}},{key:\"interfaces_\",get:function(){return[ln]}}]),e}(),cn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getCoordinates\",value:function(){return this._pts}},{key:\"size\",value:function(){return this._pts.length}},{key:\"getCoordinate\",value:function(t){return this._pts[t]}},{key:\"isClosed\",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:\"getSegmentOctant\",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:\"setData\",value:function(t){this._data=t}},{key:\"safeOctant\",value:function(t,e){return t.equals2D(e)?0:un.octant(t,e)}},{key:\"getData\",value:function(){return this._data}},{key:\"addIntersection\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new B(arguments[0].getIntersection(r));this.addIntersection(i,n)}}},{key:\"toString\",value:function(){return me.toLineString(new Kt(this._pts))}},{key:\"getNodeList\",value:function(){return this._nodeList}},{key:\"addIntersectionNode\",value:function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)}},{key:\"addIntersections\",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)}},{key:\"interfaces_\",get:function(){return[hn]}}],[{key:\"constructor_\",value:function(){this._nodeList=new an(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:\"getNodedSubstrings\",value:function(){if(1===arguments.length){var t=arguments[0],n=new pt;return e.getNodedSubstrings(t,n),n}if(2===arguments.length)for(var r=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)}}]),e}(),fn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"minX\",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:\"orientationIndex\",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=ht.index(this.p0,this.p1,t.p0),r=ht.index(this.p0,this.p1,t.p1);return n>=0&&r>=0||n<=0&&r<=0?Math.max(n,r):0}if(arguments[0]instanceof B){var i=arguments[0];return ht.index(this.p0,this.p1,i)}}},{key:\"toGeometry\",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:\"isVertical\",value:function(){return this.p0.x===this.p1.x}},{key:\"equals\",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:\"intersection\",value:function(t){var e=new xe;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:\"project\",value:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new B(t);var n=this.projectionFactor(t),r=new B;return r.x=this.p0.x+n*(this.p1.x-this.p0.x),r.y=this.p0.y+n*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof e){var i=arguments[0],o=this.projectionFactor(i.p0),s=this.projectionFactor(i.p1);if(o>=1&&s>=1)return null;if(o<=0&&s<=0)return null;var a=this.project(i.p0);o<0&&(a=this.p0),o>1&&(a=this.p1);var u=this.project(i.p1);return s<0&&(u=this.p0),s>1&&(u=this.p1),new e(a,u)}}},{key:\"normalize\",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:\"angle\",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:\"getCoordinate\",value:function(t){return 0===t?this.p0:this.p1}},{key:\"distancePerpendicular\",value:function(t){return xt.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:\"minY\",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:\"midPoint\",value:function(){return e.midPoint(this.p0,this.p1)}},{key:\"projectionFactor\",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?O.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r}},{key:\"closestPoints\",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=O.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n}},{key:\"closestPoint\",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:\"maxX\",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:\"getLength\",value:function(){return this.p0.distance(this.p1)}},{key:\"compareTo\",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:\"reverse\",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:\"equalsTopo\",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:\"lineIntersection\",value:function(t){return yt.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:\"maxY\",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:\"pointAlongOffset\",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new IllegalStateException(\"Cannot compute offset from zero-length line segment\");a=e*i/s,u=e*o/s}return new B(n-u,r+a)}},{key:\"setCoordinates\",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:\"segmentFraction\",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||O.isNaN(e))&&(e=1),e}},{key:\"toString\",value:function(){return\"LINESTRING( \"+this.p0.x+\" \"+this.p0.y+\", \"+this.p1.x+\" \"+this.p1.y+\")\"}},{key:\"isHorizontal\",value:function(){return this.p0.y===this.p1.y}},{key:\"reflect\",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),r=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),i=e*e+n*n,o=e*e-n*n,s=t.getX(),a=t.getY();return new B((-o*s-2*e*n*a-2*e*r)/i,(o*a-2*e*n*s-2*n*r)/i)}},{key:\"distance\",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return xt.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof B){var n=arguments[0];return xt.pointToSegment(n,this.p0,this.p1)}}},{key:\"pointAlong\",value:function(t){var e=new B;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:\"hashCode\",value:function(){var t=O.doubleToLongBits(this.p0.x);t^=31*O.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=O.doubleToLongBits(this.p1.x);return n^=31*O.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}},{key:\"interfaces_\",get:function(){return[E,b]}}],[{key:\"constructor_\",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)e.constructor_.call(this,new B,new B);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.p0=n,this.p1=r}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];e.constructor_.call(this,new B(i,o),new B(s,a))}}},{key:\"midPoint\",value:function(t,e){return new B((t.x+e.x)/2,(t.y+e.y)/2)}}]),e}(),gn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"overlap\",value:function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:\"constructor_\",value:function(){this._overlapSeg1=new fn,this._overlapSeg2=new fn}}]),e}(),pn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getLineSegment\",value:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}},{key:\"computeSelect\",value:function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(n-e==1)return r.select(this,e),null;if(!t.intersects(i,o))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)}},{key:\"getCoordinates\",value:function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t}},{key:\"computeOverlaps\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5];if(r-n==1&&s-o==1)return a.overlap(this,n,i,o),null;if(!this.overlaps(n,r,i,o,s))return null;var u=Math.trunc((n+r)/2),l=Math.trunc((o+s)/2);n<u&&(o<l&&this.computeOverlaps(n,u,i,o,l,a),l<s&&this.computeOverlaps(n,u,i,l,s,a)),u<r&&(o<l&&this.computeOverlaps(u,r,i,o,l,a),l<s&&this.computeOverlaps(u,r,i,l,s,a))}}},{key:\"setId\",value:function(t){this._id=t}},{key:\"select\",value:function(t,e){this.computeSelect(t,this._start,this._end,e)}},{key:\"getEnvelope\",value:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new z(t,e)}return this._env}},{key:\"overlaps\",value:function(t,e,n,r,i){return z.intersects(this._pts[t],this._pts[e],n._pts[r],n._pts[i])}},{key:\"getEndIndex\",value:function(){return this._end}},{key:\"getStartIndex\",value:function(){return this._start}},{key:\"getContext\",value:function(){return this._context}},{key:\"getId\",value:function(){return this._id}}],[{key:\"constructor_\",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r}}]),e}(),vn=function(){function e(){t(this,e)}return n(e,null,[{key:\"findChainEnd\",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=qe.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||qe.quadrant(t[i-1],t[i])===r);)i++;return i-1}},{key:\"getChains\",value:function(){if(1===arguments.length){var t=arguments[0];return e.getChains(t,null)}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new pt,o=0;do{var s=e.findChainEnd(n,o),a=new pn(n,o,s,r);i.add(a),o=s}while(o<n.length-1);return i}}}]),e}(),dn=function(){function e(){t(this,e)}return n(e,[{key:\"computeNodes\",value:function(t){}},{key:\"getNodedSubstrings\",value:function(){}}]),e}(),yn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"setSegmentIntersector\",value:function(t){this._segInt=t}},{key:\"interfaces_\",get:function(){return[dn]}}],[{key:\"constructor_\",value:function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}}]),e}(),mn=function(e){r(o,yn);var i=h(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:\"getMonotoneChains\",value:function(){return this._monoChains}},{key:\"getNodedSubstrings\",value:function(){return cn.getNodedSubstrings(this._nodedSegStrings)}},{key:\"getIndex\",value:function(){return this._index}},{key:\"add\",value:function(t){for(var e=vn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:\"computeNodes\",value:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}},{key:\"intersectChains\",value:function(){for(var t=new _n(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:\"constructor_\",value:function(){if(this._monoChains=new pt,this._index=new en,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];yn.constructor_.call(this,t)}}}]),o}(),_n=function(e){r(s,gn);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"overlap\",value:function(){if(4!==arguments.length)return c(i(s.prototype),\"overlap\",this).apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],r=arguments[0].getContext(),o=e.getContext();this._si.processIntersections(r,t,o,n)}}],[{key:\"constructor_\",value:function(){this._si=null;var t=arguments[0];this._si=t}}]),s}();mn.SegmentOverlapAction=_n;var xn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"isDeletable\",value:function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)}},{key:\"deleteShallowConcavities\",value:function(){for(var t=1,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;this.isDeletable(t,n,r,this._distanceTol)&&(this._isDeleted[n]=e.DELETE,o=!0,i=!0),t=o?r:n,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n)}return i}},{key:\"isShallowConcavity\",value:function(t,e,n,r){return ht.index(t,e,n)===this._angleOrientation&&xt.pointToSegment(e,t,n)<r}},{key:\"isShallowSampled\",value:function(t,n,r,i,o){var s=Math.trunc((i-r)/e.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var a=r;a<i;a+=s)if(!this.isShallow(t,n,this._inputLine[a],o))return!1;return!0}},{key:\"isConcave\",value:function(t,e,n){return ht.index(t,e,n)===this._angleOrientation}},{key:\"simplify\",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ht.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}},{key:\"findNextNonDeletedIndex\",value:function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===e.DELETE;)n++;return n}},{key:\"isShallow\",value:function(t,e,n,r){return xt.pointToSegment(e,t,n)<r}},{key:\"collapseLine\",value:function(){for(var t=new Ut,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==e.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()}}],[{key:\"constructor_\",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ht.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:\"simplify\",value:function(t,n){return new e(t).simplify(n)}}]),e}();xn.INIT=0,xn.DELETE=1,xn.KEEP=1,xn.NUM_PTS_TO_CHECK=10;var En=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getCoordinates\",value:function(){return this._ptList.toArray(e.COORDINATE_ARRAY_TYPE)}},{key:\"setPrecisionModel\",value:function(t){this._precisionModel=t}},{key:\"addPt\",value:function(t){var e=new B(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:\"reverse\",value:function(){}},{key:\"addPts\",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])}},{key:\"isRedundant\",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:\"toString\",value:function(){return(new oe).createLineString(this.getCoordinates()).toString()}},{key:\"closeRing\",value:function(){if(this._ptList.size()<1)return null;var t=new B(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:\"setMinimumVertexDistance\",value:function(t){this._minimimVertexDistance=t}}],[{key:\"constructor_\",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new pt}}]),e}();En.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var kn=function(){function e(){t(this,e)}return n(e,null,[{key:\"toDegrees\",value:function(t){return 180*t/Math.PI}},{key:\"normalize\",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:\"angle\",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}}},{key:\"isAcute\",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0}},{key:\"isObtuse\",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0}},{key:\"interiorAngle\",value:function(t,n,r){var i=e.angle(n,t),o=e.angle(n,r);return Math.abs(o-i)}},{key:\"normalizePositive\",value:function(t){if(t<0){for(;t<0;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;t<0&&(t=0)}return t}},{key:\"angleBetween\",value:function(t,n,r){var i=e.angle(n,t),o=e.angle(n,r);return e.diff(i,o)}},{key:\"diff\",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:\"toRadians\",value:function(t){return t*Math.PI/180}},{key:\"getTurn\",value:function(t,n){var r=Math.sin(n-t);return r>0?e.COUNTERCLOCKWISE:r<0?e.CLOCKWISE:e.NONE}},{key:\"angleBetweenOriented\",value:function(t,n,r){var i=e.angle(n,t),o=e.angle(n,r)-i;return o<=-Math.PI?o+e.PI_TIMES_2:o>Math.PI?o-e.PI_TIMES_2:o}}]),e}();kn.PI_TIMES_2=2*Math.PI,kn.PI_OVER_2=Math.PI/2,kn.PI_OVER_4=Math.PI/4,kn.COUNTERCLOCKWISE=ht.COUNTERCLOCKWISE,kn.CLOCKWISE=ht.CLOCKWISE,kn.NONE=ht.COLLINEAR;var bn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"addNextSegment\",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ht.index(this._s0,this._s1,this._s2),r=n===ht.CLOCKWISE&&this._side===Q.LEFT||n===ht.COUNTERCLOCKWISE&&this._side===Q.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:\"addLineEndCap\",value:function(t,e){var n=new fn(t,e),r=new fn;this.computeOffsetSegment(n,Q.LEFT,this._distance,r);var i=new fn;this.computeOffsetSegment(n,Q.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case d.CAP_ROUND:this._segList.addPt(r.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,ht.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case d.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case d.CAP_SQUARE:var u=new B;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new B(r.p1.x+u.x,r.p1.y+u.y),h=new B(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(h)}}},{key:\"getCoordinates\",value:function(){return this._segList.getCoordinates()}},{key:\"addMitreJoin\",value:function(t,e,n,r){var i=yt.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==i&&(r<=0?1:i.distance(t)/Math.abs(r))<=this._bufParams.getMitreLimit())return this._segList.addPt(i),null;this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())}},{key:\"addOutsideTurn\",value:function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===d.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===d.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:\"createSquare\",value:function(t){this._segList.addPt(new B(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new B(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new B(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new B(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:\"addSegments\",value:function(t,e){this._segList.addPts(t,e)}},{key:\"addFirstSegment\",value:function(){this._segList.addPt(this._offset1.p0)}},{key:\"addCornerFillet\",value:function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,h=Math.atan2(l,u);r===ht.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,h,r,i),this._segList.addPt(n)}},{key:\"addLastSegment\",value:function(){this._segList.addPt(this._offset1.p1)}},{key:\"initSideSegments\",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:\"addLimitedMitreJoin\",value:function(t,e,n,r){var i=this._seg0.p1,o=kn.angle(i,this._seg0.p0),s=kn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=kn.normalize(o+s),u=kn.normalize(a+Math.PI),l=r*n,h=n-l*Math.abs(Math.sin(s)),c=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),g=new B(c,f),p=new fn(i,g),v=p.pointAlongOffset(1,h),d=p.pointAlongOffset(1,-h);this._side===Q.LEFT?(this._segList.addPt(v),this._segList.addPt(d)):(this._segList.addPt(d),this._segList.addPt(v))}},{key:\"addDirectedFillet\",value:function(t,e,n,r,i){var o=r===ht.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=new B,h=0;h<a;h++){var c=e+o*h*u;l.x=t.x+i*Math.cos(c),l.y=t.y+i*Math.sin(c),this._segList.addPt(l)}}},{key:\"computeOffsetSegment\",value:function(t,e,n,r){var i=e===Q.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u}},{key:\"addInsideTurn\",value:function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new B((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var i=new B((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:\"createCircle\",value:function(t){var e=new B(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:\"addBevelJoin\",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:\"init\",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new En,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:\"addCollinear\",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===d.JOIN_BEVEL||this._bufParams.getJoinStyle()===d.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ht.CLOCKWISE,this._distance))}},{key:\"closeRing\",value:function(){this._segList.closeRing()}},{key:\"hasNarrowConcaveAngle\",value:function(){return this._hasNarrowConcaveAngle}}],[{key:\"constructor_\",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new fn,this._seg1=new fn,this._offset0=new fn,this._offset1=new fn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new xe,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===d.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)}}]),e}();bn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,bn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,bn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,bn.MAX_CLOSING_SEG_LEN_FACTOR=80;var wn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getOffsetCurve\",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Zt.reverse(o),o}},{key:\"computeSingleSidedBufferCurve\",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=xn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Q.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=xn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Q.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()}},{key:\"computeRingBufferCurve\",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Q.RIGHT&&(r=-r);var i=xn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()}},{key:\"computeLineBufferCurve\",value:function(t,e){var n=this.simplifyTolerance(this._distance),r=xn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Q.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=xn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Q.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()}},{key:\"computePointCurve\",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case d.CAP_ROUND:e.createCircle(t);break;case d.CAP_SQUARE:e.createSquare(t)}}},{key:\"getLineCurve\",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()}},{key:\"getBufferParameters\",value:function(){return this._bufParams}},{key:\"simplifyTolerance\",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:\"getRingCurve\",value:function(t,n,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return e.copyCoordinates(t);var i=this.getSegGen(r);return this.computeRingBufferCurve(t,n,i),i.getCoordinates()}},{key:\"computeOffsetCurve\",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=xn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Q.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=xn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Q.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()}},{key:\"isLineOffsetEmpty\",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:\"getSegGen\",value:function(t){return new bn(this._precisionModel,this._bufParams,t)}}],[{key:\"constructor_\",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:\"copyCoordinates\",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new B(t[n]);return e}}]),e}(),In=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"findStabbedSegments\",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new pt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(rt(arguments[2],et)&&arguments[0]instanceof B&&arguments[1]instanceof Ge){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||ht.index(this._seg.p0,this._seg.p1,o)===ht.RIGHT)){var h=s.getDepth(Q.LEFT);this._seg.p0.equals(u[l])||(h=s.getDepth(Q.RIGHT));var c=new Nn(this._seg,h);a.add(c)}}else if(rt(arguments[2],et)&&arguments[0]instanceof B&&rt(arguments[1],et))for(var f=arguments[0],g=arguments[2],p=arguments[1].iterator();p.hasNext();){var v=p.next();v.isForward()&&this.findStabbedSegments(f,v,g)}}},{key:\"getDepth\",value:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:We.min(e)._leftDepth}}],[{key:\"constructor_\",value:function(){this._subgraphs=null,this._seg=new fn;var t=arguments[0];this._subgraphs=t}}]),e}(),Nn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"compareTo\",value:function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)}},{key:\"compareX\",value:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)}},{key:\"toString\",value:function(){return this._upwardSeg.toString()}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new fn(t),this._leftDepth=e}}]),e}();In.DepthSegment=Nn;var Sn=function(e){r(o,m);var i=h(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,null,[{key:\"constructor_\",value:function(){m.constructor_.call(this,\"Projective point not representable on the Cartesian plane.\")}}]),o}(),Mn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getY\",value:function(){var t=this.y/this.w;if(O.isNaN(t)||O.isInfinite(t))throw new Sn;return t}},{key:\"getX\",value:function(){var t=this.x/this.w;if(O.isNaN(t)||O.isInfinite(t))throw new Sn;return t}},{key:\"getCoordinate\",value:function(){var t=new B;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:\"constructor_\",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof B&&arguments[1]instanceof B){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2];this.x=u,this.y=l,this.w=h}else if(4===arguments.length){var c=arguments[0],f=arguments[1],g=arguments[2],p=arguments[3],v=c.y-f.y,d=f.x-c.x,y=c.x*f.y-f.x*c.y,m=g.y-p.y,_=p.x-g.x,x=g.x*p.y-p.x*g.y;this.x=d*x-_*y,this.y=m*y-v*x,this.w=v*_-m*d}}}]),e}(),Ln=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"area\",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:\"signedArea\",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:\"interpolateZ\",value:function(t){if(null===t)throw new _(\"Supplied point is null.\");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:\"longestSideLength\",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:\"isAcute\",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:\"circumcentre\",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:\"area3D\",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:\"centroid\",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:\"inCentre\",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}}],[{key:\"constructor_\",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:\"area\",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:\"signedArea\",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:\"det\",value:function(t,e,n,r){return t*r-e*n}},{key:\"interpolateZ\",value:function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,h=s*l-a*u,c=t.x-i,f=t.y-o,g=(l*c-a*f)/h,p=(-u*c+s*f)/h;return e.getZ()+g*(n.getZ()-e.getZ())+p*(r.getZ()-e.getZ())}},{key:\"longestSideLength\",value:function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s}},{key:\"circumcentreDD\",value:function(t,e,n){var r=at.valueOf(t.x).subtract(n.x),i=at.valueOf(t.y).subtract(n.y),o=at.valueOf(e.x).subtract(n.x),s=at.valueOf(e.y).subtract(n.y),a=at.determinant(r,i,o,s).multiply(2),u=r.sqr().add(i.sqr()),l=o.sqr().add(s.sqr()),h=at.determinant(i,u,s,l),c=at.determinant(r,u,o,l),f=at.valueOf(n.x).subtract(h.divide(a)).doubleValue(),g=at.valueOf(n.y).add(c.divide(a)).doubleValue();return new B(f,g)}},{key:\"isAcute\",value:function(t,e,n){return!!kn.isAcute(t,e,n)&&!!kn.isAcute(e,n,t)&&!!kn.isAcute(n,t,e)}},{key:\"circumcentre\",value:function(t,n,r){var i=r.x,o=r.y,s=t.x-i,a=t.y-o,u=n.x-i,l=n.y-o,h=2*e.det(s,a,u,l),c=e.det(a,s*s+a*a,l,u*u+l*l),f=e.det(s,s*s+a*a,u,u*u+l*l);return new B(i-c/h,o+f/h)}},{key:\"perpendicularBisector\",value:function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Mn(t.x+n/2,t.y+r/2,1),o=new Mn(t.x-r+n/2,t.y+n+r/2,1);return new Mn(i,o)}},{key:\"angleBisector\",value:function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new B(t.x+i*o,t.y+i*s)}},{key:\"area3D\",value:function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.getZ()-t.getZ(),s=n.x-t.x,a=n.y-t.y,u=n.getZ()-t.getZ(),l=i*u-o*a,h=o*s-r*u,c=r*a-i*s,f=l*l+h*h+c*c;return Math.sqrt(f)/2}},{key:\"centroid\",value:function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new B(r,i)}},{key:\"inCentre\",value:function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new B(a,u)}}]),e}(),Pn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"addRingSide\",value:function(t,e,n,r,i){if(0===e&&t.length<Bt.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=Bt.MINIMUM_VALID_SIZE&&ht.isCCW(t)&&(o=i,s=r,n=Q.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)}},{key:\"addRingBothSides\",value:function(t,e){this.addRingSide(t,e,Q.LEFT,X.EXTERIOR,X.INTERIOR),this.addRingSide(t,e,Q.RIGHT,X.INTERIOR,X.EXTERIOR)}},{key:\"addPoint\",value:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,X.EXTERIOR,X.INTERIOR)}},{key:\"addPolygon\",value:function(t){var e=this._distance,n=Q.LEFT;this._distance<0&&(e=-this._distance,n=Q.RIGHT);var r=t.getExteriorRing(),i=Zt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addRingSide(i,e,n,X.EXTERIOR,X.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Zt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addRingSide(a,e,Q.opposite(n),X.INTERIOR,X.EXTERIOR)}}},{key:\"isTriangleErodedCompletely\",value:function(t,e){var n=new Ln(t[0],t[1],t[2]),r=n.inCentre();return xt.pointToSegment(r,n.p0,n.p1)<Math.abs(e)}},{key:\"addLineString\",value:function(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var e=Zt.removeRepeatedPoints(t.getCoordinates());if(Zt.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{var n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,X.EXTERIOR,X.INTERIOR)}}},{key:\"addCurve\",value:function(t,e,n){if(null===t||t.length<2)return null;var r=new cn(t,new we(0,X.BOUNDARY,e,n));this._curveList.add(r)}},{key:\"getCurves\",value:function(){return this.add(this._inputGeom),this._curveList}},{key:\"add\",value:function(t){if(t.isEmpty())return null;if(t instanceof At)this.addPolygon(t);else if(t instanceof Lt)this.addLineString(t);else if(t instanceof Ct)this.addPoint(t);else if(t instanceof Gt)this.addCollection(t);else if(t instanceof ie)this.addCollection(t);else if(t instanceof $t)this.addCollection(t);else{if(!(t instanceof Vt))throw new H(t.getGeometryType());this.addCollection(t)}}},{key:\"isErodedCompletely\",value:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i}},{key:\"addCollection\",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}}],[{key:\"constructor_\",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new pt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}}]),e}(),Cn=function(){function e(){t(this,e)}return n(e,[{key:\"locate\",value:function(t){}}]),e}(),Tn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"next\",value:function(){if(this._atStart)return this._atStart=!1,e.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Z;var t=this._parent.getGeometryN(this._index++);return t instanceof Vt?(this._subcollectionIterator=new e(t),this._subcollectionIterator.next()):t}},{key:\"remove\",value:function(){throw new H(this.getClass().getName())}},{key:\"hasNext\",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:\"interfaces_\",get:function(){return[sn]}}],[{key:\"constructor_\",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:\"isAtomic\",value:function(t){return!(t instanceof Vt)}}]),e}(),On=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"locate\",value:function(t){return e.locate(t,this._geom)}},{key:\"interfaces_\",get:function(){return[Cn]}}],[{key:\"constructor_\",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:\"locatePointInPolygon\",value:function(t,n){if(n.isEmpty())return X.EXTERIOR;var r=n.getExteriorRing(),i=e.locatePointInRing(t,r);if(i!==X.INTERIOR)return i;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=e.locatePointInRing(t,s);if(a===X.BOUNDARY)return X.BOUNDARY;if(a===X.INTERIOR)return X.EXTERIOR}return X.INTERIOR}},{key:\"locatePointInRing\",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?ke.locateInRing(t,e.getCoordinates()):X.EXTERIOR}},{key:\"containsPointInPolygon\",value:function(t,n){return X.EXTERIOR!==e.locatePointInPolygon(t,n)}},{key:\"locateInGeometry\",value:function(t,n){if(n instanceof At)return e.locatePointInPolygon(t,n);if(n instanceof Vt)for(var r=new Tn(n);r.hasNext();){var i=r.next();if(i!==n){var o=e.locateInGeometry(t,i);if(o!==X.EXTERIOR)return o}}return X.EXTERIOR}},{key:\"isContained\",value:function(t,n){return X.EXTERIOR!==e.locate(t,n)}},{key:\"locate\",value:function(t,n){return n.isEmpty()?X.EXTERIOR:n.getEnvelopeInternal().intersects(t)?e.locateInGeometry(t,n):X.EXTERIOR}}]),e}(),Rn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getNextCW\",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:\"propagateSideLabels\",value:function(t){for(var e=X.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Q.LEFT)!==X.NONE&&(e=r.getLocation(t,Q.LEFT))}if(e===X.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Q.ON)===X.NONE&&a.setLocation(t,Q.ON,i),a.isArea(t)){var u=a.getLocation(t,Q.LEFT),l=a.getLocation(t,Q.RIGHT);if(l!==X.NONE){if(l!==i)throw new ft(\"side location conflict\",s.getCoordinate());u===X.NONE&&F.shouldNeverReachHere(\"found single null side (at \"+s.getCoordinate()+\")\"),i=u}else F.isTrue(a.getLocation(t,Q.LEFT)===X.NONE,\"found single null side\"),a.setLocation(t,Q.RIGHT,i),a.setLocation(t,Q.LEFT,i)}}}},{key:\"getCoordinate\",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:\"print\",value:function(t){mt.out.println(\"EdgeEndStar:   \"+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:\"isAreaLabelsConsistent\",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:\"checkAreaLabelsConsistent\",value:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Q.LEFT);F.isTrue(r!==X.NONE,\"Found unlabelled area edge\");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();F.isTrue(s.isArea(t),\"Found non-area edge\");var a=s.getLocation(t,Q.LEFT),u=s.getLocation(t,Q.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0}},{key:\"findIndex\",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}},{key:\"iterator\",value:function(){return this.getEdges().iterator()}},{key:\"getEdges\",value:function(){return null===this._edgeList&&(this._edgeList=new pt(this._edgeMap.values())),this._edgeList}},{key:\"getLocation\",value:function(t,e,n){return this._ptInAreaLocation[t]===X.NONE&&(this._ptInAreaLocation[t]=On.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}},{key:\"toString\",value:function(){var t=new it;t.append(\"EdgeEndStar:   \"+this.getCoordinate()),t.append(\"\\n\");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(\"\\n\")}return t.toString()}},{key:\"computeEdgeEndLabels\",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}},{key:\"computeLabelling\",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===X.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=X.NONE;if(e[u])l=X.EXTERIOR;else{var h=s.getCoordinate();l=this.getLocation(u,h,t)}a.setAllLocationsIfNull(u,l)}}},{key:\"getDegree\",value:function(){return this._edgeMap.size()}},{key:\"insertEdgeEnd\",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}}],[{key:\"constructor_\",value:function(){this._edgeMap=new De,this._edgeList=null,this._ptInAreaLocation=[X.NONE,X.NONE]}}]),e}(),An=function(e){r(s,Rn);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"linkResultDirectedEdges\",value:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new ft(\"no outgoing dirEdge found\",this.getCoordinate());F.isTrue(t.isInResult(),\"unable to link last incoming dirEdge\"),e.setNext(t)}}},{key:\"insert\",value:function(t){var e=t;this.insertEdgeEnd(e,e)}},{key:\"getRightmostEdge\",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return qe.isNorthern(i)&&qe.isNorthern(o)?n:qe.isNorthern(i)||qe.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(F.shouldNeverReachHere(\"found two horizontal edges incident on node\"),null):r}},{key:\"print\",value:function(t){mt.out.println(\"DirectedEdgeStar: \"+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print(\"out \"),n.print(t),t.println(),t.print(\"in \"),n.getSym().print(t),t.println()}}},{key:\"getResultAreaEdges\",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new pt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:\"updateLabelling\",value:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:\"linkAllDirectedEdges\",value:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)}},{key:\"computeDepths\",value:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Q.LEFT),r=t.getDepth(Q.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new ft(\"depth mismatch at \"+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var u=this._edgeList.get(a);u.setEdgeDepths(Q.RIGHT,s),s=u.getDepth(Q.LEFT)}return s}}},{key:\"mergeSymLabels\",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:\"linkMinimalDirectedEdges\",value:function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(F.isTrue(null!==e,\"found null for first outgoing dirEdge\"),F.isTrue(e.getEdgeRing()===t,\"unable to link last incoming dirEdge\"),n.setNextMin(e))}},{key:\"getOutgoingDegree\",value:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}}},{key:\"getLabel\",value:function(){return this._label}},{key:\"findCoveredLineEdges\",value:function(){for(var t=X.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=X.INTERIOR;break}if(r.isInResult()){t=X.EXTERIOR;break}}}if(t===X.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===X.INTERIOR):(s.isInResult()&&(i=X.EXTERIOR),a.isInResult()&&(i=X.INTERIOR))}}},{key:\"computeLabelling\",value:function(t){c(i(s.prototype),\"computeLabelling\",this).call(this,t),this._label=new we(X.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var o=n.getLocation(r);o!==X.INTERIOR&&o!==X.BOUNDARY||this._label.setLocation(r,X.INTERIOR)}}}],[{key:\"constructor_\",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),s}(),Dn=function(e){r(o,Be);var i=h(o);function o(){return t(this,o),i.call(this)}return n(o,[{key:\"createNode\",value:function(t){return new Le(t,new An)}}]),o}(),Fn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"compareTo\",value:function(t){var n=t;return e.compareOriented(this._pts,this._orientation,n._pts,n._orientation)}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)}},{key:\"orientation\",value:function(t){return 1===Zt.increasingDirection(t)}},{key:\"compareOriented\",value:function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=i)===s,f=(l+=o)===a;if(c&&!f)return-1;if(!c&&f)return 1;if(c&&f)return 0}}}]),e}(),qn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"print\",value:function(t){t.print(\"MULTILINESTRING ( \");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(\",\"),t.print(\"(\");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(\",\"),t.print(r[i].x+\" \"+r[i].y);t.println(\")\")}t.print(\")  \")}},{key:\"addAll\",value:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}},{key:\"findEdgeIndex\",value:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}},{key:\"iterator\",value:function(){return this._edges.iterator()}},{key:\"getEdges\",value:function(){return this._edges}},{key:\"get\",value:function(t){return this._edges.get(t)}},{key:\"findEqualEdge\",value:function(t){var e=new Fn(t.getCoordinates());return this._ocaMap.get(e)}},{key:\"add\",value:function(t){this._edges.add(t);var e=new Fn(t.getCoordinates());this._ocaMap.put(e,t)}}],[{key:\"constructor_\",value:function(){this._edges=new pt,this._ocaMap=new De}}]),e}(),Vn=function(){function e(){t(this,e)}return n(e,[{key:\"processIntersections\",value:function(t,e,n,r){}},{key:\"isDone\",value:function(){}}]),e}(),Gn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"isTrivialIntersection\",value:function(t,n,r,i){if(t===r&&1===this._li.getIntersectionNum()){if(e.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var o=t.size()-1;if(0===n&&i===o||0===i&&n===o)return!0}}return!1}},{key:\"getProperIntersectionPoint\",value:function(){return this._properIntersectionPoint}},{key:\"hasProperInteriorIntersection\",value:function(){return this._hasProperInterior}},{key:\"getLineIntersector\",value:function(){return this._li}},{key:\"hasProperIntersection\",value:function(){return this._hasProper}},{key:\"processIntersections\",value:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:\"hasIntersection\",value:function(){return this._hasIntersection}},{key:\"isDone\",value:function(){return!1}},{key:\"hasInteriorIntersection\",value:function(){return this._hasInterior}},{key:\"interfaces_\",get:function(){return[Vn]}}],[{key:\"constructor_\",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:\"isAdjacentSegments\",value:function(t,e){return 1===Math.abs(t-e)}}]),e}(),Bn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getSegmentIndex\",value:function(){return this.segmentIndex}},{key:\"getCoordinate\",value:function(){return this.coord}},{key:\"print\",value:function(t){t.print(this.coord),t.print(\" seg # = \"+this.segmentIndex),t.println(\" dist = \"+this.dist)}},{key:\"compareTo\",value:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)}},{key:\"isEndPoint\",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:\"toString\",value:function(){return this.coord+\" seg # = \"+this.segmentIndex+\" dist = \"+this.dist}},{key:\"getDistance\",value:function(){return this.dist}},{key:\"compare\",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new B(t),this.segmentIndex=e,this.dist=n}}]),e}(),Yn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"print\",value:function(t){t.println(\"Intersections:\");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:\"iterator\",value:function(){return this._nodeMap.values().iterator()}},{key:\"addSplitEdges\",value:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}}},{key:\"addEndpoints\",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:\"createSplitEdge\",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new B(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new Hn(o,new we(this.edge._label))}},{key:\"add\",value:function(t,e,n){var r=new Bn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)}},{key:\"isIntersection\",value:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}}],[{key:\"constructor_\",value:function(){this._nodeMap=new De,this.edge=null;var t=arguments[0];this.edge=t}}]),e}(),zn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"isIntersects\",value:function(){return!this.isDisjoint()}},{key:\"isCovers\",value:function(){return(e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])||e.isTrue(this._matrix[X.INTERIOR][X.BOUNDARY])||e.isTrue(this._matrix[X.BOUNDARY][X.INTERIOR])||e.isTrue(this._matrix[X.BOUNDARY][X.BOUNDARY]))&&this._matrix[X.EXTERIOR][X.INTERIOR]===Nt.FALSE&&this._matrix[X.EXTERIOR][X.BOUNDARY]===Nt.FALSE}},{key:\"isCoveredBy\",value:function(){return(e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])||e.isTrue(this._matrix[X.INTERIOR][X.BOUNDARY])||e.isTrue(this._matrix[X.BOUNDARY][X.INTERIOR])||e.isTrue(this._matrix[X.BOUNDARY][X.BOUNDARY]))&&this._matrix[X.INTERIOR][X.EXTERIOR]===Nt.FALSE&&this._matrix[X.BOUNDARY][X.EXTERIOR]===Nt.FALSE}},{key:\"set\",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this._matrix[n][r]=Nt.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._matrix[i][o]=s}}},{key:\"isContains\",value:function(){return e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&this._matrix[X.EXTERIOR][X.INTERIOR]===Nt.FALSE&&this._matrix[X.EXTERIOR][X.BOUNDARY]===Nt.FALSE}},{key:\"setAtLeast\",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.setAtLeast(n,r,Nt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._matrix[i][o]<s&&(this._matrix[i][o]=s)}}},{key:\"setAtLeastIfValid\",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:\"isWithin\",value:function(){return e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&this._matrix[X.INTERIOR][X.EXTERIOR]===Nt.FALSE&&this._matrix[X.BOUNDARY][X.EXTERIOR]===Nt.FALSE}},{key:\"isTouches\",value:function(t,n){return t>n?this.isTouches(n,t):(t===Nt.A&&n===Nt.A||t===Nt.L&&n===Nt.L||t===Nt.L&&n===Nt.A||t===Nt.P&&n===Nt.A||t===Nt.P&&n===Nt.L)&&this._matrix[X.INTERIOR][X.INTERIOR]===Nt.FALSE&&(e.isTrue(this._matrix[X.INTERIOR][X.BOUNDARY])||e.isTrue(this._matrix[X.BOUNDARY][X.INTERIOR])||e.isTrue(this._matrix[X.BOUNDARY][X.BOUNDARY]))}},{key:\"isOverlaps\",value:function(t,n){return t===Nt.P&&n===Nt.P||t===Nt.A&&n===Nt.A?e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&e.isTrue(this._matrix[X.INTERIOR][X.EXTERIOR])&&e.isTrue(this._matrix[X.EXTERIOR][X.INTERIOR]):t===Nt.L&&n===Nt.L&&1===this._matrix[X.INTERIOR][X.INTERIOR]&&e.isTrue(this._matrix[X.INTERIOR][X.EXTERIOR])&&e.isTrue(this._matrix[X.EXTERIOR][X.INTERIOR])}},{key:\"isEquals\",value:function(t,n){return t===n&&e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&this._matrix[X.INTERIOR][X.EXTERIOR]===Nt.FALSE&&this._matrix[X.BOUNDARY][X.EXTERIOR]===Nt.FALSE&&this._matrix[X.EXTERIOR][X.INTERIOR]===Nt.FALSE&&this._matrix[X.EXTERIOR][X.BOUNDARY]===Nt.FALSE}},{key:\"toString\",value:function(){for(var t=new Jt(\"123456789\"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,Nt.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:\"setAll\",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:\"get\",value:function(t,e){return this._matrix[t][e]}},{key:\"transpose\",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:\"matches\",value:function(t){if(9!==t.length)throw new _(\"Should be length 9: \"+t);for(var n=0;n<3;n++)for(var r=0;r<3;r++)if(!e.matches(this._matrix[n][r],t.charAt(3*n+r)))return!1;return!0}},{key:\"add\",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:\"isDisjoint\",value:function(){return this._matrix[X.INTERIOR][X.INTERIOR]===Nt.FALSE&&this._matrix[X.INTERIOR][X.BOUNDARY]===Nt.FALSE&&this._matrix[X.BOUNDARY][X.INTERIOR]===Nt.FALSE&&this._matrix[X.BOUNDARY][X.BOUNDARY]===Nt.FALSE}},{key:\"isCrosses\",value:function(t,n){return t===Nt.P&&n===Nt.L||t===Nt.P&&n===Nt.A||t===Nt.L&&n===Nt.A?e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&e.isTrue(this._matrix[X.INTERIOR][X.EXTERIOR]):t===Nt.L&&n===Nt.P||t===Nt.A&&n===Nt.P||t===Nt.A&&n===Nt.L?e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&e.isTrue(this._matrix[X.EXTERIOR][X.INTERIOR]):t===Nt.L&&n===Nt.L&&0===this._matrix[X.INTERIOR][X.INTERIOR]}},{key:\"interfaces_\",get:function(){return[k]}}],[{key:\"constructor_\",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Nt.FALSE);else if(1===arguments.length)if(\"string\"==typeof arguments[0]){var t=arguments[0];e.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof e){var n=arguments[0];e.constructor_.call(this),this._matrix[X.INTERIOR][X.INTERIOR]=n._matrix[X.INTERIOR][X.INTERIOR],this._matrix[X.INTERIOR][X.BOUNDARY]=n._matrix[X.INTERIOR][X.BOUNDARY],this._matrix[X.INTERIOR][X.EXTERIOR]=n._matrix[X.INTERIOR][X.EXTERIOR],this._matrix[X.BOUNDARY][X.INTERIOR]=n._matrix[X.BOUNDARY][X.INTERIOR],this._matrix[X.BOUNDARY][X.BOUNDARY]=n._matrix[X.BOUNDARY][X.BOUNDARY],this._matrix[X.BOUNDARY][X.EXTERIOR]=n._matrix[X.BOUNDARY][X.EXTERIOR],this._matrix[X.EXTERIOR][X.INTERIOR]=n._matrix[X.EXTERIOR][X.INTERIOR],this._matrix[X.EXTERIOR][X.BOUNDARY]=n._matrix[X.EXTERIOR][X.BOUNDARY],this._matrix[X.EXTERIOR][X.EXTERIOR]=n._matrix[X.EXTERIOR][X.EXTERIOR]}}},{key:\"matches\",value:function(){if(Number.isInteger(arguments[0])&&\"string\"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return n===Nt.SYM_DONTCARE||n===Nt.SYM_TRUE&&(t>=0||t===Nt.TRUE)||n===Nt.SYM_FALSE&&t===Nt.FALSE||n===Nt.SYM_P&&t===Nt.P||n===Nt.SYM_L&&t===Nt.L||n===Nt.SYM_A&&t===Nt.A}if(\"string\"==typeof arguments[0]&&\"string\"==typeof arguments[1]){var r=arguments[1];return new e(arguments[0]).matches(r)}}},{key:\"isTrue\",value:function(t){return t>=0||t===Nt.TRUE}}]),e}(),jn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"size\",value:function(){return this._size}},{key:\"addAll\",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),mt.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:\"ensureCapacity\",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=Ot.copyOf(this._data,e)}},{key:\"toArray\",value:function(){var t=new Array(this._size).fill(null);return mt.arraycopy(this._data,0,t,0,this._size),t}},{key:\"add\",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:\"constructor_\",value:function(){if(this._data=null,this._size=0,0===arguments.length)e.constructor_.call(this,10);else if(1===arguments.length){var t=arguments[0];this._data=new Array(t).fill(null)}}}]),e}(),Xn=function(){function e(){t(this,e)}return n(e,[{key:\"getChainStartIndices\",value:function(t){var e=0,n=new jn(Math.trunc(t.length/2));n.add(e);do{var r=this.findChainEnd(t,e);n.add(r),e=r}while(e<t.length-1);return n.toArray()}},{key:\"findChainEnd\",value:function(t,e){for(var n=qe.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&qe.quadrant(t[r-1],t[r])===n;)r++;return r-1}},{key:\"OLDgetChainStartIndices\",value:function(t){var n=0,r=new pt;r.add(n);do{var i=this.findChainEnd(t,n);r.add(i),n=i}while(n<t.length-1);return e.toIntArray(r)}}],[{key:\"toIntArray\",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}]),e}(),Un=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getCoordinates\",value:function(){return this.pts}},{key:\"getMaxX\",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}},{key:\"getMinX\",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}},{key:\"computeIntersectsForChain\",value:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(!this.overlaps(i,o,s,a,u))return null;var h=Math.trunc((i+o)/2),c=Math.trunc((a+u)/2);i<h&&(a<c&&this.computeIntersectsForChain(i,h,s,a,c,l),c<u&&this.computeIntersectsForChain(i,h,s,c,u,l)),h<o&&(a<c&&this.computeIntersectsForChain(h,o,s,a,c,l),c<u&&this.computeIntersectsForChain(h,o,s,c,u,l))}}},{key:\"overlaps\",value:function(t,e,n,r,i){return z.intersects(this.pts[t],this.pts[e],n.pts[r],n.pts[i])}},{key:\"getStartIndexes\",value:function(){return this.startIndex}},{key:\"computeIntersects\",value:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)}}],[{key:\"constructor_\",value:function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Xn;this.startIndex=e.getChainStartIndices(this.pts)}}]),e}(),Zn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"getDepth\",value:function(t,e){return this._depth[t][e]}},{key:\"setDepth\",value:function(t,e,n){this._depth[t][e]=n}},{key:\"isNull\",value:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(this._depth[t][n]!==e.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===e.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===e.NULL_VALUE}}},{key:\"normalize\",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}}},{key:\"getDelta\",value:function(t){return this._depth[t][Q.RIGHT]-this._depth[t][Q.LEFT]}},{key:\"getLocation\",value:function(t,e){return this._depth[t][e]<=0?X.EXTERIOR:X.INTERIOR}},{key:\"toString\",value:function(){return\"A: \"+this._depth[0][1]+\",\"+this._depth[0][2]+\" B: \"+this._depth[1][1]+\",\"+this._depth[1][2]}},{key:\"add\",value:function(){if(1===arguments.length)for(var t=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);i!==X.EXTERIOR&&i!==X.INTERIOR||(this.isNull(n,r)?this._depth[n][r]=e.depthAtLocation(i):this._depth[n][r]+=e.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===X.INTERIOR&&this._depth[o][s]++}}}],[{key:\"constructor_\",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE}},{key:\"depthAtLocation\",value:function(t){return t===X.EXTERIOR?0:t===X.INTERIOR?1:e.NULL_VALUE}}]),e}();Zn.NULL_VALUE=-1;var Hn=function(e){r(s,Me);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"getDepth\",value:function(){return this._depth}},{key:\"getCollapsedEdge\",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new s(t,we.toLineLabel(this._label))}},{key:\"isIsolated\",value:function(){return this._isIsolated}},{key:\"getCoordinates\",value:function(){return this.pts}},{key:\"setIsolated\",value:function(t){this._isIsolated=t}},{key:\"setName\",value:function(t){this._name=t}},{key:\"equals\",value:function(t){if(!(t instanceof s))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0}},{key:\"getCoordinate\",value:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}}},{key:\"print\",value:function(t){t.print(\"edge \"+this._name+\": \"),t.print(\"LINESTRING (\");for(var e=0;e<this.pts.length;e++)e>0&&t.print(\",\"),t.print(this.pts[e].x+\" \"+this.pts[e].y);t.print(\")  \"+this._label+\" \"+this._depthDelta)}},{key:\"computeIM\",value:function(t){s.updateIM(this._label,t)}},{key:\"isCollapsed\",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:\"isClosed\",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:\"getMaximumSegmentIndex\",value:function(){return this.pts.length-1}},{key:\"getDepthDelta\",value:function(){return this._depthDelta}},{key:\"getNumPoints\",value:function(){return this.pts.length}},{key:\"printReverse\",value:function(t){t.print(\"edge \"+this._name+\": \");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+\" \");t.println(\"\")}},{key:\"getMonotoneChainEdge\",value:function(){return null===this._mce&&(this._mce=new Un(this)),this._mce}},{key:\"getEnvelope\",value:function(){if(null===this._env){this._env=new z;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:\"addIntersection\",value:function(t,e,n,r){var i=new B(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)}},{key:\"toString\",value:function(){var t=new Jt;t.append(\"edge \"+this._name+\": \"),t.append(\"LINESTRING (\");for(var e=0;e<this.pts.length;e++)e>0&&t.append(\",\"),t.append(this.pts[e].x+\" \"+this.pts[e].y);return t.append(\")  \"+this._label+\" \"+this._depthDelta),t.toString()}},{key:\"isPointwiseEqual\",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:\"setDepthDelta\",value:function(t){this._depthDelta=t}},{key:\"getEdgeIntersectionList\",value:function(){return this.eiList}},{key:\"addIntersections\",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)}}],[{key:\"constructor_\",value:function(){if(this.pts=null,this._env=null,this.eiList=new Yn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Zn,this._depthDelta=0,1===arguments.length){var t=arguments[0];s.constructor_.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}},{key:\"updateIM\",value:function(){if(!(2===arguments.length&&arguments[1]instanceof zn&&arguments[0]instanceof we))return c(i(s),\"updateIM\",this).apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Q.ON),t.getLocation(1,Q.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Q.LEFT),t.getLocation(1,Q.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Q.RIGHT),t.getLocation(1,Q.RIGHT),2))}}]),s}(),Wn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"setWorkingPrecisionModel\",value:function(t){this._workingPrecisionModel=t}},{key:\"insertUniqueEdge\",value:function(t){var n=this._edgeList.findEqualEdge(t);if(null!==n){var r=n.getLabel(),i=t.getLabel();n.isPointwiseEqual(t)||(i=new we(t.getLabel())).flip(),r.merge(i);var o=e.depthDelta(i),s=n.getDepthDelta()+o;n.setDepthDelta(s)}else this._edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:\"buildSubgraphs\",value:function(t,e){for(var n=new pt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new In(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}}},{key:\"createSubgraphs\",value:function(t){for(var e=new pt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new dt;i.create(r),e.add(i)}}return We.sort(e,We.reverseOrder()),e}},{key:\"createEmptyResultGeometry\",value:function(){return this._geomFact.createPolygon()}},{key:\"getNoder\",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new mn,n=new xe;return n.setPrecisionModel(t),e.setSegmentIntersector(new Gn(n)),e}},{key:\"buffer\",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new wn(n,this._bufParams),i=new Pn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ye(new Dn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new ze(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)}},{key:\"computeNodedEdges\",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new Hn(i.getCoordinates(),new we(s));this.insertUniqueEdge(a)}}}},{key:\"setNoder\",value:function(t){this._workingNoder=t}}],[{key:\"constructor_\",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new qn;var t=arguments[0];this._bufParams=t}},{key:\"depthDelta\",value:function(t){var e=t.getLocation(0,Q.LEFT),n=t.getLocation(0,Q.RIGHT);return e===X.INTERIOR&&n===X.EXTERIOR?1:e===X.EXTERIOR&&n===X.INTERIOR?-1:0}},{key:\"convertSegStrings\",value:function(t){for(var e=new oe,n=new pt;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)}}]),e}(),Jn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"rescale\",value:function(){if(rt(arguments[0],U))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&mt.out.println(n)}}},{key:\"scale\",value:function(){if(rt(arguments[0],U)){for(var t=arguments[0],e=new pt(t.size()),n=t.iterator();n.hasNext();){var r=n.next();e.add(new cn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new B(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].getZ());return Zt.removeRepeatedPoints(o)}}},{key:\"isIntegerPrecision\",value:function(){return 1===this._scaleFactor}},{key:\"getNodedSubstrings\",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:\"computeNodes\",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:\"interfaces_\",get:function(){return[dn]}}],[{key:\"constructor_\",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],n=arguments[1];e.constructor_.call(this,t,n,0,0)}else if(4===arguments.length){var r=arguments[0],i=arguments[1];this._noder=r,this._scaleFactor=i,this._isScaled=!this.isIntegerPrecision()}}}]),e}(),Kn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"checkEndPtVertexIntersections\",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new A(\"found endpt/interior pt intersection at index \"+o+\" :pt \"+n)}},{key:\"checkInteriorIntersections\",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3];if(h===f&&c===g)return null;var p=h.getCoordinates()[c],v=h.getCoordinates()[c+1],d=f.getCoordinates()[g],y=f.getCoordinates()[g+1];if(this._li.computeIntersection(p,v,d,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,p,v)||this.hasInteriorIntersection(this._li,d,y)))throw new A(\"found non-noded intersection at \"+p+\"-\"+v+\" and \"+d+\"-\"+y)}}},{key:\"checkValid\",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:\"checkCollapses\",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])}},{key:\"hasInteriorIntersection\",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1}},{key:\"checkCollapse\",value:function(t,n,r){if(t.equals(r))throw new A(\"found non-noded collapse at \"+e.fact.createLineString([t,n,r]))}}],[{key:\"constructor_\",value:function(){this._li=new xe,this._segStrings=null;var t=arguments[0];this._segStrings=t}}]),e}();Kn.fact=new oe;var Qn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"intersectsScaled\",value:function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return F.isTrue(!(s&&a),\"Found bad envelope test\"),a}},{key:\"initCorners\",value:function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new B(this._maxx,this._maxy),this._corner[1]=new B(this._minx,this._maxy),this._corner[2]=new B(this._minx,this._miny),this._corner[3]=new B(this._maxx,this._miny)}},{key:\"intersects\",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:\"scale\",value:function(t){return Math.round(t*this._scaleFactor)}},{key:\"getCoordinate\",value:function(){return this._originalPt}},{key:\"copyScaled\",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:\"getSafeEnvelope\",value:function(){if(null===this._safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new z(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:\"intersectsPixelClosure\",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:\"intersectsToleranceSquare\",value:function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))}},{key:\"addSnappedNode\",value:function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:\"constructor_\",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new _(\"Scale factor must be non-zero\");1!==e&&(this._pt=new B(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new B,this._p1Scaled=new B),this.initCorners(this._pt)}}]),e}();Qn.SAFE_ENV_EXPANSION_FACTOR=.75;var $n=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"select\",value:function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:\"constructor_\",value:function(){this.selectedSegment=new fn}}]),e}(),tr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"snap\",value:function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=r.getSafeEnvelope(),a=new er(r,i,o);return this._index.query(s,new(function(){function e(){t(this,e)}return n(e,[{key:\"interfaces_\",get:function(){return[Qe]}},{key:\"visitItem\",value:function(t){t.select(s,a)}}]),e}())),a.isNodeAdded()}}}],[{key:\"constructor_\",value:function(){this._index=null;var t=arguments[0];this._index=t}}]),e}(),er=function(e){r(s,$n);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:\"isNodeAdded\",value:function(){return this._isNodeAdded}},{key:\"select\",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof pn))return c(i(s.prototype),\"select\",this).apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}],[{key:\"constructor_\",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}}]),s}();tr.HotPixelSnapAction=er;var nr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"processIntersections\",value:function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}}},{key:\"isDone\",value:function(){return!1}},{key:\"getInteriorIntersections\",value:function(){return this._interiorIntersections}},{key:\"interfaces_\",get:function(){return[Vn]}}],[{key:\"constructor_\",value:function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new pt}}]),e}(),rr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"checkCorrectness\",value:function(t){var e=cn.getNodedSubstrings(t),n=new Kn(e);try{n.checkValid()}catch(t){if(!(t instanceof m))throw t;t.printStackTrace()}}},{key:\"getNodedSubstrings\",value:function(){return cn.getNodedSubstrings(this._nodedSegStrings)}},{key:\"snapRound\",value:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}},{key:\"findInteriorIntersections\",value:function(t,e){var n=new nr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}},{key:\"computeVertexSnaps\",value:function(){if(rt(arguments[0],U))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof cn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new Qn(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}}},{key:\"computeNodes\",value:function(t){this._nodedSegStrings=t,this._noder=new mn,this._pointSnapper=new tr(this._noder.getIndex()),this.snapRound(t,this._li)}},{key:\"computeIntersectionSnaps\",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new Qn(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}}},{key:\"interfaces_\",get:function(){return[dn]}}],[{key:\"constructor_\",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new xe,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}}]),e}(),ir=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:\"bufferFixedPrecision\",value:function(t){var e=new Jn(new rr(new ne(1)),t.getScale()),n=new Wn(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:\"bufferReducedPrecision\",value:function(){if(0===arguments.length){for(var t=e.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof ft))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=e.precisionScaleFactor(this._argGeom,this._distance,n),i=new ne(r);this.bufferFixedPrecision(i)}}},{key:\"computeGeometry\",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ne.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:\"setQuadrantSegments\",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:\"bufferOriginalPrecision\",value:function(){try{var t=new Wn(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof A))throw t;this._saveException=t}}},{key:\"getResultGeometry\",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:\"setEndCapStyle\",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:\"constructor_\",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new d,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:\"bufferOp\",value:function(){if(2===arguments.length){var t=arguments[1];return new e(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof j&&\"number\"==typeof arguments[1]){var n=arguments[1],r=arguments[2],i=new e(arguments[0]);return i.setQuadrantSegments(r),i.getResultGeometry(n)}if(arguments[2]instanceof d&&arguments[0]instanceof j&&\"number\"==typeof arguments[1]){var o=arguments[1];return new e(arguments[0],arguments[2]).getResultGeometry(o)}}else if(4===arguments.length){var s=arguments[1],a=arguments[2],u=arguments[3],l=new e(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(u),l.getResultGeometry(s)}}},{key:\"precisionScaleFactor\",value:function(t,e,n){var r=t.getEnvelopeInternal(),i=_t.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)}}]),e}();ir.CAP_ROUND=d.CAP_ROUND,ir.CAP_BUTT=d.CAP_FLAT,ir.CAP_FLAT=d.CAP_FLAT,ir.CAP_SQUARE=d.CAP_SQUARE,ir.MAX_PRECISION_DIGITS=12;var or=[\"Point\",\"MultiPoint\",\"LineString\",\"MultiLineString\",\"Polygon\",\"MultiPolygon\"],sr=function(){function e(n){t(this,e),this.geometryFactory=n||new oe}return n(e,[{key:\"read\",value:function(t){var e,n=(e=\"string\"==typeof t?JSON.parse(t):t).type;if(!ar[n])throw new Error(\"Unknown GeoJSON type: \"+e.type);return-1!==or.indexOf(n)?ar[n].call(this,e.coordinates):\"GeometryCollection\"===n?ar[n].call(this,e.geometries):ar[n].call(this,e)}},{key:\"write\",value:function(t){var e=t.getGeometryType();if(!ur[e])throw new Error(\"Geometry is not supported\");return ur[e].call(this,t)}}]),e}(),ar={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!ar[r])throw new Error(\"Unknown GeoJSON type: \"+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ar.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(a(B,f(r)))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new B(t[0],t[1]),new B(t[2],t[1]),new B(t[2],t[3]),new B(t[0],t[3]),new B(t[0],t[1])])},Point:function(t){var e=a(B,f(t));return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ar.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ar.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ar.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ar.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=ar.coordinates.call(this,o),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(ar.Polygon.call(this,r))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},ur={coordinate:function(t){var e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:\"Point\",coordinates:ur.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=ur.Point.call(this,r);e.push(i.coordinates)}return{type:\"MultiPoint\",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(ur.coordinate.call(this,i))}return{type:\"LineString\",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=ur.LineString.call(this,r);e.push(i.coordinates)}return{type:\"MultiLineString\",coordinates:e}},Polygon:function(t){var e=[],n=ur.LineString.call(this,t._shell);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=ur.LineString.call(this,i);e.push(o.coordinates)}return{type:\"Polygon\",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=ur.Polygon.call(this,r);e.push(i.coordinates)}return{type:\"MultiPolygon\",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(ur[i].call(this,r))}return{type:\"GeometryCollection\",geometries:e}}};return{BufferOp:ir,GeoJSONReader:function(){function e(n){t(this,e),this.parser=new sr(n||new oe)}return n(e,[{key:\"read\",value:function(t){return this.parser.read(t)}}]),e}(),GeoJSONWriter:function(){function e(){t(this,e),this.parser=new sr(this.geometryFactory)}return n(e,[{key:\"write\",value:function(t){return this.parser.write(t)}}]),e}()}}()),Rn.exports),Dn=dn(An);function Fn(){return new qn}function qn(){this.reset()}qn.prototype={constructor:qn,reset:function(){this.s=this.t=0},add:function(t){Gn(Vn,t,this.t),Gn(this,Vn.s,this.s),this.s?this.t+=Vn.t:this.s=Vn.t},valueOf:function(){return this.s}};var Vn=new qn;function Gn(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Bn=1e-6,Yn=Math.PI,zn=Yn/2,jn=Yn/4,Xn=2*Yn,Un=180/Yn,Zn=Yn/180,Hn=Math.abs,Wn=Math.atan,Jn=Math.atan2,Kn=Math.cos,Qn=Math.sin,$n=Math.sqrt;function tr(t){return t>1?0:t<-1?Yn:Math.acos(t)}function er(t){return t>1?zn:t<-1?-zn:Math.asin(t)}function nr(){}function rr(t,e){t&&or.hasOwnProperty(t.type)&&or[t.type](t,e)}var ir={Feature:function(t,e){rr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)rr(n[r].geometry,e)}},or={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){sr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)sr(n[r],e,0)},Polygon:function(t,e){ar(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ar(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)rr(n[r],e)}};function sr(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ar(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)sr(t[n],e,1);e.polygonEnd()}function ur(t){return[Jn(t[1],t[0]),er(t[2])]}function lr(t){var e=t[0],n=t[1],r=Kn(n);return[r*Kn(e),r*Qn(e),Qn(n)]}function hr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function cr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function fr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function gr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function pr(t){var e=$n(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function vr(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function dr(t,e){return[t>Yn?t-Xn:t<-Yn?t+Xn:t,e]}function yr(t){return function(e,n){return[(e+=t)>Yn?e-Xn:e<-Yn?e+Xn:e,n]}}function mr(t){var e=yr(t);return e.invert=yr(-t),e}function _r(t,e){var n=Kn(t),r=Qn(t),i=Kn(e),o=Qn(e);function s(t,e){var s=Kn(e),a=Kn(t)*s,u=Qn(t)*s,l=Qn(e),h=l*n+a*r;return[Jn(u*i-h*o,a*n-l*r),er(h*i+u*o)]}return s.invert=function(t,e){var s=Kn(e),a=Kn(t)*s,u=Qn(t)*s,l=Qn(e),h=l*i-u*o;return[Jn(u*i+l*o,a*n+h*r),er(h*n-a*r)]},s}function xr(t,e){(e=lr(e))[0]-=t,pr(e);var n=tr(-e[1]);return((-e[2]<0?-n:n)+Xn-Bn)%Xn}function Er(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:nr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function kr(t,e){return Hn(t[0]-e[0])<Bn&&Hn(t[1]-e[1])<Bn}function br(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function wr(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(kr(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new br(r,t,null,!0)),u.push(n.o=new br(r,null,n,!1)),a.push(n=new br(s,t,null,!1)),u.push(n.o=new br(s,null,n,!0))}}),a.length){for(u.sort(e),Ir(a),Ir(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,h,c=a[0];;){for(var f=c,g=!0;f.v;)if((f=f.n)===c)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(g)for(o=0,s=l.length;o<s;++o)i.point((h=l[o])[0],h[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(g)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((h=l[o])[0],h[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,g=!g}while(!f.v);i.lineEnd()}}}function Ir(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Nr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Sr(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}Fn(),Fn(),Fn(),dr.invert=dr,function(t){var e;1===t.length&&(e=t,t=function(t,n){return Nr(e(t),n)})}(Nr);var Mr=1e9,Lr=-Mr;var Pr=Fn();function Cr(t){return t}Fn(),Fn(),Fn();var Tr=1/0,Or=Tr,Rr=-Tr,Ar=Rr,Dr={point:function(t,e){t<Tr&&(Tr=t),t>Rr&&(Rr=t),e<Or&&(Or=e),e>Ar&&(Ar=e)},lineStart:nr,lineEnd:nr,polygonStart:nr,polygonEnd:nr,result:function(){var t=[[Tr,Or],[Rr,Ar]];return Rr=Ar=-(Or=Tr=1/0),t}};function Fr(t,e,n,r){return function(i,o){var s,a,u,l=e(o),h=i.invert(r[0],r[1]),c=Er(),f=e(c),g=!1,p={point:v,lineStart:y,lineEnd:m,polygonStart:function(){p.point=_,p.lineStart=x,p.lineEnd=E,a=[],s=[]},polygonEnd:function(){p.point=v,p.lineStart=y,p.lineEnd=m,a=Sr(a);var t=function(t,e){var n=e[0],r=e[1],i=[Qn(n),-Kn(n),0],o=0,s=0;Pr.reset();for(var a=0,u=t.length;a<u;++a)if(h=(l=t[a]).length)for(var l,h,c=l[h-1],f=c[0],g=c[1]/2+jn,p=Qn(g),v=Kn(g),d=0;d<h;++d,f=m,p=x,v=E,c=y){var y=l[d],m=y[0],_=y[1]/2+jn,x=Qn(_),E=Kn(_),k=m-f,b=k>=0?1:-1,w=b*k,I=w>Yn,N=p*x;if(Pr.add(Jn(N*b*Qn(w),v*E+N*Kn(w))),o+=I?k+b*Xn:k,I^f>=n^m>=n){var S=cr(lr(c),lr(y));pr(S);var M=cr(i,S);pr(M);var L=(I^k>=0?-1:1)*er(M[2]);(r>L||r===L&&(S[0]||S[1]))&&(s+=I^k>=0?1:-1)}}return(o<-Bn||o<Bn&&Pr<-Bn)^1&s}(s,h);a.length?(g||(o.polygonStart(),g=!0),wr(a,Vr,t,n,o)):t&&(g||(o.polygonStart(),g=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function v(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function d(t,e){var n=i(t,e);l.point(n[0],n[1])}function y(){p.point=d,l.lineStart()}function m(){p.point=v,l.lineEnd()}function _(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function x(){f.lineStart(),u=[]}function E(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),l=c.result(),h=l.length;if(u.pop(),s.push(u),u=null,h)if(1&i){if((e=(n=l[0]).length-1)>0){for(g||(o.polygonStart(),g=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else h>1&&2&i&&l.push(l.pop().concat(l.shift())),a.push(l.filter(qr))}return p}}function qr(t){return t.length>1}function Vr(t,e){return((t=t.x)[0]<0?t[1]-zn-Bn:zn-t[1])-((e=e.x)[0]<0?e[1]-zn-Bn:zn-e[1])}Fn();var Gr=Fr(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Yn:-Yn,u=Hn(o-n);Hn(u-Yn)<Bn?(t.point(n,r=(r+s)/2>0?zn:-zn),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=Yn&&(Hn(n-i)<Bn&&(n-=i*Bn),Hn(o-a)<Bn&&(o-=a*Bn),r=function(t,e,n,r){var i,o,s=Qn(t-n);return Hn(s)>Bn?Wn((Qn(e)*(o=Kn(r))*Qn(n)-Qn(r)*(i=Kn(e))*Qn(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*zn,r.point(-Yn,i),r.point(0,i),r.point(Yn,i),r.point(Yn,0),r.point(Yn,-i),r.point(0,-i),r.point(-Yn,-i),r.point(-Yn,0),r.point(-Yn,i);else if(Hn(t[0]-e[0])>Bn){var o=t[0]<e[0]?Yn:-Yn;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Yn,-zn]);function Br(t){return function(e){var n=new Yr;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Yr(){}function zr(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ir.hasOwnProperty(t.type)?ir[t.type](t,e):rr(t,e)}(n,t.stream(Dr));var s=Dr.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}Yr.prototype={constructor:Yr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var jr=16,Xr=Kn(30*Zn);function Ur(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,l,h,c,f,g,p,v,d){var y=l-r,m=h-i,_=y*y+m*m;if(_>4*e&&v--){var x=s+f,E=a+g,k=u+p,b=$n(x*x+E*E+k*k),w=er(k/=b),I=Hn(Hn(k)-1)<Bn||Hn(o-c)<Bn?(o+c)/2:Jn(E,x),N=t(I,w),S=N[0],M=N[1],L=S-r,P=M-i,C=m*L-y*P;(C*C/_>e||Hn((y*L+m*P)/_-.5)>.3||s*f+a*g+u*p<Xr)&&(n(r,i,o,s,a,u,S,M,I,x/=b,E/=b,k,v,d),d.point(S,M),n(S,M,I,x,E,k,l,h,c,f,g,p,v,d))}}return function(e){var r,i,o,s,a,u,l,h,c,f,g,p,v={point:d,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),v.lineStart=x},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function d(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){h=NaN,v.point=m,e.lineStart()}function m(r,i){var o=lr([r,i]),s=t(r,i);n(h,c,l,f,g,p,h=s[0],c=s[1],l=r,f=o[0],g=o[1],p=o[2],jr,e),e.point(h,c)}function _(){v.point=d,e.lineEnd()}function x(){y(),v.point=E,v.lineEnd=k}function E(t,e){m(r=t,e),i=h,o=c,s=f,a=g,u=p,v.point=m}function k(){n(h,c,l,f,g,p,i,o,r,s,a,u,jr,e),v.lineEnd=_,_()}return v}}(t,e):function(t){return Br({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Zr=Br({point:function(t,e){this.stream.point(t*Zn,e*Zn)}});function Hr(t){return function(t){var e,n,r,i,o,s,a,u,l,h,c=150,f=480,g=250,p=0,v=0,d=0,y=0,m=0,_=null,x=Gr,E=null,k=Cr,b=.5,w=Ur(S,b);function I(t){return[(t=o(t[0]*Zn,t[1]*Zn))[0]*c+n,r-t[1]*c]}function N(t){return(t=o.invert((t[0]-n)/c,(r-t[1])/c))&&[t[0]*Un,t[1]*Un]}function S(t,i){return[(t=e(t,i))[0]*c+n,r-t[1]*c]}function M(){o=vr(i=function(t,e,n){return(t%=Xn)?e||n?vr(mr(t),_r(e,n)):mr(t):e||n?_r(e,n):dr}(d,y,m),e);var t=e(p,v);return n=f-t[0]*c,r=g+t[1]*c,L()}function L(){return l=h=null,I}return I.stream=function(t){return l&&h===t?l:l=Zr(x(i,w(k(h=t))))},I.clipAngle=function(t){return arguments.length?(x=+t?function(t,e){var n=Kn(t),r=n>0,i=Hn(n)>Bn;function o(t,e){return Kn(t)*Kn(e)>n}function s(t,e,r){var i=[1,0,0],o=cr(lr(t),lr(e)),s=hr(o,o),a=o[0],u=s-a*a;if(!u)return!r&&t;var l=n*s/u,h=-n*a/u,c=cr(i,o),f=gr(i,l);fr(f,gr(o,h));var g=c,p=hr(f,g),v=hr(g,g),d=p*p-v*(hr(f,f)-1);if(!(d<0)){var y=$n(d),m=gr(g,(-p-y)/v);if(fr(m,f),m=ur(m),!r)return m;var _,x=t[0],E=e[0],k=t[1],b=e[1];E<x&&(_=x,x=E,E=_);var w=E-x,I=Hn(w-Yn)<Bn;if(!I&&b<k&&(_=k,k=b,b=_),I||w<Bn?I?k+b>0^m[1]<(Hn(m[0]-x)<Bn?k:b):k<=m[1]&&m[1]<=b:w>Yn^(x<=m[0]&&m[0]<=E)){var N=gr(g,(-p+y)/v);return fr(N,f),[m,ur(N)]}}}function a(e,n){var i=r?t:Yn-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Fr(o,function(t){var e,n,u,l,h;return{lineStart:function(){l=u=!1,h=1},point:function(c,f){var g,p=[c,f],v=o(c,f),d=r?v?0:a(c,f):v?a(c+(c<0?Yn:-Yn),f):0;if(!e&&(l=u=v)&&t.lineStart(),v!==u&&(!(g=s(e,p))||kr(e,g)||kr(p,g))&&(p[0]+=Bn,p[1]+=Bn,v=o(p[0],p[1])),v!==u)h=0,v?(t.lineStart(),g=s(p,e),t.point(g[0],g[1])):(g=s(e,p),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(i&&e&&r^v){var y;d&n||!(y=s(p,e,!0))||(h=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||e&&kr(e,p)||t.point(p[0],p[1]),e=p,u=v,n=d},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return h|(l&&u)<<1}}},function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=Kn(e),a=Qn(e),u=r*n;null==i?(i=e+r*Xn,o=e-u/2):(i=xr(s,i),o=xr(s,o),(r>0?i<o:i>o)&&(i+=r*Xn));for(var l,h=i;r>0?h>o:h<o;h-=u)l=ur([s,-a*Kn(h),-a*Qn(h)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)},r?[0,-t]:[-Yn,t-Yn])}(_=t*Zn,6*Zn):(_=null,Gr),L()):_*Un},I.clipExtent=function(t){return arguments.length?(k=null==t?(E=s=a=u=null,Cr):function(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,l){var h=0,c=0;if(null==i||(h=s(i,a))!==(c=s(o,a))||u(i,o)<0^a>0)do{l.point(0===h||3===h?t:n,h>1?r:e)}while((h=(h+a+4)%4)!==c);else l.point(o[0],o[1])}function s(r,i){return Hn(r[0]-t)<Bn?i>0?0:3:Hn(r[0]-n)<Bn?i>0?2:1:Hn(r[1]-e)<Bn?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,h,c,f,g,p,v,d,y,m,_=s,x=Er(),E={point:k,lineStart:function(){E.point=b,l&&l.push(h=[]),y=!0,d=!1,p=v=NaN},lineEnd:function(){u&&(b(c,f),g&&d&&x.rejoin(),u.push(x.result())),E.point=k,d&&_.lineEnd()},polygonStart:function(){_=x,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,s,a=l[n],u=1,h=a.length,c=a[0],f=c[0],g=c[1];u<h;++u)o=f,s=g,f=(c=a[u])[0],g=c[1],s<=r?g>r&&(f-o)*(r-s)>(g-s)*(t-o)&&++e:g<=r&&(f-o)*(r-s)<(g-s)*(t-o)&&--e;return e}(),n=m&&e,i=(u=Sr(u)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&wr(u,a,e,o,s),s.polygonEnd()),_=s,u=l=h=null}};function k(t,e){i(t,e)&&_.point(t,e)}function b(o,s){var a=i(o,s);if(l&&h.push([o,s]),y)c=o,f=s,g=a,y=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&d)_.point(o,s);else{var u=[p=Math.max(Lr,Math.min(Mr,p)),v=Math.max(Lr,Math.min(Mr,v))],x=[o=Math.max(Lr,Math.min(Mr,o)),s=Math.max(Lr,Math.min(Mr,s))];!function(t,e,n,r,i,o){var s,a=t[0],u=t[1],l=0,h=1,c=e[0]-a,f=e[1]-u;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<l)return;s<h&&(h=s)}else if(c>0){if(s>h)return;s>l&&(l=s)}if(s=i-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return;s>l&&(l=s)}else if(c>0){if(s<l)return;s<h&&(h=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<h&&(h=s)}else if(f>0){if(s>h)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>h)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<h&&(h=s)}return l>0&&(t[0]=a+l*c,t[1]=u+l*f),h<1&&(e[0]=a+h*c,e[1]=u+h*f),!0}}}}}(u,x,t,e,n,r)?a&&(_.lineStart(),_.point(o,s),m=!1):(d||(_.lineStart(),_.point(u[0],u[1])),_.point(x[0],x[1]),a||_.lineEnd(),m=!1)}p=o,v=s,d=a}return E}}(E=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),L()):null==E?null:[[E,s],[a,u]]},I.scale=function(t){return arguments.length?(c=+t,M()):c},I.translate=function(t){return arguments.length?(f=+t[0],g=+t[1],M()):[f,g]},I.center=function(t){return arguments.length?(p=t[0]%360*Zn,v=t[1]%360*Zn,M()):[p*Un,v*Un]},I.rotate=function(t){return arguments.length?(d=t[0]%360*Zn,y=t[1]%360*Zn,m=t.length>2?t[2]%360*Zn:0,M()):[d*Un,y*Un,m*Un]},I.precision=function(t){return arguments.length?(w=Ur(S,b=t*t),L()):$n(b)},I.fitExtent=function(t,e){return zr(I,t,e)},I.fitSize=function(t,e){return function(t,e,n){return zr(I,[[0,0],e],n)}(0,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&N,M()}}(function(){return t})()}function Wr(t){return function(e,n){var r=Kn(e),i=Kn(n),o=t(r*i);return[o*i*Qn(e),o*Qn(n)]}}function Jr(t){return function(e,n){var r=$n(e*e+n*n),i=t(r),o=Qn(i),s=Kn(i);return[Jn(e*o,r*s),er(r&&n*o/r)]}}Wr(function(t){return $n(2/(1+t))}).invert=Jr(function(t){return 2*er(t/2)});var Kr=Wr(function(t){return(t=tr(t))&&t/Qn(t)});function Qr(t,e){return[t,e]}Kr.invert=Jr(function(t){return t}),Qr.invert=Qr;var $r=Dn.BufferOp,ti=Dn.GeoJSONReader,ei=Dn.GeoJSONWriter;function ni(t,e,n,r){var i=t.properties||{},o=\"Feature\"===t.type?t.geometry:t;if(\"GeometryCollection\"===o.type){var s=[];return yt(t,function(t){var i=ni(t,e,n,r);i&&s.push(i)}),P(s)}var a=function(t){var e=Tn(o).geometry.coordinates,n=[-e[0],-e[1]];return Hr(Kr).scale(79.4188).clipAngle(179.999).rotate(n).scale(_)}(),u={type:o.type,coordinates:ri(o.coordinates,a)},l=(new ti).read(u),h=D(F(e,n),\"meters\"),c=$r.bufferOp(l,h,r);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((c=(new ei).write(c)).coordinates))return k({type:c.type,coordinates:ii(c.coordinates,a)},i)}function ri(t,e){return\"object\"!==y(t[0])?e(t):t.map(function(t){return ri(t,e)})}function ii(t,e){return\"object\"!==y(t[0])?e.invert(t):t.map(function(t){return ii(t,e)})}function oi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=0,i=0;return yt(t,function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!X(a=null==a?1:a))throw new Error(\"weight value must be a number for feature index \"+o);(a=Number(a))>0&&ht(t,function(t){n+=t[0]*a,r+=t[1]*a,i+=a})}),w([n/i,r/i],e.properties,e)}function si(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=0,i=0;return ht(t,function(t){n+=t[0],r+=t[1],i++},!0),w([n/i,r/i],e.properties)}var ai={exports:{}},ui=yn(We),li=s(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hi;if(i(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)},[{key:\"push\",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:\"pop\",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:\"peek\",value:function(){return this.data[0]}},{key:\"_up\",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:\"_down\",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}}]);function hi(t,e){return t<e?-1:t>e?1:0}var ci,fi,gi,pi,vi,di=yn(Object.freeze({__proto__:null,default:li})),yi={exports:{}};var mi,_i,xi={exports:{}};xi.exports;var Ei=dn(function(){if(_i)return ai.exports;_i=1;var t=ui,e=di,n=function(){if(vi)return yi.exports;vi=1;var t=(fi||(fi=1,ci=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=(r-n)/2,u=0,l=a-1;u<a;l=u++){var h=e[n+2*u+0],c=e[n+2*u+1],f=e[n+2*l+0],g=e[n+2*l+1];c>o!=g>o&&i<(f-h)*(o-c)/(g-c)+h&&(s=!s)}return s}),ci),e=(pi||(pi=1,gi=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=r-n,u=0,l=a-1;u<a;l=u++){var h=e[u+n][0],c=e[u+n][1],f=e[l+n][0],g=e[l+n][1];c>o!=g>o&&i<(f-h)*(o-c)/(g-c)+h&&(s=!s)}return s}),gi);return yi.exports=function(n,r,i,o){return r.length>0&&Array.isArray(r[0])?e(n,r,i,o):t(n,r,i,o)},yi.exports.nested=e,yi.exports.flat=t,yi.exports}(),r=(mi||(mi=1,function(t){var e=134217729;function n(t,e,n,r,i){var o,s,a,u,l=e[0],h=r[0],c=0,f=0;h>l==h>-l?(o=l,l=e[++c]):(o=h,h=r[++f]);var g=0;if(c<t&&f<n)for(h>l==h>-l?(a=o-((s=l+o)-l),l=e[++c]):(a=o-((s=h+o)-h),h=r[++f]),o=s,0!==a&&(i[g++]=a);c<t&&f<n;)h>l==h>-l?(a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++c]):(a=o-((s=o+h)-(u=s-o))+(h-u),h=r[++f]),o=s,0!==a&&(i[g++]=a);for(;c<t;)a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++c],o=s,0!==a&&(i[g++]=a);for(;f<n;)a=o-((s=o+h)-(u=s-o))+(h-u),h=r[++f],o=s,0!==a&&(i[g++]=a);return 0===o&&0!==g||(i[g++]=o),g}function r(t){return new Float64Array(t)}var i=r(4),o=r(8),s=r(12),a=r(16),u=r(4);t.orient2d=function(t,r,l,h,c,f){var g=(r-f)*(l-c),p=(t-c)*(h-f),v=g-p;if(0===g||0===p||g>0!=p>0)return v;var d=Math.abs(g+p);return Math.abs(v)>=3.3306690738754716e-16*d?v:-function(t,r,l,h,c,f,g){var p,v,d,y,m,_,x,E,k,b,w,I,N,S,M,L,P,C,T=t-c,O=l-c,R=r-f,A=h-f;m=(M=(E=T-(x=(_=e*T)-(_-T)))*(b=A-(k=(_=e*A)-(_-A)))-((S=T*A)-x*k-E*k-x*b))-(w=M-(P=(E=R-(x=(_=e*R)-(_-R)))*(b=O-(k=(_=e*O)-(_-O)))-((L=R*O)-x*k-E*k-x*b))),i[0]=M-(w+m)+(m-P),m=(N=S-((I=S+w)-(m=I-S))+(w-m))-(w=N-L),i[1]=N-(w+m)+(m-L),m=(C=I+w)-I,i[2]=I-(C-m)+(w-m),i[3]=C;var D=function(t,e){for(var n=e[0],r=1;r<4;r++)n+=e[r];return n}(0,i),F=2.2204460492503146e-16*g;if(D>=F||-D>=F)return D;if(p=t-(T+(m=t-T))+(m-c),d=l-(O+(m=l-O))+(m-c),v=r-(R+(m=r-R))+(m-f),y=h-(A+(m=h-A))+(m-f),0===p&&0===v&&0===d&&0===y)return D;if(F=1.1093356479670487e-31*g+3.3306690738754706e-16*Math.abs(D),(D+=T*y+A*p-(R*d+O*v))>=F||-D>=F)return D;m=(M=(E=p-(x=(_=e*p)-(_-p)))*(b=A-(k=(_=e*A)-(_-A)))-((S=p*A)-x*k-E*k-x*b))-(w=M-(P=(E=v-(x=(_=e*v)-(_-v)))*(b=O-(k=(_=e*O)-(_-O)))-((L=v*O)-x*k-E*k-x*b))),u[0]=M-(w+m)+(m-P),m=(N=S-((I=S+w)-(m=I-S))+(w-m))-(w=N-L),u[1]=N-(w+m)+(m-L),m=(C=I+w)-I,u[2]=I-(C-m)+(w-m),u[3]=C;var q=n(4,i,4,u,o);m=(M=(E=T-(x=(_=e*T)-(_-T)))*(b=y-(k=(_=e*y)-(_-y)))-((S=T*y)-x*k-E*k-x*b))-(w=M-(P=(E=R-(x=(_=e*R)-(_-R)))*(b=d-(k=(_=e*d)-(_-d)))-((L=R*d)-x*k-E*k-x*b))),u[0]=M-(w+m)+(m-P),m=(N=S-((I=S+w)-(m=I-S))+(w-m))-(w=N-L),u[1]=N-(w+m)+(m-L),m=(C=I+w)-I,u[2]=I-(C-m)+(w-m),u[3]=C;var V=n(q,o,4,u,s);m=(M=(E=p-(x=(_=e*p)-(_-p)))*(b=y-(k=(_=e*y)-(_-y)))-((S=p*y)-x*k-E*k-x*b))-(w=M-(P=(E=v-(x=(_=e*v)-(_-v)))*(b=d-(k=(_=e*d)-(_-d)))-((L=v*d)-x*k-E*k-x*b))),u[0]=M-(w+m)+(m-P),m=(N=S-((I=S+w)-(m=I-S))+(w-m))-(w=N-L),u[1]=N-(w+m)+(m-L),m=(C=I+w)-I,u[2]=I-(C-m)+(w-m),u[3]=C;var G=n(V,s,4,u,a);return a[G-1]}(t,r,l,h,c,f,d)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,\"__esModule\",{value:!0})}(xi.exports)),xi.exports).orient2d;function i(e,r,i){r=Math.max(0,void 0===r?2:r),i=i||0;var s=function(t){for(var e=t[0],r=t[0],i=t[0],o=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<r[1]&&(r=a),a[1]>o[1]&&(o=a)}var u=[e,r,i,o],l=u.slice();for(s=0;s<t.length;s++)n(t[s],u)||l.push(t[s]);return function(t){t.sort(d);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&h(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&h(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(l)}(e),a=new t(16);a.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},a.compareMinX=function(t,e){return t[0]-e[0]},a.compareMinY=function(t,e){return t[1]-e[1]},a.load(e);for(var u,l=[],p=0;p<s.length;p++){var v=s[p];a.remove(v),u=f(v,u),l.push(u)}var y=new t(16);for(p=0;p<l.length;p++)y.insert(c(l[p]));for(var m=r*r,_=i*i;l.length;){var x=l.shift(),E=x.p,k=x.next.p,b=g(E,k);if(!(b<_)){var w=b/m;(v=o(a,x.prev.p,E,k,x.next.next.p,w,y))&&Math.min(g(v,E),g(v,k))<=w&&(l.push(x),l.push(f(v,x)),a.remove(v),y.remove(x),y.insert(c(x)),y.insert(c(x.next)))}}x=u;var I=[];do{I.push(x.p),x=x.next}while(x!==u);return I.push(x.p),I}function o(t,n,r,i,o,u,h){for(var c=new e([],s),f=t.data;f;){for(var g=0;g<f.children.length;g++){var v=f.children[g],d=f.leaf?p(v,r,i):a(r,i,v);d>u||c.push({node:v,dist:d})}for(;c.length&&!c.peek().node.children;){var y=c.pop(),m=y.node,_=p(m,n,r),x=p(m,i,o);if(y.dist<_&&y.dist<x&&l(r,m,h)&&l(i,m,h))return m}(f=c.pop())&&(f=f.node)}return null}function s(t,e){return t.dist-e.dist}function a(t,e,n){if(u(t,n)||u(e,n))return 0;var r=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=v(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=v(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function u(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function l(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),f=n.search({minX:a,minY:u,maxX:l,maxY:c}),g=0;g<f.length;g++)if(r=f[g].p,i=f[g].next.p,o=t,r!==(s=e)&&i!==o&&h(r,i,o)>0!=h(r,i,s)>0&&h(o,s,r)>0!=h(o,s,i)>0)return!1;return!0}function h(t,e,n){return r(t[0],t[1],e[0],e[1],n[0],n[1])}function c(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function f(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function g(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function p(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function v(t,e,n,r,i,o,s,a){var u,l,h,c,f=n-t,g=r-e,p=s-i,v=a-o,d=t-i,y=e-o,m=f*f+g*g,_=f*p+g*v,x=p*p+v*v,E=f*d+g*y,k=p*d+v*y,b=m*x-_*_,w=b,I=b;0===b?(l=0,w=1,c=k,I=x):(c=m*k-_*E,(l=_*k-x*E)<0?(l=0,c=k,I=x):l>w&&(l=w,c=k+_,I=x)),c<0?(c=0,-E<0?l=0:-E>m?l=w:(l=-E,w=m)):c>I&&(c=I,-E+_<0?l=0:-E+_>m?l=w:(l=-E+_,w=m));var N=(1-(h=0===c?0:c/I))*i+h*s-((1-(u=0===l?0:l/w))*t+u*n),S=(1-h)*o+h*a-((1-u)*e+u*r);return N*N+S*S}function d(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}return e.default&&(e=e.default),ai.exports=i,ai.exports.default=i,ai.exports}());function ki(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.concavity=e.concavity||1/0;var n=[];if(ht(t,function(t){n.push([t[0],t[1]])}),!n.length)return null;var r=Ei(n,e.concavity);return r.length>3?N([r]):null}function bi(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&\"Feature\"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(st(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),N([o],i)}function wi(t){if(!t)throw new Error(\"geojson is required\");switch(t.type){case\"Feature\":return Ii(t);case\"FeatureCollection\":return function(t){var e={type:\"FeatureCollection\"};return Object.keys(t).forEach(function(n){switch(n){case\"type\":case\"features\":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return Ii(t)}),e}(t);case\"Point\":case\"LineString\":case\"Polygon\":case\"MultiPoint\":case\"MultiLineString\":case\"MultiPolygon\":case\"GeometryCollection\":return Si(t);default:throw new Error(\"unknown GeoJSON type\")}}function Ii(t){var e={type:\"Feature\"};return Object.keys(t).forEach(function(n){switch(n){case\"type\":case\"properties\":case\"geometry\":return;default:e[n]=t[n]}}),e.properties=Ni(t.properties),null==t.geometry?e.geometry=null:e.geometry=Si(t.geometry),e}function Ni(t){var e={};return t?(Object.keys(t).forEach(function(n){var r=t[n];\"object\"===y(r)?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map(function(t){return t}):e[n]=Ni(r):e[n]=r}),e):e}function Si(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),\"GeometryCollection\"===t.type?(e.geometries=t.geometries.map(function(t){return Si(t)}),e):(e.coordinates=function t(e){var n=e;return\"object\"!==y(n[0])?n.slice():n.map(function(e){return t(e)})}(t.coordinates),e)}function Mi(t,e){if(!t)throw new Error(\"geojson is required\");if(\"FeatureCollection\"!==t.type)throw new Error(\"geojson must be a FeatureCollection\");if(null==e)throw new Error(\"filter is required\");var n=[];return pt(t,function(t){Ti(t.properties,e)&&n.push(t)}),P(n)}function Li(t,e,n){if(!t)throw new Error(\"geojson is required\");if(\"FeatureCollection\"!==t.type)throw new Error(\"geojson must be a FeatureCollection\");if(null==e)throw new Error(\"property is required\");for(var r=Ci(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(P(u),s,o)}}function Pi(t,e,n,r){var i=r;return Li(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function Ci(t,e){var n={};return pt(t,function(t,r){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(r):n[o]=[r]}}),n}function Ti(t,e){if(void 0===t)return!1;var n=y(e);if(\"number\"===n||\"string\"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Ti(t,e[r]))return!1;return!0}return Oi(t,e)}function Oi(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Ri(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var Ai,Di,Fi,qi,Vi,Gi,Bi=Object.freeze({__proto__:null,applyFilter:Ti,clusterEach:Li,clusterReduce:Pi,createBins:Ci,filterProperties:Ri,getCluster:Mi,propertiesContainsFilter:Oi}),Yi=De;function zi(){return Di||(Di=1,Ai={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}),Ai}var ji=dn(function(){if(Gi)return Vi;Gi=1;var t=zi(),e=function(){if(qi)return Fi;qi=1;var t=zi(),e=t.eudist,n=t.dist;return Fi={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join(\"_\"):\"\"+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error(\"Error initializating clusters\");return r},kmpp:function(t,r){var i=t[0].length?e:n,o=[],s=t.length,a=t[0].length>0,u=t[Math.floor(Math.random()*s)];for(a&&u.join(\"_\"),o.push(u);o.length<r;){for(var l=[],h=o.length,c=0,f=[],g=0;g<s;g++){for(var p=1/0,v=0;v<h;v++){var d=i(t[g],o[v]);d<=p&&(p=d)}l[g]=p}for(var y=0;y<s;y++)c+=l[y];for(var m=0;m<s;m++)f[m]={i:m,v:t[m],pr:l[m]/c,cs:0};f.sort(function(t,e){return t.pr-e.pr}),f[0].cs=f[0].pr;for(var _=1;_<s;_++)f[_].cs=f[_-1].cs+f[_].pr;for(var x=Math.random(),E=0;E<s-1&&f[E++].cs<x;);o.push(f[E-1].v)}return o}}}(),n=t.eudist;t.mandist,t.dist;var r=e.kmrand,i=e.kmpp;function o(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}return Vi=function(t,e,s,a){var u=[],l=[],h=[],c=[],f=!1,g=a||1e4,p=t.length,v=t[0].length,d=v>0,y=[];if(s)u=\"kmrand\"==s?r(t,e):\"kmpp\"==s?i(t,e):s;else for(var m={};u.length<e;){var _=Math.floor(Math.random()*p);m[_]||(m[_]=!0,u.push(t[_]))}do{o(e,0,y);for(var x=0;x<p;x++){for(var E=1/0,k=0,b=0;b<e;b++)(c=d?n(t[x],u[b]):Math.abs(t[x]-u[b]))<=E&&(E=c,k=b);h[x]=k,y[k]++}for(var w=[],I=(l=[],0);I<e;I++)w[I]=d?o(v,0,w[I]):0,l[I]=u[I];if(d){for(var N=0;N<e;N++)u[N]=[];for(var S=0;S<p;S++)for(var M=w[h[S]],L=t[S],P=0;P<v;P++)M[P]+=L[P];f=!0;for(var C=0;C<e;C++){for(var T=u[C],O=w[C],R=l[C],A=y[C],D=0;D<v;D++)T[D]=O[D]/A||0;if(f)for(var F=0;F<v;F++)if(R[F]!=T[F]){f=!1;break}}}else{for(var q=0;q<p;q++)w[h[q]]+=t[q];for(var V=0;V<e;V++)u[V]=w[V]/y[V]||0;f=!0;for(var G=0;G<e;G++)if(l[G]!=u[G]){f=!1;break}}f=f||--g<=0}while(!f);return{it:1e4-g,k:e,idxs:h,centroids:u}}}()),Xi=De;function Ui(t,e){var n=!1;return P(function(t){if(t.length<3)return[];t.sort(Hi);for(var e,n,r,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,h=t[a].y,c=h;a--;)t[a].y<h&&(h=t[a].y),t[a].y>c&&(c=t[a].y);var f,g=l-u,p=c-h,v=g>p?g:p,d=.5*(l+u),y=.5*(c+h),m=[new Zi({__sentinel:!0,x:d-20*v,y:y-v},{__sentinel:!0,x:d,y:y+20*v},{__sentinel:!0,x:d+20*v,y:y-v})],_=[],x=[];for(a=t.length;a--;){for(x.length=0,f=m.length;f--;)(g=t[a].x-m[f].x)>0&&g*g>m[f].r?(_.push(m[f]),m.splice(f,1)):g*g+(p=t[a].y-m[f].y)*p>m[f].r||(x.push(m[f].a,m[f].b,m[f].b,m[f].c,m[f].c,m[f].a),m.splice(f,1));for(Wi(x),f=x.length;f;)n=x[--f],e=x[--f],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>1e-12&&m.push(new Zi(e,n,r))}for(Array.prototype.push.apply(_,m),a=_.length;a--;)(_[a].a.__sentinel||_[a].b.__sentinel||_[a].c.__sentinel)&&_.splice(a,1);return _}(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},N([[e,r,i,e]],o)}))}var Zi=s(function t(e,n,r){i(this,t),this.a=e,this.b=n,this.c=r;var o,s,a=n.x-e.x,u=n.y-e.y,l=r.x-e.x,h=r.y-e.y,c=a*(e.x+n.x)+u*(e.y+n.y),f=l*(e.x+r.x)+h*(e.y+r.y),g=2*(a*(r.y-n.y)-u*(r.x-n.x));this.x=(h*c-u*f)/g,this.y=(a*f-l*c)/g,o=this.x-e.x,s=this.y-e.y,this.r=o*o+s*s});function Hi(t,e){return e.x-t.x}function Wi(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function Ji(t){return t}function Ki(t,e){var n=function(t){if(null==t)return Ji;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,l=t.length,h=new Array(l);for(h[0]=(e+=t[0])*r+o,h[1]=(n+=t[1])*i+s;u<l;)h[u]=t[u],++u;return h}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case\"GeometryCollection\":return{type:r,geometries:e.geometries.map(t)};case\"Point\":n=o(e.coordinates);break;case\"MultiPoint\":n=e.coordinates.map(o);break;case\"LineString\":n=s(e.arcs);break;case\"MultiLineString\":n=e.arcs.map(s);break;case\"Polygon\":n=u(e.arcs);break;case\"MultiPolygon\":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function Qi(t){return Ki(t,function(t,e){var n={},r=[],i=[];function o(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Ki(t,{type:\"Polygon\",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case\"GeometryCollection\":e.geometries.forEach(t);break;case\"Polygon\":o(e.arcs);break;case\"MultiPolygon\":e.arcs.forEach(o)}}),r.forEach(function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:\"MultiPolygon\",arcs:i.map(function(e){var r,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&i.push(t)})})}),(r=(i=function(t,e){var n={},r={},i={},o=[],s=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(e){var n,o,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=a,o=i[a]){delete i[o.end];var h=o===n?n:o.concat(n);r[h.start=o.start]=i[h.end=n.end]=h}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=u]=n}),a(i,r),a(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}(t,i)).length)>1)for(var o,a,u=1,l=s(i[0]);u<r;++u)(o=s(i[u]))>l&&(a=i[0],i[0]=i[u],i[u]=a,l=o);return i}).filter(function(t){return t.length>0})}}.apply(this,arguments))}var $i=Object.prototype.hasOwnProperty;function to(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;return{set:function(r,o){for(var l=e(r)&u,h=s[l],c=0;h!=i;){if(n(h,r))return a[l]=o;if(++c>=t)throw new Error(\"full hashmap\");h=s[l=l+1&u]}return s[l]=r,a[l]=o,o},maybeSet:function(r,o){for(var l=e(r)&u,h=s[l],c=0;h!=i;){if(n(h,r))return a[l];if(++c>=t)throw new Error(\"full hashmap\");h=s[l=l+1&u]}return s[l]=r,a[l]=o,o},get:function(r,o){for(var l=e(r)&u,h=s[l],c=0;h!=i;){if(n(h,r))return a[l];if(++c>=t)break;h=s[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}}}function eo(t,e){return t[0]===e[0]&&t[1]===e[1]}var no=new ArrayBuffer(16),ro=new Float64Array(no),io=new Uint32Array(no);function oo(t){ro[0]=t[0],ro[1]=t[1];var e=io[0]^io[1];return 2147483647&(e<<5^e>>7^io[2]^io[3])}function so(t,e,n,r){ao(t,e,n),ao(t,e,e+r),ao(t,e+r,n)}function ao(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function uo(t){var e={type:\"GeometryCollection\",geometries:t.features.map(lo)};return null!=t.bbox&&(e.bbox=t.bbox),e}function lo(t){var e,n=ho(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function ho(t){if(null==t)return{type:null};var e=\"GeometryCollection\"===t.type?{type:\"GeometryCollection\",geometries:t.geometries.map(ho)}:\"Point\"===t.type||\"MultiPoint\"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function co(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&$i.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>r&&(r=o),s<n&&(n=s),s>i&&(i=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var h in t)o(t[h]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=function(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:(\"FeatureCollection\"===n.type?uo:\"Feature\"===n.type?lo:ho)(n);return r}(t)),r=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,r=0,i=s.length;r<i;++r)for(e=s[r];e=e.next;)++u;for(r=0,i=a.length;r<i;++r)for(n=a[r];n=n.next;)++u;var l=to(2*u*1.4,oo,eo),h=t.arcs=[];for(r=0,i=s.length;r<i;++r){e=s[r];do{c(e)}while(e=e.next)}for(r=0,i=a.length;r<i;++r)if((n=a[r]).next)do{c(n)}while(n=n.next);else f(n);function c(t){var e,n,r,i,s,a,u,c;if(r=l.get(e=o[t[0]]))for(u=0,c=r.length;u<c;++u)if(g(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=l.get(n=o[t[1]]))for(u=0,c=s.length;u<c;++u)if(p(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):l.set(e,[t]),s?s.push(t):l.set(n,[t]),h.push(t)}function f(t){var e,n,r,i,s;if(n=l.get(o[t[0]]))for(i=0,s=n.length;i<s;++i){if(v(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(d(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=o[t[0]+y(t)]))for(i=0,s=n.length;i<s;++i){if(v(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(d(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),h.push(t)}function g(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!eo(o[n],o[r]))return!1;return!0}function p(t,e){var n=t[0],r=e[0],i=t[1],s=e[1];if(n-i!=r-s)return!1;for(;n<=i;++n,--s)if(!eo(o[n],o[s]))return!1;return!0}function v(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var s=y(t),a=y(e),u=0;u<i;++u)if(!eo(o[n+(u+s)%i],o[r+(u+a)%i]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],s=e[1],a=i-n;if(a!==s-r)return!1;for(var u=y(t),l=a-y(e),h=0;h<a;++h)if(!eo(o[n+(h+u)%a],o[s-(h+l)%a]))return!1;return!0}function y(t){for(var e=t[0],n=t[1],r=e,i=r,s=o[r];++r<n;){var a=o[r];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=r,s=a)}return i-e}return t}(function(t){var e,n,r,i=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=to(1.4*o.length,E,k,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),h=new Int32Array(o.length),c=new Int32Array(o.length),f=new Int8Array(o.length),g=0;for(e=0,n=o.length;e<n;++e)l[e]=h[e]=c[e]=-1;for(e=0,n=s.length;e<n;++e){var p=s[e],v=p[0],d=p[1];for(r=u[v],i=u[++v],++g,f[r]=1;++v<=d;)x(e,r,r=i,i=u[v]);++g,f[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var y=a[e],m=y[0]+1,_=y[1];for(x(e,u[_-1],r=u[m-1],i=u[m]);++m<=_;)x(e,r,r=i,i=u[m])}function x(t,e,n,r){if(l[n]!==t){l[n]=t;var i=h[n];if(i>=0){var o=c[n];i===e&&o===r||i===r&&o===e||(++g,f[n]=1)}else h[n]=e,c[n]=r}}function E(t){return oo(o[t])}function k(t,e){return eo(o[t],o[e])}l=h=c=null;var b,w=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;return{add:function(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error(\"full hashset\");u=o[a=a+1&s]}return o[a]=r,!0},has:function(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*g,oo,eo);for(e=0,n=o.length;e<n;++e)f[b=u[e]]&&w.add(o[b]);return w}(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],l=u[0],h=u[1];++l<h;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var c=a[n],f=c[0],g=f,p=c[1],v=i.has(o[f]);++g<p;)i.has(o[g])&&(v?(e={0:g,1:c[1]},c[1]=g,c=c.next=e):(so(o,f,p,p-g),o[p]=o[f],v=!0,g=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&$i.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function l(t){return t.map(u)}for(var h in t)o(t[h]);return{type:\"Topology\",coordinates:i,lines:n,rings:r,objects:t}}(t))),i=r.coordinates,o=to(1.4*r.arcs.length,fo,go);function s(t){t&&$i.call(a,t.type)&&a[t.type](t)}t=r.objects,r.bbox=n,r.arcs=r.arcs.map(function(t,e){return o.set(t,e),i.slice(t[0],t[1]+1)}),delete r.coordinates,i=null;var a={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=u(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(u)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function u(t){var e=[];do{var n=o.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function l(t){return t.map(u)}for(var h in t)s(t[h]);return r}function fo(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function go(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function po(t){return t[0].toString()+\",\"+t[1].toString()}function vo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!U(e=e||{}))throw new Error(\"options is invalid\");var n=e.mutate;if(\"FeatureCollection\"!==rt(t))throw new Error(\"geojson must be a FeatureCollection\");if(!t.features.length)throw new Error(\"geojson is empty\");!1!==n&&void 0!==n||(t=wi(t));var r=function(t){var e={};_t(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error(\"geojson must be homogenous\");var i=t;switch(r){case\"LineString\":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!U(e=e||{}))throw new Error(\"options is invalid\");var n=e.mutate;if(\"FeatureCollection\"!==rt(t))throw new Error(\"geojson must be a FeatureCollection\");if(!t.features.length)throw new Error(\"geojson is empty\");!1!==n&&void 0!==n||(t=wi(t));var r=[],i=wt(t,function(t,e){return function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=po(r[0]),s=po(r[r.length-1]),a=po(i[0]),u=po(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==u)return null;n=r.concat(i.reverse().slice(1))}return M(n)}(t,e)||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:C(r.map(function(t){return t.coordinates})):null}(i,e);case\"Polygon\":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(\"FeatureCollection\"!==rt(t))throw new Error(\"geojson must be a FeatureCollection\");if(!t.features.length)throw new Error(\"geojson is empty\");!1!==e.mutate&&void 0!==e.mutate||(t=wi(t));var n=[];_t(t,function(t){n.push(t.geometry)});var r=co({geoms:R(n).geometry});return Qi(r,r.objects.geoms.geometries)}(i,e);default:throw new Error(r+\" is not supported\")}}var yo=/^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?$/i,mo=Math.ceil,_o=Math.floor,xo=\"[BigNumber Error] \",Eo=xo+\"Number primitive has more than 15 significant digits: \",ko=1e14,bo=14,wo=9007199254740991,Io=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],No=1e7,So=1e9;function Mo(t){var e=0|t;return t>0||t===e?e:e-1}function Lo(t){for(var e,n,r=1,i=t.length,o=t[0]+\"\";r<i;){for(e=t[r++]+\"\",n=bo-e.length;n--;e=\"0\"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function Po(t,e){var n,r,i=t.c,o=e.c,s=t.s,a=e.s,u=t.e,l=e.e;if(!s||!a)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=u==l,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>l^n?1:-1;for(a=(u=i.length)<(l=o.length)?u:l,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return u==l?0:u>l^n?1:-1}function Co(t,e,n,r){if(t<e||t>n||t!==_o(t))throw Error(xo+(r||\"Argument\")+(\"number\"==typeof t?t<e||t>n?\" out of range: \":\" not an integer: \":\" not a primitive number: \")+String(t))}function To(t){var e=t.c.length-1;return Mo(t.e/bo)==e&&t.c[e]%2!=0}function Oo(t,e){return(t.length>1?t.charAt(0)+\".\"+t.slice(1):t)+(e<0?\"e\":\"e+\")+e}function Ro(t,e,n){var r,i;if(e<0){for(i=n+\".\";++e;i+=n);t=i+t}else if(++e>(r=t.length)){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+\".\"+t.slice(e));return t}var Ao=function t(e){var n,r,i,o,s,a,u,l,h,c,f=S.prototype={constructor:S,toString:null,valueOf:null},g=new S(1),p=20,v=4,d=-7,m=21,_=-1e7,x=1e7,E=!1,k=1,b=0,w={prefix:\"\",groupSize:3,secondaryGroupSize:0,groupSeparator:\",\",decimalSeparator:\".\",fractionGroupSize:0,fractionGroupSeparator:\" \",suffix:\"\"},I=\"0123456789abcdefghijklmnopqrstuvwxyz\",N=!0;function S(t,e){var n,o,s,a,u,l,h,c,f=this;if(!(f instanceof S))return new S(t,e);if(null==e){if(t&&!0===t._isBigNumber)return f.s=t.s,void(!t.c||t.e>x?f.c=f.e=null:t.e<_?f.c=[f.e=0]:(f.e=t.e,f.c=t.c.slice()));if((l=\"number\"==typeof t)&&0*t==0){if(f.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,u=t;u>=10;u/=10,a++);return void(a>x?f.c=f.e=null:(f.e=a,f.c=[t]))}c=String(t)}else{if(!yo.test(c=String(t)))return i(f,c,l);f.s=45==c.charCodeAt(0)?(c=c.slice(1),-1):1}(a=c.indexOf(\".\"))>-1&&(c=c.replace(\".\",\"\")),(u=c.search(/e/i))>0?(a<0&&(a=u),a+=+c.slice(u+1),c=c.substring(0,u)):a<0&&(a=c.length)}else{if(Co(e,2,I.length,\"Base\"),10==e&&N)return C(f=new S(t),p+f.e+1,v);if(c=String(t),l=\"number\"==typeof t){if(0*t!=0)return i(f,c,l,e);if(f.s=1/t<0?(c=c.slice(1),-1):1,S.DEBUG&&c.replace(/^0\\.0*|\\./,\"\").length>15)throw Error(Eo+t)}else f.s=45===c.charCodeAt(0)?(c=c.slice(1),-1):1;for(n=I.slice(0,e),a=u=0,h=c.length;u<h;u++)if(n.indexOf(o=c.charAt(u))<0){if(\".\"==o){if(u>a){a=h;continue}}else if(!s&&(c==c.toUpperCase()&&(c=c.toLowerCase())||c==c.toLowerCase()&&(c=c.toUpperCase()))){s=!0,u=-1,a=0;continue}return i(f,String(t),l,e)}l=!1,(a=(c=r(c,e,10,f.s)).indexOf(\".\"))>-1?c=c.replace(\".\",\"\"):a=c.length}for(u=0;48===c.charCodeAt(u);u++);for(h=c.length;48===c.charCodeAt(--h););if(c=c.slice(u,++h)){if(h-=u,l&&S.DEBUG&&h>15&&(t>wo||t!==_o(t)))throw Error(Eo+f.s*t);if((a=a-u-1)>x)f.c=f.e=null;else if(a<_)f.c=[f.e=0];else{if(f.e=a,f.c=[],u=(a+1)%bo,a<0&&(u+=bo),u<h){for(u&&f.c.push(+c.slice(0,u)),h-=bo;u<h;)f.c.push(+c.slice(u,u+=bo));u=bo-(c=c.slice(u)).length}else u-=h;for(;u--;c+=\"0\");f.c.push(+c)}}else f.c=[f.e=0]}function M(t,e,n,r){var i,o,s,a,u;if(null==n?n=v:Co(n,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)u=Lo(t.c),u=1==r||2==r&&(s<=d||s>=m)?Oo(u,s):Ro(u,s,\"0\");else if(o=(t=C(new S(t),e,n)).e,a=(u=Lo(t.c)).length,1==r||2==r&&(e<=o||o<=d)){for(;a<e;u+=\"0\",a++);u=Oo(u,o)}else if(e-=s,u=Ro(u,o,\"0\"),o+1>a){if(--e>0)for(u+=\".\";e--;u+=\"0\");}else if((e+=o-a)>0)for(o+1==a&&(u+=\".\");e--;u+=\"0\");return t.s<0&&i?\"-\"+u:u}function L(t,e){for(var n,r,i=1,o=new S(t[0]);i<t.length;i++)(!(r=new S(t[i])).s||(n=Po(o,r))===e||0===n&&o.s===e)&&(o=r);return o}function P(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*bo-1)>x?t.c=t.e=null:n<_?t.c=[t.e=0]:(t.e=n,t.c=e),t}function C(t,e,n,r){var i,o,s,a,u,l,h,c=t.c,f=Io;if(c){t:{for(i=1,a=c[0];a>=10;a/=10,i++);if((o=e-i)<0)o+=bo,s=e,u=c[l=0],h=_o(u/f[i-s-1]%10);else if((l=mo((o+1)/bo))>=c.length){if(!r)break t;for(;c.length<=l;c.push(0));u=h=0,i=1,s=(o%=bo)-bo+1}else{for(u=a=c[l],i=1;a>=10;a/=10,i++);h=(s=(o%=bo)-bo+i)<0?0:_o(u/f[i-s-1]%10)}if(r=r||e<0||null!=c[l+1]||(s<0?u:u%f[i-s-1]),r=n<4?(h||r)&&(0==n||n==(t.s<0?3:2)):h>5||5==h&&(4==n||r||6==n&&(o>0?s>0?u/f[i-s]:0:c[l-1])%10&1||n==(t.s<0?8:7)),e<1||!c[0])return c.length=0,r?(e-=t.e+1,c[0]=f[(bo-e%bo)%bo],t.e=-e||0):c[0]=t.e=0,t;if(0==o?(c.length=l,a=1,l--):(c.length=l+1,a=f[bo-o],c[l]=s>0?_o(u/f[i-s]%f[s])*a:0),r)for(;;){if(0==l){for(o=1,s=c[0];s>=10;s/=10,o++);for(s=c[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(t.e++,c[0]==ko&&(c[0]=1));break}if(c[l]+=a,c[l]!=ko)break;c[l--]=0,a=1}for(o=c.length;0===c[--o];c.pop());}t.e>x?t.c=t.e=null:t.e<_&&(t.c=[t.e=0])}return t}function T(t){var e,n=t.e;return null===n?t.toString():(e=Lo(t.c),e=n<=d||n>=m?Oo(e,n):Ro(e,n,\"0\"),t.s<0?\"-\"+e:e)}return S.clone=t,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(t){var e,n;if(null!=t){if(\"object\"!=y(t))throw Error(xo+\"Object expected: \"+t);if(t.hasOwnProperty(e=\"DECIMAL_PLACES\")&&(Co(n=t[e],0,So,e),p=n),t.hasOwnProperty(e=\"ROUNDING_MODE\")&&(Co(n=t[e],0,8,e),v=n),t.hasOwnProperty(e=\"EXPONENTIAL_AT\")&&((n=t[e])&&n.pop?(Co(n[0],-So,0,e),Co(n[1],0,So,e),d=n[0],m=n[1]):(Co(n,-So,So,e),d=-(m=n<0?-n:n))),t.hasOwnProperty(e=\"RANGE\"))if((n=t[e])&&n.pop)Co(n[0],-So,-1,e),Co(n[1],1,So,e),_=n[0],x=n[1];else{if(Co(n,-So,So,e),!n)throw Error(xo+e+\" cannot be zero: \"+n);_=-(x=n<0?-n:n)}if(t.hasOwnProperty(e=\"CRYPTO\")){if((n=t[e])!==!!n)throw Error(xo+e+\" not true or false: \"+n);if(n){if(\"undefined\"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw E=!n,Error(xo+\"crypto unavailable\");E=n}else E=n}if(t.hasOwnProperty(e=\"MODULO_MODE\")&&(Co(n=t[e],0,9,e),k=n),t.hasOwnProperty(e=\"POW_PRECISION\")&&(Co(n=t[e],0,So,e),b=n),t.hasOwnProperty(e=\"FORMAT\")){if(\"object\"!=y(n=t[e]))throw Error(xo+e+\" not an object: \"+n);w=n}if(t.hasOwnProperty(e=\"ALPHABET\")){if(\"string\"!=typeof(n=t[e])||/^.?$|[+\\-.\\s]|(.).*\\1/.test(n))throw Error(xo+e+\" invalid: \"+n);N=\"0123456789\"==n.slice(0,10),I=n}}return{DECIMAL_PLACES:p,ROUNDING_MODE:v,EXPONENTIAL_AT:[d,m],RANGE:[_,x],CRYPTO:E,MODULO_MODE:k,POW_PRECISION:b,FORMAT:w,ALPHABET:I}},S.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!S.DEBUG)return!0;var e,n,r=t.c,i=t.e,o=t.s;t:if(\"[object Array]\"=={}.toString.call(r)){if((1===o||-1===o)&&i>=-So&&i<=So&&i===_o(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break t}if((e=(i+1)%bo)<1&&(e+=bo),String(r[0]).length==e){for(e=0;e<r.length;e++)if((n=r[e])<0||n>=ko||n!==_o(n))break t;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(xo+\"Invalid BigNumber: \"+t)},S.maximum=S.max=function(){return L(arguments,-1)},S.minimum=S.min=function(){return L(arguments,1)},S.random=(o=9007199254740992,s=Math.random()*o&2097151?function(){return _o(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,i,o,a=0,u=[],l=new S(g);if(null==t?t=p:Co(t,0,So),i=mo(t/bo),E)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));a<i;)(o=131072*e[a]+(e[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[a]=n[0],e[a+1]=n[1]):(u.push(o%1e14),a+=2);a=i/2}else{if(!crypto.randomBytes)throw E=!1,Error(xo+\"crypto unavailable\");for(e=crypto.randomBytes(i*=7);a<i;)(o=281474976710656*(31&e[a])+1099511627776*e[a+1]+4294967296*e[a+2]+16777216*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6])>=9e15?crypto.randomBytes(7).copy(e,a):(u.push(o%1e14),a+=7);a=i/7}if(!E)for(;a<i;)(o=s())<9e15&&(u[a++]=o%1e14);for(i=u[--a],t%=bo,i&&t&&(o=Io[bo-t],u[a]=_o(i/o)*o);0===u[a];u.pop(),a--);if(a<0)u=[r=0];else{for(r=-1;0===u[0];u.splice(0,1),r-=bo);for(a=1,o=u[0];o>=10;o/=10,a++);a<bo&&(r-=bo-a)}return l.e=r,l.c=u,l}),S.sum=function(){for(var t=1,e=arguments,n=new S(e[0]);t<e.length;)n=n.plus(e[t++]);return n},r=function(){var t=\"0123456789\";function e(t,e,n,r){for(var i,o,s=[0],a=0,u=t.length;a<u;){for(o=s.length;o--;s[o]*=e);for(s[0]+=r.indexOf(t.charAt(a++)),i=0;i<s.length;i++)s[i]>n-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}return function(r,i,o,s,a){var u,l,h,c,f,g,d,y,m=r.indexOf(\".\"),_=p,x=v;for(m>=0&&(c=b,b=0,r=r.replace(\".\",\"\"),g=(y=new S(i)).pow(r.length-m),b=c,y.c=e(Ro(Lo(g.c),g.e,\"0\"),10,o,t),y.e=y.c.length),h=c=(d=e(r,i,o,a?(u=I,t):(u=t,I))).length;0==d[--c];d.pop());if(!d[0])return u.charAt(0);if(m<0?--h:(g.c=d,g.e=h,g.s=s,d=(g=n(g,y,_,x,o)).c,f=g.r,h=g.e),m=d[l=h+_+1],c=o/2,f=f||l<0||null!=d[l+1],f=x<4?(null!=m||f)&&(0==x||x==(g.s<0?3:2)):m>c||m==c&&(4==x||f||6==x&&1&d[l-1]||x==(g.s<0?8:7)),l<1||!d[0])r=f?Ro(u.charAt(1),-_,u.charAt(0)):u.charAt(0);else{if(d.length=l,f)for(--o;++d[--l]>o;)d[l]=0,l||(++h,d=[1].concat(d));for(c=d.length;!d[--c];);for(m=0,r=\"\";m<=c;r+=u.charAt(d[m++]));r=Ro(r,h,u.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,i,o,s,a=0,u=t.length,l=e%No,h=e/No|0;for(t=t.slice();u--;)a=((i=l*(o=t[u]%No)+(r=h*o+(s=t[u]/No|0)*l)%No*No+a)/n|0)+(r/No|0)+h*s,t[u]=i%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,i,o,s,a){var u,l,h,c,f,g,p,v,d,y,m,_,x,E,k,b,w,I=r.s==i.s?1:-1,N=r.c,M=i.c;if(!(N&&N[0]&&M&&M[0]))return new S(r.s&&i.s&&(N?!M||N[0]!=M[0]:M)?N&&0==N[0]||!M?0*I:I/0:NaN);for(d=(v=new S(I)).c=[],I=o+(l=r.e-i.e)+1,a||(a=ko,l=Mo(r.e/bo)-Mo(i.e/bo),I=I/bo|0),h=0;M[h]==(N[h]||0);h++);if(M[h]>(N[h]||0)&&l--,I<0)d.push(1),c=!0;else{for(E=N.length,b=M.length,h=0,I+=2,(f=_o(a/(M[0]+1)))>1&&(M=t(M,f,a),N=t(N,f,a),b=M.length,E=N.length),x=b,m=(y=N.slice(0,b)).length;m<b;y[m++]=0);w=M.slice(),w=[0].concat(w),k=M[0],M[1]>=a/2&&k++;do{if(f=0,(u=e(M,y,b,m))<0){if(_=y[0],b!=m&&(_=_*a+(y[1]||0)),(f=_o(_/k))>1)for(f>=a&&(f=a-1),p=(g=t(M,f,a)).length,m=y.length;1==e(g,y,p,m);)f--,n(g,b<p?w:M,p,a),p=g.length,u=1;else 0==f&&(u=f=1),p=(g=M.slice()).length;if(p<m&&(g=[0].concat(g)),n(y,g,m,a),m=y.length,-1==u)for(;e(M,y,b,m)<1;)f++,n(y,b<m?w:M,m,a),m=y.length}else 0===u&&(f++,y=[0]);d[h++]=f,y[0]?y[m++]=N[x]||0:(y=[N[x]],m=1)}while((x++<E||null!=y[0])&&I--);c=null!=y[0],d[0]||d.splice(0,1)}if(a==ko){for(h=1,I=d[0];I>=10;I/=10,h++);C(v,o+(v.e=h+l*bo-1)+1,s,c)}else v.e=l,v.r=+c;return v}}(),a=/^(-?)0([xbo])(?=\\w[\\w.]*$)/i,u=/^([^.]+)\\.$/,l=/^\\.([^.]+)$/,h=/^-?(Infinity|NaN)$/,c=/^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g,i=function(t,e,n,r){var i,o=n?e:e.replace(c,\"\");if(h.test(o))t.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(a,function(t,e,n){return i=\"x\"==(n=n.toLowerCase())?16:\"b\"==n?2:8,r&&r!=i?t:e}),r&&(i=r,o=o.replace(u,\"$1\").replace(l,\"0.$1\")),e!=o))return new S(o,i);if(S.DEBUG)throw Error(xo+\"Not a\"+(r?\" base \"+r:\"\")+\" number: \"+e);t.s=null}t.c=t.e=null},f.absoluteValue=f.abs=function(){var t=new S(this);return t.s<0&&(t.s=1),t},f.comparedTo=function(t,e){return Po(this,new S(t,e))},f.decimalPlaces=f.dp=function(t,e){var n,r,i,o=this;if(null!=t)return Co(t,0,So),null==e?e=v:Co(e,0,8),C(new S(o),t+o.e+1,e);if(!(n=o.c))return null;if(r=((i=n.length-1)-Mo(this.e/bo))*bo,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},f.dividedBy=f.div=function(t,e){return n(this,new S(t,e),p,v)},f.dividedToIntegerBy=f.idiv=function(t,e){return n(this,new S(t,e),0,1)},f.exponentiatedBy=f.pow=function(t,e){var n,r,i,o,s,a,u,l,h=this;if((t=new S(t)).c&&!t.isInteger())throw Error(xo+\"Exponent not an integer: \"+T(t));if(null!=e&&(e=new S(e)),s=t.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!t.c||!t.c[0])return l=new S(Math.pow(+T(h),s?t.s*(2-To(t)):+T(t))),e?l.mod(e):l;if(a=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new S(NaN);(r=!a&&h.isInteger()&&e.isInteger())&&(h=h.mod(e))}else{if(t.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||s&&h.c[1]>=24e7:h.c[0]<8e13||s&&h.c[0]<=9999975e7)))return o=h.s<0&&To(t)?-0:0,h.e>-1&&(o=1/o),new S(a?1/o:o);b&&(o=mo(b/bo+2))}for(s?(n=new S(.5),a&&(t.s=1),u=To(t)):u=(i=Math.abs(+T(t)))%2,l=new S(g);;){if(u){if(!(l=l.times(h)).c)break;o?l.c.length>o&&(l.c.length=o):r&&(l=l.mod(e))}if(i){if(0===(i=_o(i/2)))break;u=i%2}else if(C(t=t.times(n),t.e+1,1),t.e>14)u=To(t);else{if(0==(i=+T(t)))break;u=i%2}h=h.times(h),o?h.c&&h.c.length>o&&(h.c.length=o):r&&(h=h.mod(e))}return r?l:(a&&(l=g.div(l)),e?l.mod(e):o?C(l,b,v,void 0):l)},f.integerValue=function(t){var e=new S(this);return null==t?t=v:Co(t,0,8),C(e,e.e+1,t)},f.isEqualTo=f.eq=function(t,e){return 0===Po(this,new S(t,e))},f.isFinite=function(){return!!this.c},f.isGreaterThan=f.gt=function(t,e){return Po(this,new S(t,e))>0},f.isGreaterThanOrEqualTo=f.gte=function(t,e){return 1===(e=Po(this,new S(t,e)))||0===e},f.isInteger=function(){return!!this.c&&Mo(this.e/bo)>this.c.length-2},f.isLessThan=f.lt=function(t,e){return Po(this,new S(t,e))<0},f.isLessThanOrEqualTo=f.lte=function(t,e){return-1===(e=Po(this,new S(t,e)))||0===e},f.isNaN=function(){return!this.s},f.isNegative=function(){return this.s<0},f.isPositive=function(){return this.s>0},f.isZero=function(){return!!this.c&&0==this.c[0]},f.minus=function(t,e){var n,r,i,o,s=this,a=s.s;if(e=(t=new S(t,e)).s,!a||!e)return new S(NaN);if(a!=e)return t.s=-e,s.plus(t);var u=s.e/bo,l=t.e/bo,h=s.c,c=t.c;if(!u||!l){if(!h||!c)return h?(t.s=-e,t):new S(c?s:NaN);if(!h[0]||!c[0])return c[0]?(t.s=-e,t):new S(h[0]?s:3==v?-0:0)}if(u=Mo(u),l=Mo(l),h=h.slice(),a=u-l){for((o=a<0)?(a=-a,i=h):(l=u,i=c),i.reverse(),e=a;e--;i.push(0));i.reverse()}else for(r=(o=(a=h.length)<(e=c.length))?a:e,a=e=0;e<r;e++)if(h[e]!=c[e]){o=h[e]<c[e];break}if(o&&(i=h,h=c,c=i,t.s=-t.s),(e=(r=c.length)-(n=h.length))>0)for(;e--;h[n++]=0);for(e=ko-1;r>a;){if(h[--r]<c[r]){for(n=r;n&&!h[--n];h[n]=e);--h[n],h[r]+=ko}h[r]-=c[r]}for(;0==h[0];h.splice(0,1),--l);return h[0]?P(t,h,l):(t.s=3==v?-1:1,t.c=[t.e=0],t)},f.modulo=f.mod=function(t,e){var r,i,o=this;return t=new S(t,e),!o.c||!t.s||t.c&&!t.c[0]?new S(NaN):!t.c||o.c&&!o.c[0]?new S(o):(9==k?(i=t.s,t.s=1,r=n(o,t,0,3),t.s=i,r.s*=i):r=n(o,t,0,k),(t=o.minus(r.times(t))).c[0]||1!=k||(t.s=o.s),t)},f.multipliedBy=f.times=function(t,e){var n,r,i,o,s,a,u,l,h,c,f,g,p,v,d,y=this,m=y.c,_=(t=new S(t,e)).c;if(!(m&&_&&m[0]&&_[0]))return!y.s||!t.s||m&&!m[0]&&!_||_&&!_[0]&&!m?t.c=t.e=t.s=null:(t.s*=y.s,m&&_?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=Mo(y.e/bo)+Mo(t.e/bo),t.s*=y.s,(u=m.length)<(c=_.length)&&(p=m,m=_,_=p,i=u,u=c,c=i),i=u+c,p=[];i--;p.push(0));for(v=ko,d=No,i=c;--i>=0;){for(n=0,f=_[i]%d,g=_[i]/d|0,o=i+(s=u);o>i;)n=((l=f*(l=m[--s]%d)+(a=g*l+(h=m[s]/d|0)*f)%d*d+p[o]+n)/v|0)+(a/d|0)+g*h,p[o--]=l%v;p[o]=n}return n?++r:p.splice(0,1),P(t,p,r)},f.negated=function(){var t=new S(this);return t.s=-t.s||null,t},f.plus=function(t,e){var n,r=this,i=r.s;if(e=(t=new S(t,e)).s,!i||!e)return new S(NaN);if(i!=e)return t.s=-e,r.minus(t);var o=r.e/bo,s=t.e/bo,a=r.c,u=t.c;if(!o||!s){if(!a||!u)return new S(i/0);if(!a[0]||!u[0])return u[0]?t:new S(a[0]?r:0*i)}if(o=Mo(o),s=Mo(s),a=a.slice(),i=o-s){for(i>0?(s=o,n=u):(i=-i,n=a),n.reverse();i--;n.push(0));n.reverse()}for((i=a.length)-(e=u.length)<0&&(n=u,u=a,a=n,e=i),i=0;e;)i=(a[--e]=a[e]+u[e]+i)/ko|0,a[e]=ko===a[e]?0:a[e]%ko;return i&&(a=[i].concat(a),++s),P(t,a,s)},f.precision=f.sd=function(t,e){var n,r,i,o=this;if(null!=t&&t!==!!t)return Co(t,1,So),null==e?e=v:Co(e,0,8),C(new S(o),t,e);if(!(n=o.c))return null;if(r=(i=n.length-1)*bo+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return t&&o.e+1>r&&(r=o.e+1),r},f.shiftedBy=function(t){return Co(t,-9007199254740991,wo),this.times(\"1e\"+t)},f.squareRoot=f.sqrt=function(){var t,e,r,i,o,s=this,a=s.c,u=s.s,l=s.e,h=p+4,c=new S(\"0.5\");if(1!==u||!a||!a[0])return new S(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+T(s)))||u==1/0?(((e=Lo(a)).length+l)%2==0&&(e+=\"0\"),u=Math.sqrt(+e),l=Mo((l+1)/2)-(l<0||l%2),r=new S(e=u==1/0?\"5e\"+l:(e=u.toExponential()).slice(0,e.indexOf(\"e\")+1)+l)):r=new S(u+\"\"),r.c[0])for((u=(l=r.e)+h)<3&&(u=0);;)if(o=r,r=c.times(o.plus(n(s,o,h,1))),Lo(o.c).slice(0,u)===(e=Lo(r.c)).slice(0,u)){if(r.e<l&&--u,\"9999\"!=(e=e.slice(u-3,u+1))&&(i||\"4999\"!=e)){+e&&(+e.slice(1)||\"5\"!=e.charAt(0))||(C(r,r.e+p+2,1),t=!r.times(r).eq(s));break}if(!i&&(C(o,o.e+p+2,0),o.times(o).eq(s))){r=o;break}h+=4,u+=4,i=1}return C(r,r.e+p+1,v,t)},f.toExponential=function(t,e){return null!=t&&(Co(t,0,So),t++),M(this,t,e,1)},f.toFixed=function(t,e){return null!=t&&(Co(t,0,So),t=t+this.e+1),M(this,t,e)},f.toFormat=function(t,e,n){var r,i=this;if(null==n)null!=t&&e&&\"object\"==y(e)?(n=e,e=null):t&&\"object\"==y(t)?(n=t,t=e=null):n=w;else if(\"object\"!=y(n))throw Error(xo+\"Argument not an object: \"+n);if(r=i.toFixed(t,e),i.c){var o,s=r.split(\".\"),a=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||\"\",h=s[0],c=s[1],f=i.s<0,g=f?h.slice(1):h,p=g.length;if(u&&(o=a,a=u,u=o,p-=o),a>0&&p>0){for(o=p%a||a,h=g.substr(0,o);o<p;o+=a)h+=l+g.substr(o,a);u>0&&(h+=l+g.slice(o)),f&&(h=\"-\"+h)}r=c?h+(n.decimalSeparator||\"\")+((u=+n.fractionGroupSize)?c.replace(new RegExp(\"\\\\d{\"+u+\"}\\\\B\",\"g\"),\"$&\"+(n.fractionGroupSeparator||\"\")):c):h}return(n.prefix||\"\")+r+(n.suffix||\"\")},f.toFraction=function(t){var e,r,i,o,s,a,u,l,h,c,f,p,d=this,y=d.c;if(null!=t&&(!(u=new S(t)).isInteger()&&(u.c||1!==u.s)||u.lt(g)))throw Error(xo+\"Argument \"+(u.isInteger()?\"out of range: \":\"not an integer: \")+T(u));if(!y)return new S(d);for(e=new S(g),h=r=new S(g),i=l=new S(g),p=Lo(y),s=e.e=p.length-d.e-1,e.c[0]=Io[(a=s%bo)<0?bo+a:a],t=!t||u.comparedTo(e)>0?s>0?e:h:u,a=x,x=1/0,u=new S(p),l.c[0]=0;c=n(u,e,0,1),1!=(o=r.plus(c.times(i))).comparedTo(t);)r=i,i=o,h=l.plus(c.times(o=h)),l=o,e=u.minus(c.times(o=e)),u=o;return o=n(t.minus(r),i,0,1),l=l.plus(o.times(h)),r=r.plus(o.times(i)),l.s=h.s=d.s,f=n(h,i,s*=2,v).minus(d).abs().comparedTo(n(l,r,s,v).minus(d).abs())<1?[h,i]:[l,r],x=a,f},f.toNumber=function(){return+T(this)},f.toPrecision=function(t,e){return null!=t&&Co(t,1,So),M(this,t,e,2)},f.toString=function(t){var e,n=this,i=n.s,o=n.e;return null===o?i?(e=\"Infinity\",i<0&&(e=\"-\"+e)):e=\"NaN\":(null==t?e=o<=d||o>=m?Oo(Lo(n.c),o):Ro(Lo(n.c),o,\"0\"):10===t&&N?e=Ro(Lo((n=C(new S(n),p+o+1,v)).c),n.e,\"0\"):(Co(t,2,I.length,\"Base\"),e=r(Ro(Lo(n.c),o,\"0\"),10,t,i,!0)),i<0&&n.c[0]&&(e=\"-\"+e)),e},f.valueOf=f.toJSON=function(){return T(this)},f._isBigNumber=!0,f[Symbol.toStringTag]=\"BigNumber\",f[Symbol.for(\"nodejs.util.inspect.custom\")]=f.valueOf,null!=e&&S.set(e),S}(),Do=function(t){function e(t){return i(this,e),r(this,e,[t])}return h(e,t),s(e)}(s(function t(e){i(this,t),u(this,\"key\",void 0),u(this,\"left\",null),u(this,\"right\",null),this.key=e})),Fo=s(function t(){i(this,t),u(this,\"size\",0),u(this,\"modificationCount\",0),u(this,\"splayCount\",0)},[{key:\"splay\",value:function(t){var e=this.root;if(null==e)return this.compare(t,t),-1;for(var n,r=null,i=null,o=null,s=null,a=e,u=this.compare;;)if((n=u(a.key,t))>0){var l=a.left;if(null==l)break;if((n=u(l.key,t))>0&&(a.left=l.right,l.right=a,null==(l=(a=l).left)))break;null==r?i=a:r.left=a,r=a,a=l}else{if(!(n<0))break;var h=a.right;if(null==h)break;if((n=u(h.key,t))<0&&(a.right=h.left,h.left=a,null==(h=(a=h).right)))break;null==o?s=a:o.right=a,o=a,a=h}return null!=o&&(o.right=a.left,a.left=s),null!=r&&(r.left=a.right,a.right=i),this.root!==a&&(this.root=a,this.splayCount++),n}},{key:\"splayMin\",value:function(t){for(var e=t,n=e.left;null!=n;){var r=n;e.left=r.right,r.right=e,n=(e=r).left}return e}},{key:\"splayMax\",value:function(t){for(var e=t,n=e.right;null!=n;){var r=n;e.right=r.left,r.left=e,n=(e=r).right}return e}},{key:\"_delete\",value:function(t){if(null==this.root)return null;if(0!=this.splay(t))return null;var e=this.root,n=e,r=e.left;if(this.size--,null==r)this.root=e.right;else{var i=e.right;(e=this.splayMax(r)).right=i,this.root=e}return this.modificationCount++,n}},{key:\"addNewRoot\",value:function(t,e){this.size++,this.modificationCount++;var n=this.root;null!=n?(e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t):this.root=t}},{key:\"_first\",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMin(t),this.root)}},{key:\"_last\",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMax(t),this.root)}},{key:\"clear\",value:function(){this.root=null,this.size=0,this.modificationCount++}},{key:\"has\",value:function(t){return this.validKey(t)&&0==this.splay(t)}},{key:\"defaultCompare\",value:function(){return function(t,e){return t<e?-1:t>e?1:0}}},{key:\"wrap\",value:function(){var t=this;return{getRoot:function(){return t.root},setRoot:function(e){t.root=e},getSize:function(){return t.size},getModificationCount:function(){return t.modificationCount},getSplayCount:function(){return t.splayCount},setSplayCount:function(e){t.splayCount=e},splay:function(e){return t.splay(e)},has:function(e){return t.has(e)}}}}]),qo=function(t){function e(t,n){var o;return i(this,e),u(o=r(this,e),\"root\",null),u(o,\"compare\",void 0),u(o,\"validKey\",void 0),u(o,Symbol.toStringTag,\"[object Set]\"),o.compare=null!=t?t:o.defaultCompare(),o.validKey=null!=n?n:function(t){return null!=t&&null!=t},o}return h(e,Fo),s(e,[{key:\"delete\",value:function(t){return!!this.validKey(t)&&null!=this._delete(t)}},{key:\"deleteAll\",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.delete(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:\"forEach\",value:function(t){for(var e,n=this[Symbol.iterator]();!(e=n.next()).done;)t(e.value,e.value,this)}},{key:\"add\",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new Do(t),e),this}},{key:\"addAndReturn\",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new Do(t),e),this.root.key}},{key:\"addAll\",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:\"isEmpty\",value:function(){return null==this.root}},{key:\"isNotEmpty\",value:function(){return null!=this.root}},{key:\"single\",value:function(){if(0==this.size)throw\"Bad state: No element\";if(this.size>1)throw\"Bad state: Too many element\";return this.root.key}},{key:\"first\",value:function(){if(0==this.size)throw\"Bad state: No element\";return this._first().key}},{key:\"last\",value:function(){if(0==this.size)throw\"Bad state: No element\";return this._last().key}},{key:\"lastBefore\",value:function(t){if(null==t)throw\"Invalid arguments(s)\";if(null==this.root)return null;if(this.splay(t)<0)return this.root.key;var e=this.root.left;if(null==e)return null;for(var n=e.right;null!=n;)n=(e=n).right;return e.key}},{key:\"firstAfter\",value:function(t){if(null==t)throw\"Invalid arguments(s)\";if(null==this.root)return null;if(this.splay(t)>0)return this.root.key;var e=this.root.right;if(null==e)return null;for(var n=e.left;null!=n;)n=(e=n).left;return e.key}},{key:\"retainAll\",value:function(t){var n,r=new e(this.compare,this.validKey),i=this.modificationCount,o=a(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(i!=this.modificationCount)throw\"Concurrent modification during iteration.\";this.validKey(s)&&0==this.splay(s)&&r.add(this.root.key)}}catch(t){o.e(t)}finally{o.f()}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}},{key:\"lookup\",value:function(t){return this.validKey(t)?0!=this.splay(t)?null:this.root.key:null}},{key:\"intersection\",value:function(t){var n,r=new e(this.compare,this.validKey),i=a(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.has(o)&&r.add(o)}}catch(t){i.e(t)}finally{i.f()}return r}},{key:\"difference\",value:function(t){var n,r=new e(this.compare,this.validKey),i=a(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.has(o)||r.add(o)}}catch(t){i.e(t)}finally{i.f()}return r}},{key:\"union\",value:function(t){var e=this.clone();return e.addAll(t),e}},{key:\"clone\",value:function(){var t=new e(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}},{key:\"copyNode\",value:function(t){if(null==t)return null;var e=new Do(t.key);return function t(e,n){var r,i;do{if(r=e.left,i=e.right,null!=r){var o=new Do(r.key);n.left=o,t(r,o)}if(null!=i){var s=new Do(i.key);n.right=s,e=i,n=s}}while(null!=i)}(t,e),e}},{key:\"toSet\",value:function(){return this.clone()}},{key:\"entries\",value:function(){return new Bo(this.wrap())}},{key:\"keys\",value:function(){return this[Symbol.iterator]()}},{key:\"values\",value:function(){return this[Symbol.iterator]()}},{key:Symbol.iterator,value:function(){return new Go(this.wrap())}}])}(),Vo=s(function t(e){i(this,t),u(this,\"tree\",void 0),u(this,\"path\",new Array),u(this,\"modificationCount\",null),u(this,\"splayCount\",void 0),this.tree=e,this.splayCount=e.getSplayCount()},[{key:Symbol.iterator,value:function(){return this}},{key:\"next\",value:function(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}},{key:\"current\",value:function(){if(!this.path.length)return null;var t=this.path[this.path.length-1];return this.getValue(t)}},{key:\"rebuildPath\",value:function(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}},{key:\"findLeftMostDescendent\",value:function(t){for(;null!=t;)this.path.push(t),t=t.left}},{key:\"moveNext\",value:function(){if(this.modificationCount!=this.tree.getModificationCount()){if(null==this.modificationCount){this.modificationCount=this.tree.getModificationCount();for(var t=this.tree.getRoot();null!=t;)this.path.push(t),t=t.left;return this.path.length>0}throw\"Concurrent modification during iteration.\"}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);var e=this.path[this.path.length-1],n=e.right;if(null!=n){for(;null!=n;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}}]),Go=function(t){function e(){return i(this,e),r(this,e,arguments)}return h(e,Vo),s(e,[{key:\"getValue\",value:function(t){return t.key}}])}(),Bo=function(t){function e(){return i(this,e),r(this,e,arguments)}return h(e,Vo),s(e,[{key:\"getValue\",value:function(t){return[t.key,t.key]}}])}(),Yo=function(t){return function(){return t}},zo=function(t){var e=t?function(e,n){return n.minus(e).abs().isLessThanOrEqualTo(t)}:Yo(!1);return function(t,n){return e(t,n)?0:t.comparedTo(n)}};function jo(t){var e=t?function(e,n,r,i,o){return e.exponentiatedBy(2).isLessThanOrEqualTo(i.minus(n).exponentiatedBy(2).plus(o.minus(r).exponentiatedBy(2)).times(t))}:Yo(!1);return function(t,n,r){var i=t.x,o=t.y,s=r.x,a=r.y,u=o.minus(a).times(n.x.minus(s)).minus(i.minus(s).times(n.y.minus(a)));return e(u,i,o,s,a)?0:u.comparedTo(0)}}var Xo=function(t){return t},Uo=function(t){if(t){var e=new qo(zo(t)),n=new qo(zo(t)),r=function(t,e){return e.addAndReturn(t)},i=function(t){return{x:r(t.x,e),y:r(t.y,n)}};return i({x:new Ao(0),y:new Ao(0)}),i}return Xo},Zo=function(t){return{set:function(t){Ho=Zo(t)},reset:function(){return Zo(t)},compare:zo(t),snap:Uo(t),orient:jo(t)}},Ho=Zo(),Wo=function(t,e){return t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y)},Jo=function(t,e){if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;var n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y}}},Ko=function(t,e){return t.x.times(e.y).minus(t.y.times(e.x))},Qo=function(t,e){return t.x.times(e.x).plus(t.y.times(e.y))},$o=function(t){return Qo(t,t).sqrt()},ts=function(t,e,n){var r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return Qo(i,r).div($o(i)).div($o(r))},es=function(t,e,n){return e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n}},ns=function(t,e,n){return e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))}},rs=function(){function t(e,n){i(this,t),u(this,\"point\",void 0),u(this,\"isLeft\",void 0),u(this,\"segment\",void 0),u(this,\"otherSE\",void 0),u(this,\"consumedBy\",void 0),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return s(t,[{key:\"link\",value:function(t){if(t.point===this.point)throw new Error(\"Tried to link already linked events\");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:\"checkForConsuming\",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:\"getAvailableLinkedEvents\",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:\"getLeftmostComparator\",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,a,u,l=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=l.point,a={x:o.x.minus(i.x),y:o.y.minus(i.y)},u={x:s.x.minus(i.x),y:s.y.minus(i.y)},Ko(u,a).div($o(u)).div($o(a))),cosine:ts(e.point,t.point,l.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),u=a.sine,l=a.cosine;return o.isGreaterThanOrEqualTo(0)&&u.isGreaterThanOrEqualTo(0)?s.isLessThan(l)?1:s.isGreaterThan(l)?-1:0:o.isLessThan(0)&&u.isLessThan(0)?s.isLessThan(l)?-1:s.isGreaterThan(l)?1:0:u.isLessThan(o)?-1:u.isGreaterThan(o)?1:0}}}],[{key:\"compare\",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:cs.compare(e.segment,n.segment))}},{key:\"comparePoints\",value:function(t,e){return t.x.isLessThan(e.x)?-1:t.x.isGreaterThan(e.x)?1:t.y.isLessThan(e.y)?-1:t.y.isGreaterThan(e.y)?1:0}}])}(),is=function(){function t(e){i(this,t),u(this,\"events\",void 0),u(this,\"poly\",void 0),u(this,\"_isExteriorRing\",void 0),u(this,\"_enclosingRing\",void 0),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return s(t,[{key:\"getGeom\",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==Ho.orient(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===Ho.orient(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,h=this.isExteriorRing()?e.length:-1,c=[],f=l;f!=h;f+=u)c.push([e[f].x.toNumber(),e[f].y.toNumber()]);return c}},{key:\"isExteriorRing\",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:\"enclosingRing\",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:\"_calcEnclosingRing\",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];rs.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;var s,a;if(o.ringOut!==i.ringOut)return(null===(s=o.ringOut)||void 0===s?void 0:s.enclosingRing())!==i.ringOut?i.ringOut:null===(a=i.ringOut)||void 0===a?void 0:a.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}],[{key:\"factory\",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],h=a.point,c=[];s=a,a=u,l.push(a),a.point!==h;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var g=l[0].point,p=l[l.length-1].point;throw new Error(\"Unable to complete output ring starting at [\".concat(g.x,\", \").concat(g.y,\"]. Last matching segment found ends at [\").concat(p.x,\", \").concat(p.y,\"].\"))}if(1===f.length){u=f[0].otherSE;break}for(var v=null,d=0,y=c.length;d<y;d++)if(c[d].point===a.point){v=d;break}if(null===v){c.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=c.splice(v)[0],x=l.splice(_.index);x.unshift(x[0].otherSE),n.push(new t(x.reverse()))}n.push(new t(l))}}return n}}])}(),os=s(function t(e){i(this,t),u(this,\"exteriorRing\",void 0),u(this,\"interiorRings\",void 0),this.exteriorRing=e,e.poly=this,this.interiorRings=[]},[{key:\"addInterior\",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:\"getGeom\",value:function(){var t=this.exteriorRing.getGeom();if(null===t)return null;for(var e=[t],n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();null!==i&&e.push(i)}return e}}]),ss=s(function t(e){i(this,t),u(this,\"rings\",void 0),u(this,\"polys\",void 0),this.rings=e,this.polys=this._composePolys(e)},[{key:\"getGeom\",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:\"_composePolys\",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new os(i));else{var o,s=i.enclosingRing();null!=s&&s.poly||e.push(new os(s)),null==s||null===(o=s.poly)||void 0===o||o.addInterior(i)}}return e}}]),as=s(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cs.compare;i(this,t),u(this,\"queue\",void 0),u(this,\"tree\",void 0),u(this,\"segments\",void 0),this.queue=e,this.tree=new qo(n),this.segments=[]},[{key:\"process\",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);var r=e,i=e;do{r=this.tree.lastBefore(r)}while(null!=r&&null!=r.consumedBy);do{i=this.tree.firstAfter(i)}while(null!=i&&null!=i.consumedBy);if(t.isLeft){var o=null;if(r){var s=r.getIntersection(e);if(null!==s&&(e.isAnEndpoint(s)||(o=s),!r.isAnEndpoint(s)))for(var a=this._splitSafely(r,s),u=0,l=a.length;u<l;u++)n.push(a[u])}var h=null;if(i){var c=i.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(h=c),!i.isAnEndpoint(c)))for(var f=this._splitSafely(i,c),g=0,p=f.length;g<p;g++)n.push(f[g])}if(null!==o||null!==h){var v=null;v=null===o?h:null===h?o:rs.comparePoints(o,h)<=0?o:h,this.queue.delete(e.rightSE),n.push(e.rightSE);for(var d=e.split(v),y=0,m=d.length;y<m;y++)n.push(d[y])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){var _=r.getIntersection(i);if(null!==_){if(!r.isAnEndpoint(_))for(var x=this._splitSafely(r,_),E=0,k=x.length;E<k;E++)n.push(x[E]);if(!i.isAnEndpoint(_))for(var b=this._splitSafely(i,_),w=0,I=b.length;w<I;w++)n.push(b[w])}}this.tree.delete(e)}return n}},{key:\"_splitSafely\",value:function(t,e){this.tree.delete(t);var n=t.rightSE;this.queue.delete(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.add(t),r}}]),us=new(s(function t(){i(this,t),u(this,\"type\",void 0),u(this,\"numMultiPolys\",void 0)},[{key:\"run\",value:function(t,e,n){us.type=t;for(var r=[new ps(e,!0)],i=0,o=n.length;i<o;i++)r.push(new ps(n[i],!1));if(us.numMultiPolys=r.length,\"difference\"===us.type)for(var s=r[0],a=1;a<r.length;)null!==Jo(r[a].bbox,s.bbox)?a++:r.splice(a,1);if(\"intersection\"===us.type)for(var u=0,l=r.length;u<l;u++)for(var h=r[u],c=u+1,f=r.length;c<f;c++)if(null===Jo(h.bbox,r[c].bbox))return[];for(var g=new qo(rs.compare),p=0,v=r.length;p<v;p++)for(var d=r[p].getSweepEvents(),y=0,m=d.length;y<m;y++)g.add(d[y]);var _=new as(g),x=null;for(0!=g.size&&(x=g.first(),g.delete(x));x;){for(var E=_.process(x),k=0,b=E.length;k<b;k++){var w=E[k];void 0===w.consumedBy&&g.add(w)}0!=g.size?(x=g.first(),g.delete(x)):x=null}Ho.reset();var I=is.factory(_.segments);return new ss(I).getGeom()}}])),ls=us,hs=0,cs=function(){function t(e,n,r,o){i(this,t),u(this,\"id\",void 0),u(this,\"leftSE\",void 0),u(this,\"rightSE\",void 0),u(this,\"rings\",void 0),u(this,\"windings\",void 0),u(this,\"ringOut\",void 0),u(this,\"consumedBy\",void 0),u(this,\"prev\",void 0),u(this,\"_prevInResult\",void 0),u(this,\"_beforeState\",void 0),u(this,\"_afterState\",void 0),u(this,\"_isInResult\",void 0),this.id=++hs,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=o}return s(t,[{key:\"replaceRightSE\",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:\"bbox\",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(e)?t:e},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(e)?t:e}}}},{key:\"vector\",value:function(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}},{key:\"isAnEndpoint\",value:function(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}},{key:\"comparePoint\",value:function(t){return Ho.orient(this.leftSE.point,t,this.rightSE.point)}},{key:\"getIntersection\",value:function(t){var e=this.bbox(),n=t.bbox(),r=Jo(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Wo(e,s)&&0===this.comparePoint(s),l=Wo(n,i)&&0===t.comparePoint(i),h=Wo(e,a)&&0===this.comparePoint(a),c=Wo(n,o)&&0===t.comparePoint(o);if(l&&u)return c&&!h?o:!c&&h?a:null;if(l)return h&&i.x.eq(a.x)&&i.y.eq(a.y)?null:i;if(u)return c&&o.x.eq(s.x)&&o.y.eq(s.y)?null:s;if(c&&h)return null;if(c)return o;if(h)return a;var f=function(t,e,n,r){if(e.x.isZero())return ns(n,r,t.x);if(r.x.isZero())return ns(t,e,n.x);if(e.y.isZero())return es(n,r,t.y);if(r.y.isZero())return es(t,e,n.y);var i=Ko(e,r);if(i.isZero())return null;var o={x:n.x.minus(t.x),y:n.y.minus(t.y)},s=Ko(o,e).div(i),a=Ko(o,r).div(i),u=t.x.plus(a.times(e.x)),l=n.x.plus(s.times(r.x)),h=t.y.plus(a.times(e.y)),c=n.y.plus(s.times(r.y));return{x:u.plus(l).div(2),y:h.plus(c).div(2)}}(i,this.vector(),s,t.vector());return null===f?null:Wo(r,f)?Ho.snap(f):null}},{key:\"split\",value:function(e){var n=[],r=void 0!==e.events,i=new rs(e,!0),o=new rs(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return rs.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),rs.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:\"swapEvents\",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:\"consume\",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],h=r.windings[a],c=n.rings.indexOf(l);-1===c?(n.rings.push(l),n.windings.push(h)):n.windings[c]+=h}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:\"prevInResult\",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:\"beforeState\",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:\"afterState\",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var l=[],h=[],c=0,f=e.length;c<f;c++)if(0!==n[c]){var g=e[c],p=g.poly;if(-1===h.indexOf(p))if(g.isExterior)l.push(p);else{-1===h.indexOf(p)&&h.push(p);var v=l.indexOf(g.poly);-1!==v&&l.splice(v,1)}}for(var d=0,y=l.length;d<y;d++){var m=l[d].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:\"isInResult\",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(ls.type){case\"union\":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case\"intersection\":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===ls.numMultiPolys&&i<o;break;case\"xor\":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case\"difference\":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e)}return this._isInResult}}],[{key:\"compare\",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o.isLessThan(n))return 1;if(i.isLessThan(r))return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n.isLessThan(r)){if(a.isLessThan(s)&&a.isLessThan(u))return 1;if(a.isGreaterThan(s)&&a.isGreaterThan(u))return-1;var h=t.comparePoint(e.leftSE.point);if(h<0)return 1;if(h>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(n.isGreaterThan(r)){if(s.isLessThan(a)&&s.isLessThan(l))return-1;if(s.isGreaterThan(a)&&s.isGreaterThan(l))return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var g=t.comparePoint(e.rightSE.point);return g<0?1:g>0?-1:1}if(s.isLessThan(a))return-1;if(s.isGreaterThan(a))return 1;if(i.isLessThan(o)){var p=e.comparePoint(t.rightSE.point);if(0!==p)return p}if(i.isGreaterThan(o)){var v=t.comparePoint(e.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(!i.eq(o)){var d=u.minus(s),y=i.minus(n),m=l.minus(a),_=o.minus(r);if(d.isGreaterThan(y)&&m.isLessThan(_))return 1;if(d.isLessThan(y)&&m.isGreaterThan(_))return-1}return i.isGreaterThan(o)?1:i.isLessThan(o)||u.isLessThan(l)?-1:u.isGreaterThan(l)?1:t.id<e.id?-1:t.id>e.id?1:0}},{key:\"fromRing\",value:function(e,n,r){var i,o,s,a=rs.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error(\"Tried to create degenerate segment at [\".concat(e.x,\", \").concat(e.y,\"]\"));i=n,o=e,s=-1}return new t(new rs(i,!0),new rs(o,!1),[r],[s])}}])}(),fs=s(function t(e,n,r){if(i(this,t),u(this,\"poly\",void 0),u(this,\"isExterior\",void 0),u(this,\"segments\",void 0),u(this,\"bbox\",void 0),!Array.isArray(e)||0===e.length)throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");if(this.poly=n,this.isExterior=r,this.segments=[],\"number\"!=typeof e[0][0]||\"number\"!=typeof e[0][1])throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");var o=Ho.snap({x:new Ao(e[0][0]),y:new Ao(e[0][1])});this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,l=e.length;a<l;a++){if(\"number\"!=typeof e[a][0]||\"number\"!=typeof e[a][1])throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");var h=Ho.snap({x:new Ao(e[a][0]),y:new Ao(e[a][1])});h.x.eq(s.x)&&h.y.eq(s.y)||(this.segments.push(cs.fromRing(s,h,this)),h.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=h.x),h.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=h.y),h.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=h.x),h.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=h.y),s=h)}o.x.eq(s.x)&&o.y.eq(s.y)||this.segments.push(cs.fromRing(s,o,this))},[{key:\"getSweepEvents\",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),gs=s(function t(e,n){if(i(this,t),u(this,\"multiPoly\",void 0),u(this,\"exteriorRing\",void 0),u(this,\"interiorRings\",void 0),u(this,\"bbox\",void 0),!Array.isArray(e))throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");this.exteriorRing=new fs(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=e.length;r<o;r++){var s=new fs(e[r],this,!1);s.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=n},[{key:\"getSweepEvents\",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),ps=s(function t(e,n){if(i(this,t),u(this,\"isSubject\",void 0),u(this,\"polys\",void 0),u(this,\"bbox\",void 0),!Array.isArray(e))throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");try{\"number\"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:new Ao(Number.POSITIVE_INFINITY),y:new Ao(Number.POSITIVE_INFINITY)},ur:{x:new Ao(Number.NEGATIVE_INFINITY),y:new Ao(Number.NEGATIVE_INFINITY)}};for(var r=0,o=e.length;r<o;r++){var s=new gs(e[r],this);s.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=n},[{key:\"getSweepEvents\",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),vs=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ls.run(\"union\",t,n)},ds=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ls.run(\"intersection\",t,n)},ys=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ls.run(\"difference\",t,n)},ms=Ho.set,_s=Object.freeze({__proto__:null,difference:ys,intersection:ds,setPrecision:ms,union:vs,xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ls.run(\"xor\",t,n)}});function xs(t){if(!t)throw new Error(\"geojson is required\");var e=[];return _t(t,function(t){e.push(t)}),P(e)}function Es(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=J(t),i=J(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function ks(t,e){var n,r,i=(e=e||{}).threshold||1e4,o=e.p||2,s=null!=(n=e.binary)&&n,a=e.alpha||-1,u=null!=(r=e.standardization)&&r,l=[];pt(t,function(t){l.push(si(t))});for(var h=[],c=0;c<l.length;c++)h[c]=[];for(var f=0;f<l.length;f++)for(var g=f;g<l.length;g++){f===g&&(h[f][g]=0);var p=Es(l[f],l[g],o);h[f][g]=p,h[g][f]=p}for(var v=0;v<l.length;v++)for(var d=0;d<l.length;d++){var y=h[v][d];0!==y&&(h[v][d]=s?y<=i?1:0:y<=i?Math.pow(y,a):0)}if(u)for(var m=0;m<l.length;m++)for(var _=h[m].reduce(function(t,e){return t+e},0),x=0;x<l.length;x++)h[m][x]=h[m][x]/_;return h}function bs(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e<0,o=z(Math.abs(e),r.units,\"meters\");i&&(o=-Math.abs(o));var s=J(t),a=function(t,e,n,r){var i=e/(r=void 0===r?_:Number(r)),o=t[0]*Math.PI/180,s=Y(t[1]),a=Y(n),u=i*Math.cos(a),l=s+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var h=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),c=Math.abs(h)>1e-11?u/h:Math.cos(s);return[(180*(o+i*Math.sin(a)/c)/Math.PI+540)%360-180,180*l/Math.PI]}(s,o,n);return a[0]+=a[0]-s[0]>180?-360:s[0]-a[0]>180?360:0,w(a,r.properties)}function ws(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=J(t),i=J(e);return i[0]+=i[0]-r[0]>180?-360:r[0]-i[0]>180?360:0,z(function(t,e,n){var r=n=void 0===n?_:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=Math.abs(u)>1e-11?s/u:Math.cos(i);return Math.sqrt(s*s+l*l*a*a)*r}(r,i),\"meters\",n.units)}function Is(t,e,n){if(!U(n=n||{}))throw new Error(\"options is invalid\");var r=n.pivot,i=n.mutate;if(!t)throw new Error(\"geojson is required\");if(null==e||isNaN(e))throw new Error(\"angle is required\");if(0===e)return t;var o=null!=r?r:si(t);return!1!==i&&void 0!==i||(t=wi(t)),ht(t,function(t){var n=ut(o,t)+e,r=ws(o,t),i=K(bs(o,r,n));t[0]=i[0],t[1]=i[1]}),t}function Ns(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||\"kilometers\",s=r.angle||0,a=r.pivot||t,u=r.properties||{};if(!t)throw new Error(\"center is required\");if(!e)throw new Error(\"xSemiAxis is required\");if(!n)throw new Error(\"ySemiAxis is required\");if(!U(r))throw new Error(\"options must be an object\");if(!X(i))throw new Error(\"steps must be a number\");if(!X(s))throw new Error(\"angle must be a number\");var l=J(t);if(\"degrees\"!==o){var h=bs(t,e,90,{units:o}),c=bs(t,n,0,{units:o});e=J(h)[0]-l[0],n=J(c)[1]-l[1]}for(var f=[],g=0;g<i;g+=1){var p=-360*g/i,v=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Ss(p),2)),d=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Ss(p),2));if(p<-90&&p>=-270&&(v=-v),p<-180&&p>=-360&&(d=-d),\"degrees\"===o){var y=Y(s),m=v*Math.cos(y)+d*Math.sin(y),_=d*Math.cos(y)-v*Math.sin(y);v=m,d=_}f.push([v+l[0],d+l[1]])}return f.push(f[0]),\"degrees\"===o?N([f],u):Is(N([f],u),s,{pivot:a})}function Ss(t){var e=t*Math.PI/180;return Math.tan(e)}function Ms(t){return qt(Ot(t))}function Ls(t){var e=[];return\"FeatureCollection\"===t.type?pt(t,function(t){ht(t,function(n){e.push(w(n,t.properties))})}):\"Feature\"===t.type?ht(t,function(n){e.push(w(n,t.properties))}):ht(t,function(t){e.push(w(t))}),P(e)}var Ps=Math.PI/180,Cs=180/Math.PI,Ts=function(t,e){this.lon=t,this.lat=e,this.x=Ps*t,this.y=Ps*e};Ts.prototype.view=function(){return String(this.lon).slice(0,4)+\",\"+String(this.lat).slice(0,4)},Ts.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Ts(e,t)};var Os=function(){this.coords=[],this.length=0};Os.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Rs=function(t){this.properties=t||{},this.geometries=[]};Rs.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:\"LineString\",coordinates:null},type:\"Feature\",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:\"LineString\",coordinates:this.geometries[0].coords},type:\"Feature\",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:\"MultiLineString\",coordinates:t},type:\"Feature\",properties:this.properties}},Rs.prototype.wkt=function(){for(var t=\"\",e=\"LINESTRING(\",n=function(t){e+=t[0]+\" \"+t[1]+\",\"},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return\"LINESTRING(empty)\";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+\")\"}return t};var As=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error(\"GreatCircle constructor expects two args: start and end objects with x and y properties\");if(!e||void 0===e.x||void 0===e.y)throw new Error(\"GreatCircle constructor expects two args: start and end objects with x and y properties\");this.start=new Ts(t.x,t.y),this.end=new Ts(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error(\"it appears \"+t.view()+\" and \"+e.view()+\" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite\");if(isNaN(this.g))throw new Error(\"could not calculate great circle between \"+t+\" and \"+e)};function Ds(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(yt(t,function(t){n.push(t.coordinates)}),n.length<2)throw new Error(\"Must specify at least 2 geometries\");var r=ds.apply(_s,[n[0]].concat(v(n.slice(1))));return 0===r.length?null:1===r.length?N(r[0],e.properties):O(r,e.properties)}function Fs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=JSON.stringify(n.properties||{}),i=p(t,4),o=i[0],s=i[1],a=i[2],u=i[3],l=(s+u)/2,h=(o+a)/2,c=2*e/at([o,l],[a,l],n)*(a-o),f=2*e/at([h,s],[h,u],n)*(u-s),g=c/2,v=2*g,d=Math.sqrt(3)/2*f,y=a-o,m=u-s,_=.75*v,x=d,E=(y-v)/(v-g/2),k=Math.floor(E),b=(k*_-g/2-y)/2-g/2+_/2,w=Math.floor((m-d)/d),I=(m-w*d)/2,N=w*d-m>d/2;N&&(I-=d/4);for(var S=[],M=[],L=0;L<6;L++){var C=2*Math.PI/6*L;S.push(Math.cos(C)),M.push(Math.sin(C))}for(var T=[],O=0;O<=k;O++)for(var R=0;R<=w;R++){var A=O%2==1;if(!(0===R&&A||0===R&&N)){var D=O*_+o-b,F=R*x+s+I;if(A&&(F-=d/2),!0===n.triangles)Vs([D,F],c/2,f/2,JSON.parse(r),S,M).forEach(function(t){n.mask?Ds(P([n.mask,t]))&&T.push(t):T.push(t)});else{var q=qs([D,F],c/2,f/2,JSON.parse(r),S,M);n.mask?Ds(P([n.mask,q]))&&T.push(q):T.push(q)}}}return P(T)}function qs(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+n*o[a];s.push([u,l])}return s.push(s[0].slice()),N([s],r)}function Vs(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(N([u],r))}return s}function Gs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mask&&!n.units&&(n.units=\"kilometers\");for(var r=[],i=t[0],o=t[1],s=t[2],a=t[3],u=e/at([i,o],[s,o],n)*(s-i),l=e/at([i,o],[i,a],n)*(a-o),h=s-i,c=a-o,f=Math.floor(h/u),g=(c-Math.floor(c/l)*l)/2,p=i+(h-f*u)/2;p<=s;){for(var v=o+g;v<=a;){var d=w([p,v],n.properties);n.mask?Mn(d,n.mask)&&r.push(d):r.push(d),v+=l}p+=u}return P(r)}function Bs(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[],o=t[0],s=t[1],a=t[2],u=t[3],l=a-o,h=z(e,r.units,\"degrees\"),c=u-s,f=z(n,r.units,\"degrees\"),g=Math.floor(Math.abs(l)/h),p=Math.floor(Math.abs(c)/f),v=(c-p*f)/2,d=o+(l-g*h)/2,y=0;y<g;y++){for(var m=s+v,_=0;_<p;_++){var x=N([[[d,m],[d,m+f],[d+h,m+f],[d+h,m],[d,m]]],r.properties);r.mask?Te(r.mask,x)&&i.push(x):i.push(x),m+=f}d+=h}return P(i)}function Ys(t,e){return Bs(t,e,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function zs(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=e/at([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/at([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,c=null;s%2==0&&u%2==0?(h=N([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),c=N([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)):s%2==0&&u%2==1?(h=N([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties),c=N([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties)):u%2==0&&s%2==1?(h=N([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties),c=N([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(h=N([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),c=N([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)),n.mask?(Ds(P([n.mask,h]))&&r.push(h),Ds(P([n.mask,c]))&&r.push(c)):(r.push(h),r.push(c)),l+=o,u++}s++,a+=i}return P(r)}function js(t,e,n){return t<e?(n-t)/(e-t):(t-n)/(t-e)}function Xs(t,e,n,r){var i;return n>r&&(i=n,n=r,r=i),t<e?t<n?(n-t)/(e-t):(r-t)/(e-t):t>r?(t-r)/(t-e):(t-n)/(t-e)}function Us(t,e,n,r){return t<e?(n-t)/(e-t):(t-r)/(t-e)}function Zs(t,e,n,r){return t<e?(r-t)/(e-t):(t-n)/(t-e)}function Hs(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function Ws(t,e,n,r){var i=[];return t.polygons.forEach(function(t){t.forEach(function(t){t[0]+=e,t[1]+=n}),r.linearRing&&t.push(t[0]),i.push(t)}),i}function Js(t,e,n,r){return 0===n?(t+=1,e+=r[0][1]):1===n?t+=r[0][0]:2===n?e+=r[0][1]:3===n&&(t+=r[0][0],e+=1),[t,e]}function Ks(t,e,n){return 0===n?t++:1===n||(2===n?e++:3===n&&(t++,e++)),[t,e]}function Qs(t,e,n,r,i){var o=r,s=i,a=0,u=0;if(this.x=e,this.y=n,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===r&&1===i)this.lowerBound=Math.min(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]),this.upperBound=Math.max(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]);else{if(r>1){for(;0!==o;)o>>=1,a++;r===1<<a-1&&a--,o=1<<a-1}if(i>1){for(;0!==s;)s>>=1,u++;i===1<<u-1&&u--,s=1<<u-1}this.childA=new Qs(t,e,n,o,s),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,r-o>0&&(this.childB=new Qs(t,e+o,n,r-o,s),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),i-s>0&&(this.childC=new Qs(t,e+o,n+s,r-o,i-s),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),i-s>0&&(this.childD=new Qs(t,e,n+s,o,i-s),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function $s(t){var e,n;if(!t)throw new Error(\"data is required\");if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error(\"data must be scalar field, i.e. array of arrays\");if(t.length<2)throw new Error(\"data must contain at least two rows\");if((n=t[0].length)<2)throw new Error(\"data must contain at least two columns\");for(e=1;e<t.length;e++){if(!Array.isArray(t[e]))throw new Error(\"Row \"+e+\" is not an array\");if(t[e].length!=n)throw new Error(\"unequal row lengths detected, please provide a regular grid\")}this.data=t,this.root=new Qs(t,0,0,t[0].length-1,t.length-1)}function ta(t,e,n){var r,i,o,s=!1,a=!1,u=null,l=null,h=null,c=null,f=null,g=[];if(!t)throw new Error(\"data is required\");if(null==e)throw new Error(\"threshold is required\");if(n&&\"object\"!==y(n))throw new Error(\"options must be an object\");if(r=function(t){var e,n,r,i,o;for(i=new Hs,t=t||{},o=Object.keys(i),e=0;e<o.length;e++)null!=(r=t[n=o[e]])&&(i[n]=r);return i.polygons_full=!i.polygons,i.interpolate=js,i}(n),t instanceof $s)u=t,l=t.root,h=t.data,r.noQuadTree||(s=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error(\"input is neither array of arrays nor object retrieved from 'QuadTree()'\");h=t}if(Array.isArray(e)){for(a=!0,r.noQuadTree||(s=!0),i=0;i<e.length;i++)if(isNaN(+e[i]))throw new Error(\"threshold[\"+i+\"] is not a number\")}else{if(isNaN(+e))throw new Error(\"threshold must be a number or array of numbers\");e=[e]}return s&&!l&&(u=new $s(h),l=u.root,h=u.data),r.verbose&&(r.polygons?console.log(\"MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell\"):console.log(\"MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid\"),a&&console.log(\"MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold\")),e.forEach(function(t,e){if(f=[],r.threshold=t,r.verbose&&console.log(\"MarchingSquaresJS-isoLines: computing iso lines for threshold \"+t),r.polygons)if(s)l.cellsBelowThreshold(r.threshold,!0).forEach(function(t){f=f.concat(Ws(ea(h,t.x,t.y,r),t.x,t.y,r))});else for(o=0;o<h.length-1;++o)for(e=0;e<h[0].length-1;++e)f=f.concat(Ws(ea(h,e,o,r),e,o,r));else{for(c=[],e=0;e<h[0].length-1;++e)c[e]=[];if(s)l.cellsBelowThreshold(r.threshold,!1).forEach(function(t){c[t.x][t.y]=ea(h,t.x,t.y,r)});else for(e=0;e<h[0].length-1;++e)for(o=0;o<h.length-1;++o)c[e][o]=ea(h,e,o,r);f=function(t,e,n){var r,i,o,s,a,u,l,h,c,f,g,p,v,d,m,_=[],x=t.length-1,E=t[0].length-1,k=[\"right\",\"bottom\",\"left\",\"top\"],b=[0,-1,0,1],w=[-1,0,1,0],I={bottom:1,left:2,top:3,right:0};return n.noFrame||function(t,e){var n,r,i,o,s;for(n=!0,r=t[0].length,i=t.length,s=0;s<i;s++)if(t[s][0]>=e||t[s][r-1]>=e){n=!1;break}if(n&&(t[i-1][0]>=e||t[i-1][r-1]>=e)&&(n=!1),n)for(o=0;o<r-1;o++)if(t[0][o]>=e||t[i-1][o]>e){n=!1;break}return n}(t,n.threshold)&&(n.linearRing?_.push([[0,0],[0,x],[E,x],[E,0],[0,0]]):_.push([[0,0],[0,x],[E,x],[E,0]])),e.forEach(function(t,N){t.forEach(function(t,S){for(r=null,i=0;i<4;i++)if(r=k[i],\"object\"===y(t.edges[r])){for(a=[],o=t.edges[r],u=r,l=N,h=S,c=!1,f=[N+o.path[0][0],S+o.path[0][1]],a.push(f);!c&&\"object\"===y((s=e[l][h]).edges[u]);)if(o=s.edges[u],delete s.edges[u],(g=o.path[1])[0]+=l,g[1]+=h,a.push(g),u=o.move.enter,l+=o.move.x,h+=o.move.y,void 0===e[l]||void 0===e[l][h]){if(!n.linearRing)break;if(p=0,v=0,l===E?(l--,p=0):l<0?(l++,p=2):h===x?(h--,p=3):h<0&&(h++,p=1),l===N&&h===S&&p===I[r]){c=!0,u=r;break}for(;;){if(d=!1,v>4)throw new Error(\"Direction change counter overflow! This should never happen!\");if(void 0!==e[l]&&void 0!==e[l][h]&&(s=e[l][h],m=k[p],\"object\"===y(s.edges[m]))){o=s.edges[m],a.push(Js(l,h,p,o.path)),u=m,d=!0;break}if(d)break;if(a.push(Ks(l,h,p)),h+=w[p],void 0!==e[l+=b[p]]&&void 0!==e[l][h]||(0===p&&h<0||1===p&&l<0||2===p&&h===x||3===p&&l===E)&&(l-=b[p],h-=w[p],p=(p+1)%4,v++),l===N&&h===S&&p===I[r]){c=!0,u=r;break}}}!n.linearRing||a[a.length-1][0]===f[0]&&a[a.length-1][1]===f[1]||a.push(f),_.push(a)}})}),_}(h,c,r)}a?g.push(f):g=f,\"function\"==typeof r.successCallback&&r.successCallback(g,t)}),g}function ea(t,e,n,r){var i,o,s,a,u,l,h=0,c=t[n+1][e],f=t[n+1][e+1],g=t[n][e+1],p=t[n][e],v=r.threshold;if(!(isNaN(p)||isNaN(g)||isNaN(f)||isNaN(c))){switch(h|=c>=v?8:0,h|=f>=v?4:0,h|=g>=v?2:0,l={cval:h=+(h|=p>=v?1:0),polygons:[],edges:{},x0:p,x1:g,x2:f,x3:c},h){case 0:r.polygons&&l.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:i=r.interpolate(p,c,v),a=r.interpolate(p,g,v),r.polygons_full&&(l.edges.left={path:[[0,i],[a,0]],move:{x:0,y:-1,enter:\"top\"}}),r.polygons&&l.polygons.push([[0,0],[0,i],[a,0]]);break;case 13:a=r.interpolate(p,g,v),o=r.interpolate(g,f,v),r.polygons_full&&(l.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:\"left\"}}),r.polygons&&l.polygons.push([[a,0],[1,o],[1,0]]);break;case 11:o=r.interpolate(g,f,v),s=r.interpolate(c,f,v),r.polygons_full&&(l.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:\"bottom\"}}),r.polygons&&l.polygons.push([[1,o],[s,1],[1,1]]);break;case 7:i=r.interpolate(p,c,v),s=r.interpolate(c,f,v),r.polygons_full&&(l.edges.top={path:[[s,1],[0,i]],move:{x:-1,y:0,enter:\"right\"}}),r.polygons&&l.polygons.push([[s,1],[0,i],[0,1]]);break;case 1:i=r.interpolate(p,c,v),a=r.interpolate(p,g,v),r.polygons_full&&(l.edges.bottom={path:[[a,0],[0,i]],move:{x:-1,y:0,enter:\"right\"}}),r.polygons&&l.polygons.push([[a,0],[0,i],[0,1],[1,1],[1,0]]);break;case 2:a=r.interpolate(p,g,v),o=r.interpolate(g,f,v),r.polygons_full&&(l.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:\"top\"}}),r.polygons&&l.polygons.push([[0,0],[0,1],[1,1],[1,o],[a,0]]);break;case 4:o=r.interpolate(g,f,v),s=r.interpolate(c,f,v),r.polygons_full&&(l.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:\"left\"}}),r.polygons&&l.polygons.push([[0,0],[0,1],[s,1],[1,o],[1,0]]);break;case 8:i=r.interpolate(p,c,v),s=r.interpolate(c,f,v),r.polygons_full&&(l.edges.left={path:[[0,i],[s,1]],move:{x:0,y:1,enter:\"bottom\"}}),r.polygons&&l.polygons.push([[0,0],[0,i],[s,1],[1,1],[1,0]]);break;case 12:i=r.interpolate(p,c,v),o=r.interpolate(g,f,v),r.polygons_full&&(l.edges.left={path:[[0,i],[1,o]],move:{x:1,y:0,enter:\"left\"}}),r.polygons&&l.polygons.push([[0,0],[0,i],[1,o],[1,0]]);break;case 9:a=r.interpolate(p,g,v),s=r.interpolate(c,f,v),r.polygons_full&&(l.edges.bottom={path:[[a,0],[s,1]],move:{x:0,y:1,enter:\"bottom\"}}),r.polygons&&l.polygons.push([[a,0],[s,1],[1,1],[1,0]]);break;case 3:i=r.interpolate(p,c,v),o=r.interpolate(g,f,v),r.polygons_full&&(l.edges.right={path:[[1,o],[0,i]],move:{x:-1,y:0,enter:\"right\"}}),r.polygons&&l.polygons.push([[0,i],[0,1],[1,1],[1,o]]);break;case 6:a=r.interpolate(p,g,v),s=r.interpolate(c,f,v),r.polygons_full&&(l.edges.top={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:\"top\"}}),r.polygons&&l.polygons.push([[0,0],[0,1],[s,1],[a,0]]);break;case 10:i=r.interpolate(p,c,v),o=r.interpolate(g,f,v),a=r.interpolate(p,g,v),s=r.interpolate(c,f,v),u=(p+g+f+c)/4,r.polygons_full&&(u<v?(l.edges.left={path:[[0,i],[s,1]],move:{x:0,y:1,enter:\"bottom\"}},l.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:\"top\"}}):(l.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:\"bottom\"}},l.edges.left={path:[[0,i],[a,0]],move:{x:0,y:-1,enter:\"top\"}})),r.polygons&&(u<v?l.polygons.push([[0,0],[0,i],[s,1],[1,1],[1,o],[a,0]]):(l.polygons.push([[0,0],[0,i],[a,0]]),l.polygons.push([[s,1],[1,1],[1,o]])));break;case 5:i=r.interpolate(p,c,v),o=r.interpolate(g,f,v),a=r.interpolate(p,g,v),s=r.interpolate(c,f,v),u=(p+g+f+c)/4,r.polygons_full&&(u<v?(l.edges.bottom={path:[[a,0],[0,i]],move:{x:-1,y:0,enter:\"right\"}},l.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:\"left\"}}):(l.edges.top={path:[[s,1],[0,i]],move:{x:-1,y:0,enter:\"right\"}},l.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:\"left\"}})),r.polygons&&(u<v?l.polygons.push([[0,i],[0,1],[s,1],[1,o],[1,0],[a,0]]):(l.polygons.push([[0,i],[0,1],[s,1]]),l.polygons.push([[a,0],[1,o],[1,0]])))}return l}}As.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Cs*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Cs*Math.atan2(i,r),s]},As.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,h=180-l,c=-180+l,f=360-l,g=1;g<n.length;++g){var p=n[g-1][0],v=n[g][0],d=Math.abs(v-p);d>f&&(v>h&&p<c||p>h&&v<c)?a=!0:d>u&&(u=d)}var y=[];if(a&&u<l){var m=[];y.push(m);for(var _=0;_<n.length;++_){var x=parseFloat(n[_][0]);if(_>0&&Math.abs(x-n[_-1][0])>f){var E=parseFloat(n[_-1][0]),k=parseFloat(n[_-1][1]),b=parseFloat(n[_][0]),w=parseFloat(n[_][1]);if(E>-180&&E<c&&180===b&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<c){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(E>h&&E<180&&-180===b&&_+1<n.length&&n[_-1][0]>h&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(E<c&&b>h){var I=E;E=b,b=I;var N=k;k=w,w=N}if(E>h&&b<c&&(b+=360),E<=180&&b>=180&&E<b){var S=(180-E)/(b-E),M=S*w+(1-S)*k;m.push([n[_-1][0]>h?180:-180,M]),(m=[]).push([n[_-1][0]>h?-180:180,M]),y.push(m)}else m=[],y.push(m);m.push([x,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var L=[];y.push(L);for(var P=0;P<n.length;++P)L.push([n[P][0],n[P][1]])}for(var C=new Rs(this.properties),T=0;T<y.length;++T){var O=new Os;C.geometries.push(O);for(var R=y[T],A=0;A<R.length;++A)O.move_to(R[A])}return C},Qs.prototype.cellsInBand=function(t,e,n){var r=[];return n=void 0===n||n,this.lowerBound>e||this.upperBound<t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(r=r.concat(this.childA.cellsInBand(t,e,n))),this.childB&&(r=r.concat(this.childB.cellsInBand(t,e,n))),this.childD&&(r=r.concat(this.childD.cellsInBand(t,e,n))),this.childC&&(r=r.concat(this.childC.cellsInBand(t,e,n)))):(n||this.lowerBound<=t||this.upperBound>=e)&&r.push({x:this.x,y:this.y})),r},Qs.prototype.cellsBelowThreshold=function(t,e){var n=[];return e=void 0===e||e,this.lowerBound>t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.cellsBelowThreshold(t,e))),this.childB&&(n=n.concat(this.childB.cellsBelowThreshold(t,e))),this.childD&&(n=n.concat(this.childD.cellsBelowThreshold(t,e))),this.childC&&(n=n.concat(this.childC.cellsBelowThreshold(t,e)))):(e||this.upperBound>=t)&&n.push({x:this.x,y:this.y})),n};var na={square:function(t,e,n,r,i,o){o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,0]])},triangle_bl:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[s,0]],move:{x:0,y:-1,enter:\"tl\"}}),o.polygons&&t.polygons.push([[0,a],[s,0],[0,0]])},triangle_br:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[1,a]],move:{x:1,y:0,enter:\"lb\"}}),o.polygons&&t.polygons.push([[s,0],[1,a],[1,0]])},triangle_tr:function(t,e,n,r,i,o){var s=o.interpolate(n,r,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[a,1]],move:{x:0,y:1,enter:\"br\"}}),o.polygons&&t.polygons.push([[1,s],[a,1],[1,1]])},triangle_tl:function(t,e,n,r,i,o){var s=o.interpolate(i,r,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[0,a]],move:{x:-1,y:0,enter:\"rt\"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[s,1]])},tetragon_t:function(t,e,n,r,i,o){var s=o.interpolate(n,r,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[0,a]],move:{x:-1,y:0,enter:\"rt\"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[1,1],[1,s]])},tetragon_r:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[a,1]],move:{x:0,y:1,enter:\"br\"}}),o.polygons&&t.polygons.push([[s,0],[a,1],[1,1],[1,0]])},tetragon_b:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[1,a]],move:{x:1,y:0,enter:\"lb\"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[1,a],[1,0]])},tetragon_l:function(t,e,n,r,i,o){var s=o.interpolate(i,r,o.minV,o.maxV),a=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:\"tl\"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[s,1],[a,0]])},tetragon_bl:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,i,o.minV,o.maxV),l=o.interpolate_b(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:\"rb\"}},t.edges.lt={path:[[0,l],[a,0]],move:{x:0,y:-1,enter:\"tr\"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,l],[a,0]])},tetragon_br:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(n,r,o.minV,o.maxV),l=o.interpolate_b(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[1,l]],move:{x:1,y:0,enter:\"lt\"}},t.edges.rb={path:[[1,u],[a,0]],move:{x:0,y:-1,enter:\"tr\"}}),o.polygons&&t.polygons.push([[s,0],[1,l],[1,u],[a,0]])},tetragon_tr:function(t,e,n,r,i,o){var s=o.interpolate_a(i,r,o.minV,o.maxV),a=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rb={path:[[1,l],[s,1]],move:{x:0,y:1,enter:\"bl\"}},t.edges.tr={path:[[a,1],[1,u]],move:{x:1,y:0,enter:\"lt\"}}),o.polygons&&t.polygons.push([[1,l],[s,1],[a,1],[1,u]])},tetragon_tl:function(t,e,n,r,i,o){var s=o.interpolate_a(i,r,o.minV,o.maxV),a=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate_a(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[a,1],[0,l]],move:{x:-1,y:0,enter:\"rb\"}},t.edges.lt={path:[[0,u],[s,1]],move:{x:0,y:1,enter:\"bl\"}}),o.polygons&&t.polygons.push([[a,1],[0,l],[0,u],[s,1]])},tetragon_lr:function(t,e,n,r,i,o){var s=o.interpolate_a(e,i,o.minV,o.maxV),a=o.interpolate_b(e,i,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,a],[1,u]],move:{x:1,y:0,enter:\"lt\"}},t.edges.rb={path:[[1,l],[0,s]],move:{x:-1,y:0,enter:\"rb\"}}),o.polygons&&t.polygons.push([[0,s],[0,a],[1,u],[1,l]])},tetragon_tb:function(t,e,n,r,i,o){var s=o.interpolate_a(i,r,o.minV,o.maxV),a=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[a,1],[u,0]],move:{x:0,y:-1,enter:\"tr\"}},t.edges.bl={path:[[l,0],[s,1]],move:{x:0,y:1,enter:\"bl\"}}),o.polygons&&t.polygons.push([[l,0],[s,1],[a,1],[u,0]])},pentagon_tr:function(t,e,n,r,i,o){var s=o.interpolate(i,r,o.minV,o.maxV),a=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[1,a]],move:{x:1,y:0,enter:\"lb\"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[s,1],[1,a],[1,0]])},pentagon_tl:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:\"br\"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[1,1],[1,0]])},pentagon_br:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,a],[s,0]],move:{x:0,y:-1,enter:\"tl\"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,a],[s,0]])},pentagon_bl:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:\"rt\"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[1,1],[1,0],[a,0]])},pentagon_tr_rl:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[1,u]],move:{x:1,y:0,enter:\"lt\"}},t.edges.rb={path:[[1,l],[0,s]],move:{x:-1,y:0,enter:\"rt\"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[a,1],[1,u],[1,l]])},pentagon_rb_bt:function(t,e,n,r,i,o){var s=o.interpolate(n,r,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,n,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[a,0]],move:{x:0,y:-1,enter:\"tr\"}},t.edges.bl={path:[[u,0],[l,1]],move:{x:0,y:1,enter:\"br\"}}),o.polygons&&t.polygons.push([[l,1],[1,1],[1,s],[a,0],[u,0]])},pentagon_bl_lr:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,i,o.minV,o.maxV),u=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:\"rb\"}},t.edges.lt={path:[[0,u],[1,l]],move:{x:1,y:0,enter:\"lb\"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,u],[1,l],[1,0]])},pentagon_lt_tb:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate_a(i,r,o.minV,o.maxV),u=o.interpolate_b(i,r,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:\"bl\"}},t.edges.tr={path:[[u,1],[l,0]],move:{x:0,y:-1,enter:\"tl\"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[u,1],[l,0]])},pentagon_bl_tb:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[l,0],[0,s]],move:{x:-1,y:0,enter:\"rt\"}},t.edges.tl={path:[[a,1],[u,0]],move:{x:0,y:-1,enter:\"tr\"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[a,1],[u,0],[l,0]])},pentagon_lt_rl:function(t,e,n,r,i,o){var s=o.interpolate_a(e,i,o.minV,o.maxV),a=o.interpolate_b(e,i,o.minV,o.maxV),u=o.interpolate(i,r,o.minV,o.maxV),l=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,a],[u,1]],move:{x:0,y:1,enter:\"br\"}},t.edges.rt={path:[[1,l],[0,s]],move:{x:-1,y:0,enter:\"rb\"}}),o.polygons&&t.polygons.push([[0,s],[0,a],[u,1],[1,1],[1,l]])},pentagon_tr_bt:function(t,e,n,r,i,o){var s=o.interpolate_a(i,r,o.minV,o.maxV),a=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[l,0],[s,1]],move:{x:0,y:1,enter:\"bl\"}},t.edges.tr={path:[[a,1],[1,u]],move:{x:1,y:0,enter:\"lb\"}}),o.polygons&&t.polygons.push([[s,1],[a,1],[1,u],[1,0],[l,0]])},pentagon_rb_lr:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate_b(n,r,o.minV,o.maxV),u=o.interpolate_a(n,r,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[1,a]],move:{x:1,y:0,enter:\"lt\"}},t.edges.rb={path:[[1,u],[l,0]],move:{x:0,y:-1,enter:\"tl\"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[1,a],[1,u],[l,0]])},hexagon_lt_tr:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate_a(i,r,o.minV,o.maxV),u=o.interpolate_b(i,r,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:\"bl\"}},t.edges.tr={path:[[u,1],[1,l]],move:{x:1,y:0,enter:\"lb\"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[u,1],[1,l],[1,0]])},hexagon_bl_lt:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,i,o.minV,o.maxV),u=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:\"rb\"}},t.edges.lt={path:[[0,u],[l,1]],move:{x:0,y:1,enter:\"br\"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,u],[l,1],[1,1],[1,0]])},hexagon_bl_rb:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate(e,i,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:\"rt\"}},t.edges.rt={path:[[1,l],[a,0]],move:{x:0,y:-1,enter:\"tr\"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,1],[1,1],[1,l],[a,0]])},hexagon_tr_rb:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[1,u]],move:{x:1,y:0,enter:\"lt\"}},t.edges.rb={path:[[1,l],[s,0]],move:{x:0,y:-1,enter:\"tl\"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[a,1],[1,u],[1,l],[s,0]])},hexagon_lt_rb:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:\"br\"}},t.edges.rt={path:[[1,u],[l,0]],move:{x:0,y:-1,enter:\"tl\"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[1,1],[1,u],[l,0]])},hexagon_bl_tr:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV),u=o.interpolate(i,r,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:\"rt\"}},t.edges.tl={path:[[u,1],[1,l]],move:{x:1,y:0,enter:\"lb\"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,1],[u,1],[1,l],[1,0]])},heptagon_tr:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,i,o.minV,o.maxV),l=o.interpolate_b(e,i,o.minV,o.maxV),h=o.interpolate(i,r,o.minV,o.maxV),c=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:\"rb\"}},t.edges.lt={path:[[0,l],[h,1]],move:{x:0,y:1,enter:\"br\"}},t.edges.rt={path:[[1,c],[a,0]],move:{x:0,y:-1,enter:\"tr\"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,l],[h,1],[1,1],[1,c],[a,0]])},heptagon_bl:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV),u=o.interpolate_a(i,r,o.minV,o.maxV),l=o.interpolate_b(i,r,o.minV,o.maxV),h=o.interpolate_b(n,r,o.minV,o.maxV),c=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[u,1]],move:{x:0,y:1,enter:\"bl\"}},t.edges.tr={path:[[l,1],[1,h]],move:{x:1,y:0,enter:\"lt\"}},t.edges.rb={path:[[1,c],[s,0]],move:{x:0,y:-1,enter:\"tl\"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[u,1],[l,1],[1,h],[1,c],[s,0]])},heptagon_tl:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate(e,i,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV),h=o.interpolate_b(n,r,o.minV,o.maxV),c=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:\"rt\"}},t.edges.tl={path:[[l,1],[1,h]],move:{x:1,y:0,enter:\"lt\"}},t.edges.rb={path:[[1,c],[a,0]],move:{x:0,y:-1,enter:\"tr\"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,1],[l,1],[1,h],[1,c],[a,0]])},heptagon_br:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,i,o.minV,o.maxV),u=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate_a(i,r,o.minV,o.maxV),h=o.interpolate_b(i,r,o.minV,o.maxV),c=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:\"rb\"}},t.edges.lt={path:[[0,u],[l,1]],move:{x:0,y:1,enter:\"bl\"}},t.edges.tr={path:[[h,1],[1,c]],move:{x:1,y:0,enter:\"lb\"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,u],[l,1],[h,1],[1,c],[1,0]])},octagon:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,i,o.minV,o.maxV),l=o.interpolate_b(e,i,o.minV,o.maxV),h=o.interpolate_a(i,r,o.minV,o.maxV),c=o.interpolate_b(i,r,o.minV,o.maxV),f=o.interpolate_b(n,r,o.minV,o.maxV),g=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:\"rb\"}},t.edges.lt={path:[[0,l],[h,1]],move:{x:0,y:1,enter:\"bl\"}},t.edges.tr={path:[[c,1],[1,f]],move:{x:1,y:0,enter:\"lt\"}},t.edges.rb={path:[[1,g],[a,0]],move:{x:0,y:-1,enter:\"tr\"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,l],[h,1],[c,1],[1,f],[1,g],[a,0]])}};function ra(t,e,n,r){var i,o,s,a=!1,u=null,l=null,h=null,c=null,f=!1,g=[],p=[],v=[];if(!t)throw new Error(\"data is required\");if(null==e)throw new Error(\"lowerBound is required\");if(null==n)throw new Error(\"bandWidth is required\");if(s=function(t){var e,n,r,i,o;for(i=new Hs,t=t||{},o=Object.keys(i),e=0;e<o.length;e++)null!=(r=t[n=o[e]])&&(i[n]=r);return i.polygons_full=!i.polygons,i.interpolate=Xs,i.interpolate_a=Us,i.interpolate_b=Zs,i}(r),t instanceof $s)u=t,l=t.root,h=t.data,s.noQuadTree||(a=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error(\"input is neither array of arrays nor object retrieved from 'QuadTree()'\");h=t}if(Array.isArray(e)){for(f=!0,s.noQuadTree||(a=!0),i=0;i<e.length;i++)if(isNaN(+e[i]))throw new Error(\"lowerBound[\"+i+\"] is not a number\");if(Array.isArray(n)){if(e.length!==n.length)throw new Error(\"lowerBound and bandWidth have unequal lengths\");for(i=0;i<n.length;i++)if(isNaN(+n[i]))throw new Error(\"bandWidth[\"+i+\"] is not a number\")}else{if(isNaN(+n))throw new Error(\"bandWidth must be a number\");for(g=[],i=0;i<e.length;i++)g.push(n);n=g}}else{if(isNaN(+e))throw new Error(\"lowerBound must be a number\");if(e=[e],isNaN(+n))throw new Error(\"bandWidth must be a number\");n=[n]}return a&&!l&&(u=new $s(h),l=u.root,h=u.data),s.verbose&&(s.polygons?console.log(\"MarchingSquaresJS-isoBands: returning single polygons for each grid cell\"):console.log(\"MarchingSquaresJS-isoBands: returning polygon paths for entire data grid\"),f&&console.log(\"MarchingSquaresJS-isoBands: multiple bands requested, returning array of band polygons instead of polygons for a single band\")),e.forEach(function(t,e){if(p=[],s.minV=t,s.maxV=t+n[e],s.verbose&&console.log(\"MarchingSquaresJS-isoBands: computing isobands for [\"+t+\":\"+(t+n[e])+\"]\"),s.polygons)if(a)l.cellsInBand(s.minV,s.maxV,!0).forEach(function(t){p=p.concat(Ws(oa(h,t.x,t.y,s),t.x,t.y,s))});else for(o=0;o<h.length-1;++o)for(i=0;i<h[0].length-1;++i)p=p.concat(Ws(oa(h,i,o,s),i,o,s));else{for(c=[],i=0;i<h[0].length-1;++i)c[i]=[];if(a)l.cellsInBand(s.minV,s.maxV,!1).forEach(function(t){c[t.x][t.y]=oa(h,t.x,t.y,s)});else for(i=0;i<h[0].length-1;++i)for(o=0;o<h.length-1;++o)c[i][o]=oa(h,i,o,s);p=function(t,e,n){var r,i,o,s,a,u,l,h,c,f,g,p,v,d,m,_,x=[],E=t.length-1,k=t[0].length-1,b=[[\"rt\",\"rb\"],[\"br\",\"bl\"],[\"lb\",\"lt\"],[\"tl\",\"tr\"]],w=[0,-1,0,1],I=[-1,0,1,0],N=[\"bl\",\"lb\",\"lt\",\"tl\",\"tr\",\"rt\",\"rb\",\"br\"],S={bl:1,br:1,lb:2,lt:2,tl:3,tr:3,rt:0,rb:0};return function(t,e,n){var r,i,o,s,a;for(r=!0,i=t[0].length,o=t.length,a=0;a<o;a++)if(t[a][0]<e||t[a][0]>n||t[a][i-1]<e||t[a][i-1]>n){r=!1;break}if(r&&(t[o-1][0]<e||t[o-1][0]>n||t[o-1][i-1]<e||t[o-1][i-1]>n)&&(r=!1),r)for(s=0;s<i-1;s++)if(t[0][s]<e||t[0][s]>n||t[o-1][s]<e||t[o-1][s]>n){r=!1;break}return r}(t,n.minV,n.maxV)&&(n.linearRing?x.push([[0,0],[0,E],[k,E],[k,0],[0,0]]):x.push([[0,0],[0,E],[k,E],[k,0]])),e.forEach(function(t,M){t.forEach(function(t,L){for(r=null,o=0;o<8;o++)if(r=N[o],\"object\"===y(t.edges[r])){for(i=[],s=t.edges[r],l=r,h=M,c=L,f=!1,g=[M+s.path[0][0],L+s.path[0][1]],i.push(g);!f&&\"object\"===y((p=e[h][c]).edges[l]);)if(s=p.edges[l],delete p.edges[l],(m=s.path[1])[0]+=h,m[1]+=c,i.push(m),l=s.move.enter,h+=s.move.x,c+=s.move.y,void 0===e[h]||void 0===e[h][c]){if(v=0,d=0,h===k)h--,v=0;else if(h<0)h++,v=2;else if(c===E)c--,v=3;else{if(!(c<0))throw new Error(\"Left the grid somewhere in the interior!\");c++,v=1}if(h===M&&c===L&&v===S[r]){f=!0,l=r;break}for(;;){if(_=!1,d>4)throw new Error(\"Direction change counter overflow! This should never happen!\");if(void 0!==e[h]&&void 0!==e[h][c])for(p=e[h][c],a=0;a<b[v].length;a++)if(u=b[v][a],\"object\"===y(p.edges[u])){s=p.edges[u],i.push(Js(h,c,v,s.path)),l=u,_=!0;break}if(_)break;if(i.push(Ks(h,c,v)),c+=I[v],void 0!==e[h+=w[v]]&&void 0!==e[h][c]||(0===v&&c<0||1===v&&h<0||2===v&&c===E||3===v&&h===k)&&(h-=w[v],c-=I[v],v=(v+1)%4,d++),h===M&&c===L&&v===S[r]){f=!0,l=r;break}}}!n.linearRing||i[i.length-1][0]===g[0]&&i[i.length-1][1]===g[1]||i.push(g),x.push(i)}})}),x}(h,c,s)}f?v.push(p):v=p,\"function\"==typeof s.successCallback&&s.successCallback(v,t,n[e])}),v}function ia(t,e,n,r,i,o){var s=(r+n+e+t)/4;return s>o?2:s<i?0:1}function oa(t,e,n,r){var i,o,s=0,a=t[n+1][e],u=t[n+1][e+1],l=t[n][e+1],h=t[n][e],c=r.minV,f=r.maxV;if(!(isNaN(h)||isNaN(l)||isNaN(u)||isNaN(a))){switch(s|=a<c?0:a>f?128:64,s|=u<c?0:u>f?32:16,s|=l<c?0:l>f?8:4,o=0,i={cval:s=+(s|=h<c?0:h>f?2:1),polygons:[],edges:{},x0:h,x1:l,x2:u,x3:a,x:e,y:n},s){case 85:na.square(i,h,l,u,a,r);case 0:case 170:break;case 169:na.triangle_bl(i,h,l,u,a,r);break;case 166:na.triangle_br(i,h,l,u,a,r);break;case 154:na.triangle_tr(i,h,l,u,a,r);break;case 106:na.triangle_tl(i,h,l,u,a,r);break;case 1:na.triangle_bl(i,h,l,u,a,r);break;case 4:na.triangle_br(i,h,l,u,a,r);break;case 16:na.triangle_tr(i,h,l,u,a,r);break;case 64:na.triangle_tl(i,h,l,u,a,r);break;case 168:na.tetragon_bl(i,h,l,u,a,r);break;case 162:na.tetragon_br(i,h,l,u,a,r);break;case 138:na.tetragon_tr(i,h,l,u,a,r);break;case 42:na.tetragon_tl(i,h,l,u,a,r);break;case 2:na.tetragon_bl(i,h,l,u,a,r);break;case 8:na.tetragon_br(i,h,l,u,a,r);break;case 32:na.tetragon_tr(i,h,l,u,a,r);break;case 128:na.tetragon_tl(i,h,l,u,a,r);break;case 5:na.tetragon_b(i,h,l,u,a,r);break;case 20:na.tetragon_r(i,h,l,u,a,r);break;case 80:na.tetragon_t(i,h,l,u,a,r);break;case 65:na.tetragon_l(i,h,l,u,a,r);break;case 165:na.tetragon_b(i,h,l,u,a,r);break;case 150:na.tetragon_r(i,h,l,u,a,r);break;case 90:na.tetragon_t(i,h,l,u,a,r);break;case 105:na.tetragon_l(i,h,l,u,a,r);break;case 160:na.tetragon_lr(i,h,l,u,a,r);break;case 130:na.tetragon_tb(i,h,l,u,a,r);break;case 10:na.tetragon_lr(i,h,l,u,a,r);break;case 40:na.tetragon_tb(i,h,l,u,a,r);break;case 101:na.pentagon_tr(i,h,l,u,a,r);break;case 149:na.pentagon_tl(i,h,l,u,a,r);break;case 86:na.pentagon_bl(i,h,l,u,a,r);break;case 89:na.pentagon_br(i,h,l,u,a,r);break;case 69:na.pentagon_tr(i,h,l,u,a,r);break;case 21:na.pentagon_tl(i,h,l,u,a,r);break;case 84:na.pentagon_bl(i,h,l,u,a,r);break;case 81:na.pentagon_br(i,h,l,u,a,r);break;case 96:na.pentagon_tr_rl(i,h,l,u,a,r);break;case 24:na.pentagon_rb_bt(i,h,l,u,a,r);break;case 6:na.pentagon_bl_lr(i,h,l,u,a,r);break;case 129:na.pentagon_lt_tb(i,h,l,u,a,r);break;case 74:na.pentagon_tr_rl(i,h,l,u,a,r);break;case 146:na.pentagon_rb_bt(i,h,l,u,a,r);break;case 164:na.pentagon_bl_lr(i,h,l,u,a,r);break;case 41:na.pentagon_lt_tb(i,h,l,u,a,r);break;case 66:na.pentagon_bl_tb(i,h,l,u,a,r);break;case 144:na.pentagon_lt_rl(i,h,l,u,a,r);break;case 36:na.pentagon_tr_bt(i,h,l,u,a,r);break;case 9:na.pentagon_rb_lr(i,h,l,u,a,r);break;case 104:na.pentagon_bl_tb(i,h,l,u,a,r);break;case 26:na.pentagon_lt_rl(i,h,l,u,a,r);break;case 134:na.pentagon_tr_bt(i,h,l,u,a,r);break;case 161:na.pentagon_rb_lr(i,h,l,u,a,r);break;case 37:na.hexagon_lt_tr(i,h,l,u,a,r);break;case 148:na.hexagon_bl_lt(i,h,l,u,a,r);break;case 82:na.hexagon_bl_rb(i,h,l,u,a,r);break;case 73:na.hexagon_tr_rb(i,h,l,u,a,r);break;case 133:na.hexagon_lt_tr(i,h,l,u,a,r);break;case 22:na.hexagon_bl_lt(i,h,l,u,a,r);break;case 88:na.hexagon_bl_rb(i,h,l,u,a,r);break;case 97:na.hexagon_tr_rb(i,h,l,u,a,r);break;case 145:case 25:na.hexagon_lt_rb(i,h,l,u,a,r);break;case 70:case 100:na.hexagon_bl_tr(i,h,l,u,a,r);break;case 17:0===(o=ia(h,l,u,a,c,f))?(na.triangle_bl(i,h,l,u,a,r),na.triangle_tr(i,h,l,u,a,r)):na.hexagon_lt_rb(i,h,l,u,a,r);break;case 68:0===(o=ia(h,l,u,a,c,f))?(na.triangle_tl(i,h,l,u,a,r),na.triangle_br(i,h,l,u,a,r)):na.hexagon_bl_tr(i,h,l,u,a,r);break;case 153:2===(o=ia(h,l,u,a,c,f))?(na.triangle_bl(i,h,l,u,a,r),na.triangle_tr(i,h,l,u,a,r)):na.hexagon_lt_rb(i,h,l,u,a,r);break;case 102:2===(o=ia(h,l,u,a,c,f))?(na.triangle_tl(i,h,l,u,a,r),na.triangle_br(i,h,l,u,a,r)):na.hexagon_bl_tr(i,h,l,u,a,r);break;case 152:2===(o=ia(h,l,u,a,c,f))?(na.triangle_tr(i,h,l,u,a,r),na.tetragon_bl(i,h,l,u,a,r)):na.heptagon_tr(i,h,l,u,a,r);break;case 137:2===(o=ia(h,l,u,a,c,f))?(na.triangle_bl(i,h,l,u,a,r),na.tetragon_tr(i,h,l,u,a,r)):na.heptagon_bl(i,h,l,u,a,r);break;case 98:2===(o=ia(h,l,u,a,c,f))?(na.triangle_tl(i,h,l,u,a,r),na.tetragon_br(i,h,l,u,a,r)):na.heptagon_tl(i,h,l,u,a,r);break;case 38:2===(o=ia(h,l,u,a,c,f))?(na.triangle_br(i,h,l,u,a,r),na.tetragon_tl(i,h,l,u,a,r)):na.heptagon_br(i,h,l,u,a,r);break;case 18:0===(o=ia(h,l,u,a,c,f))?(na.triangle_tr(i,h,l,u,a,r),na.tetragon_bl(i,h,l,u,a,r)):na.heptagon_tr(i,h,l,u,a,r);break;case 33:0===(o=ia(h,l,u,a,c,f))?(na.triangle_bl(i,h,l,u,a,r),na.tetragon_tr(i,h,l,u,a,r)):na.heptagon_bl(i,h,l,u,a,r);break;case 72:0===(o=ia(h,l,u,a,c,f))?(na.triangle_tl(i,h,l,u,a,r),na.tetragon_br(i,h,l,u,a,r)):na.heptagon_tl(i,h,l,u,a,r);break;case 132:0===(o=ia(h,l,u,a,c,f))?(na.triangle_br(i,h,l,u,a,r),na.tetragon_tl(i,h,l,u,a,r)):na.heptagon_br(i,h,l,u,a,r);break;case 136:0===(o=ia(h,l,u,a,c,f))?(na.tetragon_tl(i,h,l,u,a,r),na.tetragon_br(i,h,l,u,a,r)):1===o?na.octagon(i,h,l,u,a,r):(na.tetragon_bl(i,h,l,u,a,r),na.tetragon_tr(i,h,l,u,a,r));break;case 34:0===(o=ia(h,l,u,a,c,f))?(na.tetragon_bl(i,h,l,u,a,r),na.tetragon_tr(i,h,l,u,a,r)):1===o?na.octagon(i,h,l,u,a,r):(na.tetragon_tl(i,h,l,u,a,r),na.tetragon_br(i,h,l,u,a,r))}return i}}var sa=Object.defineProperty,aa=Object.getOwnPropertySymbols,ua=Object.prototype.hasOwnProperty,la=Object.prototype.propertyIsEnumerable,ha=function(t,e,n){return e in t?sa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ca=function(t,e){for(var n in e||(e={}))ua.call(e,n)&&ha(t,n,e[n]);if(aa){var r,i=a(aa(e));try{for(i.s();!(r=i.n()).done;)n=r.value,la.call(e,n)&&ha(t,n,e[n])}catch(t){i.e(t)}finally{i.f()}}return t};function fa(t){var e=t.map(function(t){return{ring:t,area:Mt(N([t]))}});return e.sort(function(t,e){return e.area-t.area}),e.map(function(t){return t.ring})}function ga(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!va(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=N([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||pa(N([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}function pa(t,e){for(var n=Ls(t),r=0;r<n.features.length;r++)if(!Yt(n.features[r],e))return!1;return!0}function va(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}var da=Object.defineProperty,ya=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,_a=Object.prototype.propertyIsEnumerable,xa=function(t,e,n){return e in t?da(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Ea=function(t,e){for(var n in e||(e={}))ma.call(e,n)&&xa(t,n,e[n]);if(ya){var r,i=a(ya(e));try{for(i.s();!(r=i.n()).done;)n=r.value,_a.call(e,n)&&xa(t,n,e[n])}catch(t){i.e(t)}finally{i.f()}}return t};function ka(t,e,n,r,i,o,s,a){var u,l,h,c,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==f.x&&null!==f.y&&f:(c=(n-t)*(l=e-o)-(r-e)*(h=t-i),l=((s-i)*l-(a-o)*h)/u,h=c/u,f.x=t+l*(n-t),f.y=e+l*(r-e),l>=0&&l<=1&&(f.onLine1=!0),h>=0&&h<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function ba(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kt(t,function(t,n){var r=n.geometry.coordinates;return t+at(r[0],r[1],e)},0)}function wa(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.steps||64,s=Ia(n),a=Ia(r),u=Array.isArray(t)||\"Feature\"!==t.type?{}:t.properties;if(s===a)return M(bi(t,e,i).geometry.coordinates[0],u);for(var l=s,h=s<a?a:a+360,c=l,f=[],g=0,p=(h-l)/o;c<=h;)f.push(st(t,e,c,i).geometry.coordinates),c=l+ ++g*p;return M(f,u)}function Ia(t){var e=t%360;return e<0&&(e+=360),e}function Na(t,e,n,r){if(!U(r=r||{}))throw new Error(\"options is invalid\");var i,o=[];if(\"Feature\"===t.type)i=t.geometry.coordinates;else{if(\"LineString\"!==t.type)throw new Error(\"input must be a LineString Feature or Geometry\");i=t.coordinates}for(var s,a,u,l=i.length,h=0,c=0;c<i.length&&!(e>=h&&c===i.length-1);c++){if(h>e&&0===o.length){if(!(s=e-h))return o.push(i[c]),M(o);a=ot(i[c],i[c-1])-180,u=st(i[c],s,a,r),o.push(u.geometry.coordinates)}if(h>=n)return(s=n-h)?(a=ot(i[c],i[c-1])-180,u=st(i[c],s,a,r),o.push(u.geometry.coordinates),M(o)):(o.push(i[c]),M(o));if(h>=e&&o.push(i[c]),c===i.length-1)return M(o);h+=at(i[c],i[c+1],r)}if(h<e&&i.length===l)throw new Error(\"Start position is beyond line\");var f=i[i.length-1];return M([f,f])}function Sa(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Ma(t,e){return t[0]*e[1]-e[0]*t[1]}function La(t,e,n){var r=[],i=q(e,n),o=K(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=(l=t,h=o[e+1],c=i,f=Math.sqrt((l[0]-h[0])*(l[0]-h[0])+(l[1]-h[1])*(l[1]-h[1])),g=l[0]+c*(h[1]-l[1])/f,p=h[0]+c*(h[1]-l[1])/f,[[g,l[1]+c*(l[0]-h[0])/f],[p,h[1]+c*(l[0]-h[0])/f]]);if(r.push(n),e>0){var a=r[e-1],u=function(t,e){return!function(t,e){return 0===Ma(Sa(t),Sa(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=Sa(t),s=e[0],a=Sa(e),u=Ma(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(Ma((r=i,[(n=s)[0]-r[0],n[1]-r[1]]),a)/u,o))}(t,e)}(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var l,h,c,f,g,p}),M(s,t.properties)}function Pa(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(at(t.slice(0,2),[r,n])>=at(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function Ca(t,e){if(!U(e=null!=e?e:{}))throw new Error(\"options is invalid\");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error(\"<geojson> is required\");if(\"number\"!=typeof n)throw new Error(\"<precision> must be a number\");if(\"number\"!=typeof r)throw new Error(\"<coordinates> must be a number\");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return ht(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function Ta(t,e){var n=[],r=Je();return _t(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var i=r.search(e);if(i.features.length){var o=Ra(e,i);n=n.filter(function(t){return t.id!==o.id}),r.remove(o),pt(Oa(o,e),function(t){n.push(t),r.insert(t)})}}else(n=Oa(t,e).features).forEach(function(t){t.bbox||(t.bbox=Pa(Ot(t)))}),r.load(P(n))}),P(n)}function Oa(t,e){var n=[],r=K(t)[0],i=K(t)[t.geometry.coordinates.length-1];if(Aa(r,J(e))||Aa(i,J(e)))return P([t]);var o=Je(),s=Ke(t);o.load(s);var a=o.search(e);if(!a.features.length)return P([t]);var u=Ra(e,a),l=vt(s,function(t,r,i){var o=K(r)[1],s=J(e);return i===u.id?(t.push(s),n.push(M(t)),Aa(s,o)?[s]:[s,o]):(t.push(o),t)},[r]);return l.length>1&&n.push(M(l)),P(n)}function Ra(t,e){if(!e.features.length)throw new Error(\"lines must contain features\");if(1===e.features.length)return e.features[0];var n,r=1/0;return pt(e,function(e){var i=hn(e,t).properties.dist;i<r&&(n=e,r=i)}),n}function Aa(t,e){return t[0]===e[0]&&t[1]===e[1]}function Da(t,e,n,r){e=e||(\"Feature\"===t.type?t.properties:{});var i=nt(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error(\"line must contain coordinates\");switch(s){case\"LineString\":return n&&(o=Fa(o)),N([o],e);case\"MultiLineString\":var a=[],u=0;return o.forEach(function(t){if(n&&(t=Fa(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(Ot(M(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)}),N(a,e);default:throw new Error(\"geometry type \"+s+\" is not supported\")}}function Fa(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function qa(t){return O(t)}function Va(t){var e,n=0,r=a(t);try{for(r.s();!(e=r.n()).done;)n+=e.value}catch(t){r.e(t)}finally{r.f()}return n/t.length}var Ga=Object.defineProperty,Ba=Object.defineProperties,Ya=Object.getOwnPropertyDescriptors,za=Object.getOwnPropertySymbols,ja=Object.prototype.hasOwnProperty,Xa=Object.prototype.propertyIsEnumerable,Ua=function(t,e,n){return e in t?Ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Za=function(t,e){for(var n in e||(e={}))ja.call(e,n)&&Ua(t,n,e[n]);if(za){var r,i=a(za(e));try{for(i.s();!(r=i.n()).done;)n=r.value,Xa.call(e,n)&&Ua(t,n,e[n])}catch(t){i.e(t)}finally{i.f()}}return t},Ha=function(t,e){return Ba(t,Ya(e))};function Wa(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error(\"targetPoint is required\");if(!e)throw new Error(\"points is required\");var r=1/0,i=0;pt(e,function(e,o){var s=at(t,e,n);s<r&&(i=o,r=s)});var o=wi(e.features[i]);return Ha(Za({},o),{properties:Ha(Za({},o.properties),{featureIndex:i,distanceToPoint:r})})}function Ja(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null!=(n=i.method)?n:\"geodesic\",s=null!=(r=i.units)?r:\"kilometers\";if(!t)throw new Error(\"pt is required\");if(Array.isArray(t)?t=w(t):\"Point\"===t.type?t=k(t):tt(t,\"Point\",\"point\"),!e)throw new Error(\"line is required\");Array.isArray(e)?e=M(e):\"LineString\"===e.type?e=k(e):tt(e,\"LineString\",\"line\");var a=1/0,u=t.geometry.coordinates;return Et(e,function(t){if(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],r=function(t,e,n,r){if(\"geodesic\"===r.method)return hn(M([e,n]).geometry,t,{units:\"degrees\"}).properties.dist;var i=[n[0]-e[0],n[1]-e[1]],o=Ka([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return ws(t,e,{units:\"degrees\"});var s=Ka(i,i);if(s<=o)return ws(t,n,{units:\"degrees\"});var a=o/s;return ws(t,[e[0]+a*i[0],e[1]+a*i[1]],{units:\"degrees\"})}(u,e,n,{method:o});r<a&&(a=r)}}),z(a,\"degrees\",s)}function Ka(t,e){return t[0]*e[0]+t[1]*e[1]}var Qa=Object.defineProperty,$a=Object.getOwnPropertySymbols,tu=Object.prototype.hasOwnProperty,eu=Object.prototype.propertyIsEnumerable,nu=function(t,e,n){return e in t?Qa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ru=function(t,e){for(var n in e||(e={}))tu.call(e,n)&&nu(t,n,e[n]);if($a){var r,i=a($a(e));try{for(i.s();!(r=i.n()).done;)n=r.value,eu.call(e,n)&&nu(t,n,e[n])}catch(t){i.e(t)}finally{i.f()}}return t};function iu(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function ou(t,e){var n=[];return pt(t,function(t){var r=!1;if(\"Point\"===t.geometry.type)yt(e,function(e){Yt(t,e)&&(r=!0)}),r&&n.push(t);else{if(\"MultiPoint\"!==t.geometry.type)throw new Error(\"Input geometry must be a Point or MultiPoint\");var i=[];yt(e,function(e){ht(t,function(t){Yt(t,e)&&(r=!0,i.push(t))})}),r&&n.push(T(i,t.properties))}}),P(n)}function su(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function au(t,e){return e.geometry.coordinates[0].every(function(e){return Yt(w(e),t)})}var uu=s(function t(e){i(this,t),this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1},[{key:\"removeInnerEdge\",value:function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})}},{key:\"removeOuterEdge\",value:function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})}},{key:\"addOuterEdge\",value:function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1}},{key:\"sortOuterEdges\",value:function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=su(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)}},{key:\"getOuterEdges\",value:function(){return this.sortOuterEdges(),this.outerEdges}},{key:\"getOuterEdge\",value:function(t){return this.sortOuterEdges(),this.outerEdges[t]}},{key:\"addInnerEdge\",value:function(t){this.innerEdges.push(t)}}],[{key:\"buildId\",value:function(t){return t.join(\",\")}}]),lu=function(){function t(e,n){i(this,t),this.from=e,this.to=n,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return s(t,[{key:\"getSymetric\",value:function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric}},{key:\"deleteEdge\",value:function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)}},{key:\"isEqual\",value:function(t){return this.from.id===t.from.id&&this.to.id===t.to.id}},{key:\"toString\",value:function(){return\"Edge { \".concat(this.from.id,\" -> \").concat(this.to.id,\" }\")}},{key:\"toLineString\",value:function(){return M([this.from.coordinates,this.to.coordinates])}},{key:\"compareTo\",value:function(t){return su(t.from.coordinates,t.to.coordinates,this.to.coordinates)}}])}(),hu=s(function t(){i(this,t),this.edges=[],this.polygon=void 0,this.envelope=void 0},[{key:\"push\",value:function(t){this.edges.push(t),this.polygon=this.envelope=void 0}},{key:\"get\",value:function(t){return this.edges[t]}},{key:\"length\",get:function(){return this.edges.length}},{key:\"forEach\",value:function(t){this.edges.forEach(t)}},{key:\"map\",value:function(t){return this.edges.map(t)}},{key:\"some\",value:function(t){return this.edges.some(t)}},{key:\"isValid\",value:function(){return!0}},{key:\"isHole\",value:function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=su(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0}},{key:\"toMultiPoint\",value:function(){return T(this.edges.map(function(t){return t.from.coordinates}))}},{key:\"toPolygon\",value:function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=N([t])}},{key:\"getEnvelope\",value:function(){return this.envelope?this.envelope:this.envelope=Ms(this.toPolygon())}},{key:\"inside\",value:function(t){return Yt(t,this.toPolygon())}}],[{key:\"findEdgeRingContaining\",value:function(t,e){var n,r,i=t.getEnvelope();return e.forEach(function(e){var o,s,u,l,h,c,f=e.getEnvelope();if(r&&(n=r.getEnvelope()),s=i,u=(o=f).geometry.coordinates[0].map(function(t){return t[0]}),l=o.geometry.coordinates[0].map(function(t){return t[1]}),h=s.geometry.coordinates[0].map(function(t){return t[0]}),c=s.geometry.coordinates[0].map(function(t){return t[1]}),(Math.max.apply(null,u)!==Math.max.apply(null,h)||Math.max.apply(null,l)!==Math.max.apply(null,c)||Math.min.apply(null,u)!==Math.min.apply(null,h)||Math.min.apply(null,l)!==Math.min.apply(null,c))&&au(f,i)){var g,p,v=a(t.map(function(t){return t.from.coordinates}));try{var d=function(){var t=p.value;e.some(function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r})||(g=t)};for(v.s();!(p=v.n()).done;)d()}catch(t){v.e(t)}finally{v.f()}g&&e.inside(w(g))&&(r&&!au(n,f)||(r=e))}}),r}}]),cu=function(){function t(){i(this,t),this.edges=[],this.nodes={}}return s(t,[{key:\"getNode\",value:function(t){var e=uu.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new uu(t)),n}},{key:\"addEdge\",value:function(t,e){var n=new lu(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)}},{key:\"deleteDangles\",value:function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})}},{key:\"_removeIfDangle\",value:function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}}},{key:\"deleteCutEdges\",value:function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})}},{key:\"_computeNextCWEdges\",value:function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})}},{key:\"_computeNextCCWEdges\",value:function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)}},{key:\"_findLabeledEdgeRings\",value:function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}}),t}},{key:\"getEdgeRings\",value:function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e}},{key:\"_findIntersectionNodes\",value:function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e}},{key:\"_findEdgeRing\",value:function(t){var e=t,n=new hu;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n}},{key:\"removeNode\",value:function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]}},{key:\"removeEdge\",value:function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()}}],[{key:\"fromGeoJson\",value:function(e){!function(t){if(!t)throw new Error(\"No geojson passed\");if(\"FeatureCollection\"!==t.type&&\"GeometryCollection\"!==t.type&&\"MultiLineString\"!==t.type&&\"LineString\"!==t.type&&\"Feature\"!==t.type)throw new Error(\"Invalid input type '\".concat(t.type,\"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature\"))}(e);var n=new t;return _t(e,function(t){tt(t,\"LineString\",\"Graph::fromGeoJson\"),ct(t,function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e})}),n}}])}();function fu(t,e){var n,r;ht(t,function(t,i,o,s,a){if(r!==a)e.push([]);else{var u=n[0],l=n[1],h=t[0],c=t[1];e[a].push([.75*u+.25*h,.75*l+.25*c]),e[a].push([.25*u+.75*h,.25*l+.75*c])}n=t,r=a},!1),e.forEach(function(t){t.push(t[0])})}function gu(t,e){var n,r,i;ht(t,function(t,o,s,a,u){if(r!==a)e.push([[]]);else if(i!==u)e[a].push([]);else{var l=n[0],h=n[1],c=t[0],f=t[1];e[a][u].push([.75*l+.25*c,.75*h+.25*f]),e[a][u].push([.25*l+.75*c,.25*h+.75*f])}n=t,r=a,i=u},!1),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function pu(t,e,n,r,i){for(var o=0;o<t.length;o++){var s=t[o],a=t[o+1];o===t.length-1&&(a=t[0]);var u=du(s,a,e);n<=0&&u>0?du(e,s,r)<0||(r=s):n>0&&u<=0&&(vu(e,s,i)||(i=s)),n=u}return[r,i]}function vu(t,e,n){return du(t,e,n)>0}function du(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function yu(t){return _u(t,\"mercator\",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function mu(t){return _u(t,\"wgs84\",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function _u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n=n||{}).mutate;if(!t)throw new Error(\"geojson is required\");return Array.isArray(t)&&X(t[0])?t=\"mercator\"===e?xu(t):Eu(t):(!0!==r&&(t=wi(t)),ht(t,function(t){var n=\"mercator\"===e?xu(t):Eu(t);t[0]=n[0],t[1]=n[1]})),t}function xu(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function Eu(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}var ku=Object.freeze({__proto__:null,toMercator:yu,toWgs84:mu}),bu={20:1.07275,15:1.13795,10:1.22385,5:1.3581,2:1.51743,1:1.62762};function wu(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function Iu(t){var e=[];return function t(n){return 0===n||1===n?1:e[n]>0?e[n]:e[n]=t(n-1)*n}(t)}function Nu(t){return Mu(t),Su(t)}function Su(t){return Array.isArray(t)?Ou(t):t&&t.bbox?Ou(t.bbox):[360*Tu(),180*Tu()]}function Mu(t){null!=t&&(Array.isArray(t)?Z(t):null!=t.bbox&&Z(t.bbox))}function Lu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Mu(e.bbox),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(w(Su(e.bbox)));return P(n)}function Pu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Mu(e.bbox),null==t&&(t=1),void 0!==e.bbox&&null!==e.bbox||(e.bbox=[-180,-90,180,90]),X(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),X(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);var n=Math.abs(e.bbox[0]-e.bbox[2]),r=Math.abs(e.bbox[1]-e.bbox[3]),i=Math.min(n/2,r/2);if(e.max_radial_length>i)throw new Error(\"max_radial_length is greater than the radius of the bbox\");for(var o=[e.bbox[0]+e.max_radial_length,e.bbox[1]+e.max_radial_length,e.bbox[2]-e.max_radial_length,e.bbox[3]-e.max_radial_length],s=[],a=function(){var t,n=[],r=v(Array(e.num_vertices+1)).map(Math.random);r.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),r.forEach(function(t){t=2*t*Math.PI/r[r.length-1];var i=Math.random();n.push([i*(e.max_radial_length||10)*Math.sin(t),i*(e.max_radial_length||10)*Math.cos(t)])}),n[n.length-1]=n[0],n=n.reverse().map((t=Su(o),function(e){return[e[0]+t[0],e[1]+t[1]]})),s.push(N([n]))},u=0;u<t;u++)a();return P(s)}function Cu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!U(e=e||{}))throw new Error(\"options is invalid\");var n=e.bbox;Mu(n);var r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!X(r)||void 0===r||r<2)&&(r=10),X(i)&&void 0!==i||(i=1e-4),X(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Su(n)],l=0;l<r-1;l++){var h=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,c=Math.random()*i;u.push([u[l][0]+c*Math.cos(h),u[l][1]+c*Math.sin(h)])}s.push(M(u))}return P(s)}function Tu(){return Math.random()-.5}function Ou(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var Ru=Object.freeze({__proto__:null,randomLineString:Cu,randomPoint:Lu,randomPolygon:Pu,randomPosition:Nu});function Au(t,e){switch(\"Feature\"===t.type?t.geometry.type:t.type){case\"GeometryCollection\":return yt(t,function(t){Au(t,e)}),t;case\"LineString\":return Du(K(t),e),t;case\"Polygon\":return Fu(K(t),e),t;case\"MultiLineString\":return K(t).forEach(function(t){Du(t,e)}),t;case\"MultiPolygon\":return K(t).forEach(function(t){Fu(t,e)}),t;case\"Point\":case\"MultiPoint\":return t}}function Du(t,e){Gt(t)===e&&t.reverse()}function Fu(t,e){Gt(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Gt(t[n])===e&&t[n].reverse()}function qu(t){var e=t%360;return e<0&&(e+=360),e}function Vu(t,e,n){if(!U(n=n||{}))throw new Error(\"options is invalid\");var r=n.origin||\"centroid\",i=n.mutate||!1;if(!t)throw new Error(\"geojson required\");if(\"number\"!=typeof e||e<=0)throw new Error(\"invalid factor\");var o=Array.isArray(r)||\"object\"===y(r);return!0!==i&&(t=wi(t)),\"FeatureCollection\"!==t.type||o?Gu(t,e,r):(pt(t,function(n,i){t.features[i]=Gu(n,e,r)}),t)}function Gu(t,e,n){var r=\"Point\"===rt(t),i=function(t,e){if(null==e&&(e=\"centroid\"),Array.isArray(e)||\"object\"===y(e))return J(e);var n=t.bbox?t.bbox:Ot(t,{recompute:!0}),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case\"sw\":case\"southwest\":case\"westsouth\":case\"bottomleft\":return w([r,i]);case\"se\":case\"southeast\":case\"eastsouth\":case\"bottomright\":return w([o,i]);case\"nw\":case\"northwest\":case\"westnorth\":case\"topleft\":return w([r,s]);case\"ne\":case\"northeast\":case\"eastnorth\":case\"topright\":return w([o,s]);case\"center\":return Tn(t);case void 0:case null:case\"centroid\":return si(t);default:throw new Error(\"invalid origin\")}}(t,n);return 1===e||r||(ht(t,function(t){var n=ws(i,t),r=ut(i,t),o=K(bs(i,n*e,r));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),delete t.bbox),t}function Bu(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Yu={search:function(t,e,n,r){var i;t.cleanDirty();var o=(r=r||{}).heuristic||Yu.heuristics.manhattan,s=null!=(i=r.closest)&&i,a=new Xu(function(t){return t.f}),u=e;for(e.h=o(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return Bu(l);l.closed=!0;for(var h=t.neighbors(l),c=0,f=h.length;c<f;++c){var g=h[c];if(!g.closed&&!g.isWall()){var p=l.g+g.getCost(l),v=g.visited;(!v||p<g.g)&&(g.visited=!0,g.parent=l,g.h=g.h||o(g,n),g.g=p,g.f=g.g+g.h,t.markDirty(g),s&&(g.h<u.h||g.h===u.h&&g.g<u.g)&&(u=g),v?a.rescoreElement(g):a.push(g))}}}return s?Bu(u):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function zu(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new ju(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function ju(t,e,n){this.x=t,this.y=e,this.weight=n}function Xu(t){this.content=[],this.scoreFunction=t}function Uu(t,e){for(var n=0;n<e.features.length;n++)if(Yt(t,e.features[n]))return!0;return!1}function Zu(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function Hu(t,e){var n=t.length-1,r=[t[0]];return function t(e,n,r,i,o){for(var s,a=i,u=n+1;u<r;u++){var l=Zu(e[u],e[n],e[r]);l>a&&(s=u,a=l)}a>i&&(s-n>1&&t(e,n,s,i,o),o.push(e[s]),r-s>1&&t(e,s,r,i,o))}(t,0,n,e,r),r.push(t[n]),r}function Wu(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return Hu(t=n?t:function(t,e){for(var n,r,i,o,s,a=t[0],u=[a],l=1,h=t.length;l<h;l++)i=a,void 0,void 0,(o=(r=n=t[l])[0]-i[0])*o+(s=r[1]-i[1])*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,r),r)}function Ju(t,e,n){return t.map(function(t){if(t.length<4)throw new Error(\"invalid polygon\");for(var r=e,i=Wu(t,r,n);!Ku(i);)i=Wu(t,r-=.01*r,n);return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function Ku(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}function Qu(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}zu.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Yu.cleanNode(this.nodes[t])},zu.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Yu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},zu.prototype.markDirty=function(t){this.dirtyNodes.push(t)},zu.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},zu.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(\" \"))}return i.join(\"\\n\")},ju.prototype.toString=function(){return\"[\"+this.x+\" \"+this.y+\"]\"},ju.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},ju.prototype.isWall=function(){return 0===this.weight},Xu.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var $u,tl={exports:{}},el=dn(function(){if($u)return tl.exports;function t(t,n,i){i=i||2;var o,s,a,h,c,g,p,v=n&&n.length,d=v?n[0]*i:t.length,y=e(t,0,d,i,!0),m=[];if(!y||y.next===y.prev)return m;if(v&&(y=function(t,n,r,i){var o,s,a,h=[];for(o=0,s=n.length;o<s;o++)(a=e(t,n[o]*i,o<s-1?n[o+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),h.push(f(a));for(h.sort(u),o=0;o<h.length;o++)r=l(h[o],r);return r}(t,n,y,i)),t.length>80*i){o=a=t[0],s=h=t[1];for(var _=i;_<d;_+=i)(c=t[_])<o&&(o=c),(g=t[_+1])<s&&(s=g),c>a&&(a=c),g>h&&(h=g);p=0!==(p=Math.max(a-o,h-s))?32767/p:0}return r(y,m,i,o,s,p,0),m}function e(t,e,n,r,i){var o,s;if(i===I(t,e,n,r)>0)for(o=e;o<n;o+=r)s=k(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=k(o,t[o],t[o+1],s);return s&&d(s,s.next)&&(b(s),s=s.next),s}function n(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!d(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(b(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,u,l,h,f,g){if(t){!g&&f&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=c(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,l,h,f);for(var p,v,d=t;t.prev!==t.next;)if(p=t.prev,v=t.next,f?o(t,l,h,f):i(t))e.push(p.i/u|0),e.push(t.i/u|0),e.push(v.i/u|0),b(t),t=v.next,d=v.next;else if((t=v)===d){g?1===g?r(t=s(n(t),e,u),e,u,l,h,f,2):2===g&&a(t,e,u,l,h,f):r(n(t),e,u,l,h,f,1);break}}}function i(t){var e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,u=n.y,l=r.y,h=i<o?i<s?i:s:o<s?o:s,c=a<u?a<l?a:l:u<l?u:l,f=i>o?i>s?i:s:o>s?o:s,p=a>u?a>l?a:l:u>l?u:l,d=r.next;d!==e;){if(d.x>=h&&d.x<=f&&d.y>=c&&d.y<=p&&g(i,a,o,u,s,l,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function o(t,e,n,r){var i=t.prev,o=t,s=t.next;if(v(i,o,s)>=0)return!1;for(var a=i.x,u=o.x,l=s.x,h=i.y,f=o.y,p=s.y,d=a<u?a<l?a:l:u<l?u:l,y=h<f?h<p?h:p:f<p?f:p,m=a>u?a>l?a:l:u>l?u:l,_=h>f?h>p?h:p:f>p?f:p,x=c(d,y,e,n,r),E=c(m,_,e,n,r),k=t.prevZ,b=t.nextZ;k&&k.z>=x&&b&&b.z<=E;){if(k.x>=d&&k.x<=m&&k.y>=y&&k.y<=_&&k!==i&&k!==s&&g(a,h,u,f,l,p,k.x,k.y)&&v(k.prev,k,k.next)>=0)return!1;if(k=k.prevZ,b.x>=d&&b.x<=m&&b.y>=y&&b.y<=_&&b!==i&&b!==s&&g(a,h,u,f,l,p,b.x,b.y)&&v(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;k&&k.z>=x;){if(k.x>=d&&k.x<=m&&k.y>=y&&k.y<=_&&k!==i&&k!==s&&g(a,h,u,f,l,p,k.x,k.y)&&v(k.prev,k,k.next)>=0)return!1;k=k.prevZ}for(;b&&b.z<=E;){if(b.x>=d&&b.x<=m&&b.y>=y&&b.y<=_&&b!==i&&b!==s&&g(a,h,u,f,l,p,b.x,b.y)&&v(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function s(t,e,r){var i=t;do{var o=i.prev,s=i.next.next;!d(o,s)&&y(o,i,i.next,s)&&x(o,s)&&x(s,o)&&(e.push(o.i/r|0),e.push(i.i/r|0),e.push(s.i/r|0),b(i),b(i.next),i=t=s),i=i.next}while(i!==t);return n(i)}function a(t,e,i,o,s,a){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&p(u,l)){var h=E(u,l);return u=n(u,u.next),h=n(h,h.next),r(u,e,i,o,s,a,0),void r(h,e,i,o,s,a,0)}l=l.next}u=u.next}while(u!==t)}function u(t,e){return t.x-e.x}function l(t,e){var r=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var u,l=n,c=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&g(o<f?i:s,o,c,f,o<f?s:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),x(r,t)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,p=u)),r=r.next}while(r!==l);return n}(t,e);if(!r)return e;var i=E(r,t);return n(i,i.next),n(r,r.next)}function h(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function g(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||d(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function d(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,r){var i=_(v(t,e,n)),o=_(v(t,e,r)),s=_(v(n,r,t)),a=_(v(n,r,e));return i!==o&&s!==a||!(0!==i||!m(t,n,e))||!(0!==o||!m(t,r,e))||!(0!==s||!m(n,t,r))||!(0!==a||!m(n,e,r))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function x(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function E(t,e){var n=new w(t.i,t.x,t.y),r=new w(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function k(t,e,n,r){var i=new w(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function b(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}return $u=1,tl.exports=t,tl.exports.default=t,t.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(I(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(I(t,l,h,n))}var c=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,g=r[a+1]*n,p=r[a+2]*n;c+=Math.abs((t[f]-t[p])*(t[g+1]-t[f+1])-(t[f]-t[g])*(t[p+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},t.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},tl.exports}());function nl(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=el(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),r.push(N([s]))}return r}function rl(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!rl(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function il(t){if(\"Feature\"!=t.type)throw new Error(\"The input must a geojson object of type Feature\");if(void 0===t.geometry||null==t.geometry)throw new Error(\"The input must a geojson object with a non-empty geometry\");if(\"Polygon\"!=t.geometry.type)throw new Error(\"The input must be a geojson Polygon\");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];ll(i[0],i[i.length-1])||i.push(i[0]);for(var o=0;o<i.length-1;o++)n.push(i[o])}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error(\"The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)\");var s=n.length,a=function(t,e,n){if(\"Polygon\"!==t.geometry.type)throw new Error(\"The input feature must be a Polygon\");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var s=[],a=0;a<r.length;a++)for(var u=0;u<r[a].length-1;u++)s.push(v(a,u));var l=new De;l.load(s)}for(var h=0;h<r.length;h++)for(var c=0;c<r[h].length-1;c++)if(n)l.search(v(h,c)).forEach(function(t){var e=t.ring,n=t.edge;p(h,c,e,n)});else for(var f=0;f<r.length;f++)for(var g=0;g<r[f].length-1;g++)p(h,c,f,g);return e||(i={type:\"Feature\",geometry:{type:\"MultiPoint\",coordinates:i}}),i;function p(t,n,s,a){var u,l,h=r[t][n],c=r[t][n+1],f=r[s][a],g=r[s][a+1],p=function(t,e,n,r){if(rl(t,n)||rl(t,r)||rl(e,n)||rl(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],h=r[0],c=r[1],f=(i-s)*(l-c)-(o-a)*(u-h);return 0===f?null:[((i*a-o*s)*(u-h)-(i-s)*(u*c-l*h))/f,((i*a-o*s)*(l-c)-(o-a)*(u*c-l*h))/f]}(h,c,f,g);if(null!==p&&(u=c[0]!==h[0]?(p[0]-h[0])/(c[0]-h[0]):(p[1]-h[1])/(c[1]-h[1]),l=g[0]!==f[0]?(p[0]-f[0])/(g[0]-f[0]):(p[1]-f[1])/(g[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var v=p,d=!o[v];d&&(o[v]=!0),e?i.push(e(p,t,n,h,c,u,s,a,f,g,l,d)):i.push(p)}}function v(t,e){var n,i,o,s,a=r[t][e],u=r[t][e+1];return a[0]<u[0]?(n=a[0],i=u[0]):(n=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:n,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}(t,function(t,e,n,r,i,o,s,a,u,l,h,c){return[t,e,n,r,i,o,s,a,u,l,h,c]}),u=a.length;if(0==u){var l=[];for(r=0;r<e;r++)l.push(N([t.geometry.coordinates[r]],{parent:-1,winding:ul(t.geometry.coordinates[r])}));var h=P(l);return q(),V(),h}var c=[],f=[];for(r=0;r<e;r++)for(c.push([]),o=0;o<t.geometry.coordinates[r].length-1;o++)c[r].push([new ol(t.geometry.coordinates[r][hl(o+1,t.geometry.coordinates[r].length-1)],1,[r,o],[r,hl(o+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new sl(t.geometry.coordinates[r][o],[r,hl(o-1,t.geometry.coordinates[r].length-1)],[r,o],void 0,void 0,!1,!0));for(r=0;r<u;r++)c[a[r][1]][a[r][2]].push(new ol(a[r][0],a[r][5],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0)),a[r][11]&&f.push(new sl(a[r][0],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0,void 0,!0,!0));var g=f.length;for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)c[r][o].sort(function(t,e){return t.param<e.param?-1:1});var p=[];for(r=0;r<g;r++)p.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var v=new De;for(v.load(p),r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)for(var d=0;d<c[r][o].length;d++){m=d==c[r][o].length-1?c[r][hl(o+1,t.geometry.coordinates[r].length-1)][0].coord:c[r][o][d+1].coord;var y=v.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0];c[r][o][d].nxtIsectAlongEdgeIn=y.index}for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)for(d=0;d<c[r][o].length;d++){var m=c[r][o][d].coord,_=(y=v.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0]).index;_<s?f[_].nxtIsectAlongRingAndEdge2=c[r][o][d].nxtIsectAlongEdgeIn:ll(f[_].ringAndEdge1,c[r][o][d].ringAndEdgeIn)?f[_].nxtIsectAlongRingAndEdge1=c[r][o][d].nxtIsectAlongEdgeIn:f[_].nxtIsectAlongRingAndEdge2=c[r][o][d].nxtIsectAlongEdgeIn}var x=[];for(r=0,o=0;o<e;o++){var E=r;for(d=0;d<t.geometry.coordinates[o].length-1;d++)f[r].coord[0]<f[E].coord[0]&&(E=r),r++;var k=f[E].nxtIsectAlongRingAndEdge2;for(d=0;d<f.length;d++)if(f[d].nxtIsectAlongRingAndEdge1==E||f[d].nxtIsectAlongRingAndEdge2==E){var b=d;break}var w=al([f[b].coord,f[E].coord,f[k].coord],!0)?1:-1;x.push({isect:E,parent:-1,winding:w})}for(x.sort(function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1}),l=[];x.length>0;){var I=x.pop(),S=I.isect,M=I.parent,L=I.winding,C=l.length,T=[f[S].coord],O=S;if(f[S].ringAndEdge1Walkable)var R=f[S].ringAndEdge1,A=f[S].nxtIsectAlongRingAndEdge1;else R=f[S].ringAndEdge2,A=f[S].nxtIsectAlongRingAndEdge2;for(;!ll(f[S].coord,f[A].coord);){T.push(f[A].coord);var D=void 0;for(r=0;r<x.length;r++)if(x[r].isect==A){D=r;break}if(null!=D&&x.splice(D,1),ll(R,f[A].ringAndEdge1)){if(R=f[A].ringAndEdge2,f[A].ringAndEdge2Walkable=!1,f[A].ringAndEdge1Walkable){var F={isect:A};al([f[O].coord,f[A].coord,f[f[A].nxtIsectAlongRingAndEdge2].coord],1==L)?(F.parent=M,F.winding=-L):(F.parent=C,F.winding=L),x.push(F)}O=A,A=f[A].nxtIsectAlongRingAndEdge2}else R=f[A].ringAndEdge1,f[A].ringAndEdge1Walkable=!1,f[A].ringAndEdge2Walkable&&(F={isect:A},al([f[O].coord,f[A].coord,f[f[A].nxtIsectAlongRingAndEdge1].coord],1==L)?(F.parent=M,F.winding=-L):(F.parent=C,F.winding=L),x.push(F)),O=A,A=f[A].nxtIsectAlongRingAndEdge1}T.push(f[A].coord),l.push(N([T],{index:C,parent:M,winding:L,netWinding:void 0}))}function q(){for(var t=[],e=0;e<h.features.length;e++)-1==h.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<h.features.length;r++)t[e]!=r&&Yt(h.features[t[e]].geometry.coordinates[0][0],h.features[r],{ignoreBoundary:!0})&&Mt(h.features[r])<1/0&&(n=r);h.features[t[e]].properties.parent=n}}function V(){for(var t=0;t<h.features.length;t++)if(-1==h.features[t].properties.parent){var e=h.features[t].properties.winding;h.features[t].properties.netWinding=e,G(t,e)}}function G(t,e){for(var n=0;n<h.features.length;n++)if(h.features[n].properties.parent==t){var r=e+h.features[n].properties.winding;h.features[n].properties.netWinding=r,G(n,r)}}return h=P(l),q(),V(),h}var ol=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},sl=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function al(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error(\"This function requires an array of three points [x,y]\");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function ul(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(al([t[hl(e-1,t.length-1)],t[e],t[hl(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function ll(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ll(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function hl(t,e){return(t%e+e)%e}function cl(t){return function(){return t}}function fl(t){return t[0]}function gl(t){return t[1]}function pl(){this._=null}function vl(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function dl(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function yl(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ml(t){for(;t.L;)t=t.L;return t}function _l(t,e,n,r){var i=[null,null],o=zl.push(i)-1;return i.left=t,i.right=e,n&&El(i,t,e,n),r&&El(i,e,t,r),Bl[t.index].halfedges.push(o),Bl[e.index].halfedges.push(o),i}function xl(t,e,n){var r=[e,n];return r.left=t,r}function El(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function kl(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],h=0,c=1,f=a[0]-u,g=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<h)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>h&&(h=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>h&&(h=o)}else if(f>0){if(o<h)return;o<c&&(c=o)}if(o=n-l,g||!(o>0)){if(o/=g,g<0){if(o<h)return;o<c&&(c=o)}else if(g>0){if(o>c)return;o>h&&(h=o)}if(o=i-l,g||!(o<0)){if(o/=g,g<0){if(o>c)return;o>h&&(h=o)}else if(g>0){if(o<h)return;o<c&&(c=o)}return!(h>0||c<1)||(h>0&&(t[0]=[u+h*f,l+h*g]),c<1&&(t[1]=[u+c*f,l+c*g]),!0)}}}}}function bl(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,h=t.right,c=l[0],f=l[1],g=h[0],p=h[1],v=(c+g)/2,d=(f+p)/2;if(p===f){if(v<e||v>=r)return;if(c>g){if(u){if(u[1]>=i)return}else u=[v,n];o=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];o=[v,n]}}else if(a=d-(s=(c-g)/(p-f))*v,s<-1||s>1)if(c>g){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(f<p){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function wl(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Il(t,e){return e[+(e.left!==t.site)]}function Nl(t,e){return e[+(e.left===t.site)]}pl.prototype={constructor:pl,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ml(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(dl(this,n),n=(t=n).U),n.C=!1,r.C=!0,yl(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(yl(this,n),n=(t=n).U),n.C=!1,r.C=!0,dl(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?ml(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,dl(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,yl(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,dl(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,yl(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,dl(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,yl(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Sl,Ml=[];function Ll(){vl(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pl(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,l=r[1]-a,h=o[0]-s,c=o[1]-a,f=2*(u*c-l*h);if(!(f>=-Xl)){var g=u*u+l*l,p=h*h+c*c,v=(c*g-l*p)/f,d=(u*p-h*g)/f,y=Ml.pop()||new Ll;y.arc=t,y.site=i,y.x=v+s,y.y=(y.cy=d+a)+Math.sqrt(v*v+d*d),t.circle=y;for(var m=null,_=Yl._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Yl.insert(m,y),m||(Sl=y)}}}}function Cl(t){var e=t.circle;e&&(e.P||(Sl=e.N),Yl.remove(e),Ml.push(e),vl(e),t.circle=null)}var Tl=[];function Ol(){vl(this),this.edge=this.site=this.circle=null}function Rl(t){var e=Tl.pop()||new Ol;return e.site=t,e}function Al(t){Cl(t),Gl.remove(t),Tl.push(t),vl(t)}function Dl(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Al(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<jl&&Math.abs(r-u.circle.cy)<jl;)o=u.P,a.unshift(u),Al(u),u=o;a.unshift(u),Cl(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<jl&&Math.abs(r-l.circle.cy)<jl;)s=l.N,a.push(l),Al(l),l=s;a.push(l),Cl(l);var h,c=a.length;for(h=1;h<c;++h)l=a[h],u=a[h-1],El(l.edge,u.site,l.site,i);u=a[0],(l=a[c-1]).edge=_l(u.site,l.site,null,i),Pl(u),Pl(l)}function Fl(t){for(var e,n,r,i,o=t[0],s=t[1],a=Gl._;a;)if((r=ql(a,s)-o)>jl)a=a.L;else{if(!((i=o-Vl(a,s))>jl)){r>-jl?(e=a.P,n=a):i>-jl?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Bl[t.index]={site:t,halfedges:[]}}(t);var u=Rl(t);if(Gl.insert(e,u),e||n){if(e===n)return Cl(e),n=Rl(e.site),Gl.insert(u,n),u.edge=n.edge=_l(e.site,u.site),Pl(e),void Pl(n);if(n){Cl(e),Cl(n);var l=e.site,h=l[0],c=l[1],f=t[0]-h,g=t[1]-c,p=n.site,v=p[0]-h,d=p[1]-c,y=2*(f*d-g*v),m=f*f+g*g,_=v*v+d*d,x=[(d*m-g*_)/y+h,(f*_-v*m)/y+c];El(n.edge,l,p,x),u.edge=_l(l,t,null,x),n.edge=_l(t,p,null,x),Pl(e),Pl(n)}else u.edge=_l(e.site,u.site)}}function ql(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var h=a-r,c=1/o-1/l,f=h/l;return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*l)-u+l/2+i-o/2)))/c+r:(r+a)/2}function Vl(t,e){var n=t.N;if(n)return ql(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Gl,Bl,Yl,zl,jl=1e-6,Xl=1e-12;function Ul(t,e){return e[1]-t[1]||e[0]-t[0]}function Zl(t,e){var n,r,i,o=t.sort(Ul).pop();for(zl=[],Bl=new Array(t.length),Gl=new pl,Yl=new pl;;)if(i=Sl,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Fl(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Dl(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Bl.length;i<o;++i)if((t=Bl[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=wl(t,zl[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=zl.length;o--;)bl(i=zl[o],t,e,n,r)&&kl(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>jl||Math.abs(i[0][1]-i[1][1])>jl)||delete zl[o]}(s,a,u,l),function(t,e,n,r){var i,o,s,a,u,l,h,c,f,g,p,v,d=Bl.length,y=!0;for(i=0;i<d;++i)if(o=Bl[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)zl[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)p=(g=Nl(o,zl[u[a]]))[0],v=g[1],c=(h=Il(o,zl[u[++a%l]]))[0],f=h[1],(Math.abs(p-c)>jl||Math.abs(v-f)>jl)&&(u.splice(a,0,zl.push(xl(s,g,Math.abs(p-t)<jl&&r-v>jl?[t,Math.abs(c-t)<jl?f:r]:Math.abs(v-r)<jl&&n-p>jl?[Math.abs(f-r)<jl?c:n,r]:Math.abs(p-n)<jl&&v-e>jl?[n,Math.abs(c-n)<jl?f:e]:Math.abs(v-e)<jl&&p-t>jl?[Math.abs(f-e)<jl?c:t,e]:null))-1),++l);l&&(y=!1)}if(y){var m,_,x,E=1/0;for(i=0,y=null;i<d;++i)(o=Bl[i])&&(x=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<E&&(E=x,y=o);if(y){var k=[t,e],b=[t,r],w=[n,r],I=[n,e];y.halfedges.push(zl.push(xl(s=y.site,k,b))-1,zl.push(xl(s,b,w))-1,zl.push(xl(s,w,I))-1,zl.push(xl(s,I,k))-1)}}for(i=0;i<d;++i)(o=Bl[i])&&(o.halfedges.length||delete Bl[i])}(s,a,u,l)}this.edges=zl,this.cells=Bl,Gl=Yl=zl=Bl=null}Zl.prototype={constructor:Zl,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Il(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,l,h=n.site,c=-1,f=e[i[o-1]],g=f.left===h?f.right:f.left;++c<o;)s=g,g=(f=e[i[c]]).left===h?f.right:f.left,s&&g&&r<s.index&&r<g.index&&(u=s,l=g,((a=h)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([h.data,s.data,g.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],h=u*u+l*l;do{i=o.cells[r=s],s=null,i.halfedges.forEach(function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],l=e-a[1],c=u*u+l*l;c<h&&(h=c,s=a.index)}})}while(null!==s);return o._found=r,null==n||h<=n*n?i.site:null}},t.along=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=nt(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var a=ot(r[o],r[o-1])-180;return st(r[o],s,a,n)}return w(r[o])}i+=at(r[o],r[o+1],n)}return w(r[r.length-1])},t.angle=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!U(r))throw new Error(\"options is invalid\");if(!t)throw new Error(\"startPoint is required\");if(!e)throw new Error(\"midPoint is required\");if(!n)throw new Error(\"endPoint is required\");var i=t,o=e,s=n,a=V(!0!==r.mercator?ot(o,i):ut(o,i)),u=V(!0!==r.mercator?ot(o,s):ut(o,s));u<a&&(u+=360);var l=u-a;return!0===r.explementary?360-l:l},t.applyFilter=Ti,t.area=Mt,t.areaFactors=E,t.azimuthToBearing=G,t.bbox=Ot,t.bboxClip=function(t,e){var n=nt(t),r=n.type,i=\"Feature\"===t.type?t.properties:{},o=n.coordinates;switch(r){case\"LineString\":case\"MultiLineString\":var s=[];return\"LineString\"===r&&(o=[o]),o.forEach(function(t){!function(t,e,n){var r,i,o,s,a,u=t.length,l=Dt(t[0],e),h=[];for(n||(n=[]),r=1;r<u;r++){for(s=t[r-1],i=o=Dt(a=t[r],e);;){if(!(l|i)){h.push(s),i!==o?(h.push(a),r<u-1&&(n.push(h),h=[])):r===u-1&&h.push(a);break}if(l&i)break;l?l=Dt(s=At(s,a,l,e),e):i=Dt(a=At(s,a,i,e),e)}l=o}h.length&&n.push(h)}(t,e,s)}),1===s.length?M(s[0],i):C(s,i);case\"Polygon\":return N(Ft(o,e),i);case\"MultiPolygon\":return O(o.map(function(t){return Ft(t,e)}),i);default:throw new Error(\"geometry \"+r+\" not supported\")}},t.bboxPolygon=qt,t.bearing=ot,t.bearingToAzimuth=V,t.bezierSpline=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=nt(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new Vt({duration:n,points:o,sharpness:r}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),M(i,e.properties)},t.booleanClockwise=Gt,t.booleanConcave=function(t){var e=nt(t).coordinates;if(e[0].length<=4)return!1;for(var n=!1,r=e[0].length-1,i=0;i<r;i++){var o=e[0][(i+2)%r][0]-e[0][(i+1)%r][0],s=e[0][(i+2)%r][1]-e[0][(i+1)%r][1],a=e[0][i][0]-e[0][(i+1)%r][0],u=o*(e[0][i][1]-e[0][(i+1)%r][1])-s*a;if(0===i)n=u>0;else if(n!==u>0)return!0}return!1},t.booleanContains=function(t,e){var n=nt(t),r=nt(e),i=n.type,o=r.type,s=n.coordinates,u=r.coordinates;switch(i){case\"Point\":if(\"Point\"===o)return Zt(s,u);throw new Error(\"feature2 \"+o+\" geometry not supported\");case\"MultiPoint\":switch(o){case\"Point\":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Zt(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case\"MultiPoint\":return function(t,e){var n,r=a(e.coordinates);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,s=!1,u=a(t.coordinates);try{for(u.s();!(i=u.n()).done;)if(Zt(o,i.value)){s=!0;break}}catch(t){u.e(t)}finally{u.f()}if(!s)return!1}}catch(t){r.e(t)}finally{r.f()}return!0}(n,r);default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"LineString\":switch(o){case\"Point\":return zt(r,n,{ignoreEndVertices:!0});case\"LineString\":return function(t,e){var n,r=!1,i=a(e.coordinates);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(zt({type:\"Point\",coordinates:o},t,{ignoreEndVertices:!0})&&(r=!0),!zt({type:\"Point\",coordinates:o},t,{ignoreEndVertices:!1}))return!1}}catch(t){i.e(t)}finally{i.f()}return r}(n,r);case\"MultiPoint\":return function(t,e){var n,r=!1,i=a(e.coordinates);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(zt(o,t,{ignoreEndVertices:!0})&&(r=!0),!zt(o,t))return!1}}catch(t){i.e(t)}finally{i.f()}return!!r}(n,r);default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"Polygon\":switch(o){case\"Point\":return Yt(r,n,{ignoreBoundary:!0});case\"LineString\":return function(t,e){var n=!1,r=0;if(!Ut(Ot(t),Ot(e)))return!1;for(;r<e.coordinates.length-1;r++)if(Yt({type:\"Point\",coordinates:Ht(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case\"Polygon\":return Xt(n,r);case\"MultiPoint\":return function(t,e){var n,r=a(e.coordinates);try{for(r.s();!(n=r.n()).done;)if(!Yt(n.value,t,{ignoreBoundary:!0}))return!1}catch(t){r.e(t)}finally{r.f()}return!0}(n,r);default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"MultiPolygon\":if(\"Polygon\"===o)return function(t,e){return n.coordinates.some(function(t){return Xt({type:\"Polygon\",coordinates:t},e)})}(0,r);throw new Error(\"feature2 \"+o+\" geometry not supported\");default:throw new Error(\"feature1 \"+i+\" geometry not supported\")}},t.booleanCrosses=he,t.booleanDisjoint=ve,t.booleanEqual=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).precision;if(\"number\"!=typeof(n=null==n||isNaN(n)?6:n)||!(n>=0))throw new Error(\"precision must be a positive number\");return nt(t).type===nt(e).type&&Ie(Me(t),Me(e),{precision:n})},t.booleanIntersects=Te,t.booleanOverlap=function(t,e){var n=nt(t),r=nt(e),i=n.type,o=r.type;if(\"MultiPoint\"===i&&\"MultiPoint\"!==o||(\"LineString\"===i||\"MultiLineString\"===i)&&\"LineString\"!==o&&\"MultiLineString\"!==o||(\"Polygon\"===i||\"MultiPolygon\"===i)&&\"Polygon\"!==o&&\"MultiPolygon\"!==o)throw new Error(\"features must be of the same type\");if(\"Point\"===i)throw new Error(\"Point geometry not supported\");if(Ie(t,e,{precision:6}))return!1;var s=0;switch(i){case\"MultiPoint\":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var l=n.coordinates[a],h=r.coordinates[u];if(l[0]===h[0]&&l[1]===h[1])return!0}return!1;case\"LineString\":case\"MultiLineString\":Et(t,function(t){Et(e,function(e){_n(t,e).features.length&&s++})});break;case\"Polygon\":case\"MultiPolygon\":Et(t,function(t){Et(e,function(e){ae(t,e).features.length&&s++})})}return s>0},t.booleanParallel=function(t,e){if(!t)throw new Error(\"line1 is required\");if(!e)throw new Error(\"line2 is required\");if(\"LineString\"!==kn(t,\"line1\"))throw new Error(\"line1 must be a LineString\");if(\"LineString\"!==kn(e,\"line2\"))throw new Error(\"line2 must be a LineString\");for(var n=Ke(Me(t)).features,r=Ke(Me(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!En(o,r[i].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=Yt,t.booleanPointOnLine=zt,t.booleanTouches=function(t,e){var n=nt(t),r=nt(e),i=n.type,o=r.type;switch(i){case\"Point\":switch(o){case\"LineString\":return bn(n,r);case\"MultiLineString\":for(var s=!1,a=0;a<r.coordinates.length;a++)bn(n,{type:\"LineString\",coordinates:r.coordinates[a]})&&(s=!0);return s;case\"Polygon\":for(var u=0;u<r.coordinates.length;u++)if(zt(n,{type:\"LineString\",coordinates:r.coordinates[u]}))return!0;return!1;case\"MultiPolygon\":for(u=0;u<r.coordinates.length;u++)for(a=0;a<r.coordinates[u].length;a++)if(zt(n,{type:\"LineString\",coordinates:r.coordinates[u][a]}))return!0;return!1;default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"MultiPoint\":switch(o){case\"LineString\":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||bn({type:\"Point\",coordinates:n.coordinates[u]},r)&&(s=!0),zt({type:\"Point\",coordinates:n.coordinates[u]},r,{ignoreEndVertices:!0}))return!1;return s;case\"MultiLineString\":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)if(s||bn({type:\"Point\",coordinates:n.coordinates[u]},{type:\"LineString\",coordinates:r.coordinates[a]})&&(s=!0),zt({type:\"Point\",coordinates:n.coordinates[u]},{type:\"LineString\",coordinates:r.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case\"Polygon\":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||zt({type:\"Point\",coordinates:n.coordinates[u]},{type:\"LineString\",coordinates:r.coordinates[0]})&&(s=!0),Yt({type:\"Point\",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1;return s;case\"MultiPolygon\":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)if(s||zt({type:\"Point\",coordinates:n.coordinates[u]},{type:\"LineString\",coordinates:r.coordinates[a][0]})&&(s=!0),Yt({type:\"Point\",coordinates:n.coordinates[u]},{type:\"Polygon\",coordinates:r.coordinates[a]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"LineString\":switch(o){case\"Point\":return bn(r,n);case\"MultiPoint\":for(s=!1,u=0;u<r.coordinates.length;u++)if(s||bn({type:\"Point\",coordinates:r.coordinates[u]},n)&&(s=!0),zt({type:\"Point\",coordinates:r.coordinates[u]},n,{ignoreEndVertices:!0}))return!1;return s;case\"LineString\":var l=!1;if(bn({type:\"Point\",coordinates:n.coordinates[0]},r)&&(l=!0),bn({type:\"Point\",coordinates:n.coordinates[n.coordinates.length-1]},r)&&(l=!0),!1===l)return!1;for(u=0;u<n.coordinates.length;u++)if(zt({type:\"Point\",coordinates:n.coordinates[u]},r,{ignoreEndVertices:!0}))return!1;return l;case\"MultiLineString\":for(l=!1,u=0;u<r.coordinates.length;u++)for(bn({type:\"Point\",coordinates:n.coordinates[0]},{type:\"LineString\",coordinates:r.coordinates[u]})&&(l=!0),bn({type:\"Point\",coordinates:n.coordinates[n.coordinates.length-1]},{type:\"LineString\",coordinates:r.coordinates[u]})&&(l=!0),a=0;a<n.coordinates[u].length;a++)if(zt({type:\"Point\",coordinates:n.coordinates[a]},{type:\"LineString\",coordinates:r.coordinates[u]},{ignoreEndVertices:!0}))return!1;return l;case\"Polygon\":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||zt({type:\"Point\",coordinates:n.coordinates[u]},{type:\"LineString\",coordinates:r.coordinates[0]})&&(s=!0),Yt({type:\"Point\",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1;return s;case\"MultiPolygon\":for(s=!1,u=0;u<n.coordinates.length;u++){for(a=0;a<r.coordinates.length;a++)s||zt({type:\"Point\",coordinates:n.coordinates[u]},{type:\"LineString\",coordinates:r.coordinates[a][0]})&&(s=!0);if(Yt({type:\"Point\",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1}return s;default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"MultiLineString\":switch(o){case\"Point\":for(u=0;u<n.coordinates.length;u++)if(bn(r,{type:\"LineString\",coordinates:n.coordinates[u]}))return!0;return!1;case\"MultiPoint\":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)if(s||bn({type:\"Point\",coordinates:r.coordinates[a]},{type:\"LineString\",coordinates:n.coordinates[a]})&&(s=!0),zt({type:\"Point\",coordinates:r.coordinates[a]},{type:\"LineString\",coordinates:n.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case\"LineString\":for(l=!1,u=0;u<n.coordinates.length;u++)for(bn({type:\"Point\",coordinates:n.coordinates[u][0]},r)&&(l=!0),bn({type:\"Point\",coordinates:n.coordinates[u][n.coordinates[u].length-1]},r)&&(l=!0),a=0;a<r.coordinates.length;a++)if(zt({type:\"Point\",coordinates:r.coordinates[a]},{type:\"LineString\",coordinates:n.coordinates[u]},{ignoreEndVertices:!0}))return!1;return l;case\"MultiLineString\":for(l=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++){bn({type:\"Point\",coordinates:n.coordinates[u][0]},{type:\"LineString\",coordinates:r.coordinates[a]})&&(l=!0),bn({type:\"Point\",coordinates:n.coordinates[u][n.coordinates[u].length-1]},{type:\"LineString\",coordinates:r.coordinates[a]})&&(l=!0);for(var h=0;h<n.coordinates[u].length;h++)if(zt({type:\"Point\",coordinates:n.coordinates[u][h]},{type:\"LineString\",coordinates:r.coordinates[a]},{ignoreEndVertices:!0}))return!1}return l;case\"Polygon\":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<n.coordinates.length;a++)if(s||zt({type:\"Point\",coordinates:n.coordinates[u][a]},{type:\"LineString\",coordinates:r.coordinates[0]})&&(s=!0),Yt({type:\"Point\",coordinates:n.coordinates[u][a]},r,{ignoreBoundary:!0}))return!1;return s;case\"MultiPolygon\":for(s=!1,u=0;u<r.coordinates[0].length;u++)for(a=0;a<n.coordinates.length;a++)for(h=0;h<n.coordinates[a].length;h++)if(s||zt({type:\"Point\",coordinates:n.coordinates[a][h]},{type:\"LineString\",coordinates:r.coordinates[0][u]})&&(s=!0),Yt({type:\"Point\",coordinates:n.coordinates[a][h]},{type:\"Polygon\",coordinates:[r.coordinates[0][u]]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"Polygon\":switch(o){case\"Point\":for(u=0;u<n.coordinates.length;u++)if(zt(r,{type:\"LineString\",coordinates:n.coordinates[u]}))return!0;return!1;case\"MultiPoint\":case\"LineString\":for(s=!1,u=0;u<r.coordinates.length;u++)if(s||zt({type:\"Point\",coordinates:r.coordinates[u]},{type:\"LineString\",coordinates:n.coordinates[0]})&&(s=!0),Yt({type:\"Point\",coordinates:r.coordinates[u]},n,{ignoreBoundary:!0}))return!1;return s;case\"MultiLineString\":for(s=!1,u=0;u<r.coordinates.length;u++)for(a=0;a<r.coordinates[u].length;a++)if(s||zt({type:\"Point\",coordinates:r.coordinates[u][a]},{type:\"LineString\",coordinates:n.coordinates[0]})&&(s=!0),Yt({type:\"Point\",coordinates:r.coordinates[u][a]},n,{ignoreBoundary:!0}))return!1;return s;case\"Polygon\":for(s=!1,u=0;u<n.coordinates[0].length;u++)if(s||zt({type:\"Point\",coordinates:n.coordinates[0][u]},{type:\"LineString\",coordinates:r.coordinates[0]})&&(s=!0),Yt({type:\"Point\",coordinates:n.coordinates[0][u]},r,{ignoreBoundary:!0}))return!1;return s;case\"MultiPolygon\":for(s=!1,u=0;u<r.coordinates[0].length;u++)for(a=0;a<n.coordinates[0].length;a++)if(s||zt({type:\"Point\",coordinates:n.coordinates[0][a]},{type:\"LineString\",coordinates:r.coordinates[0][u]})&&(s=!0),Yt({type:\"Point\",coordinates:n.coordinates[0][a]},{type:\"Polygon\",coordinates:r.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}case\"MultiPolygon\":switch(o){case\"Point\":for(u=0;u<n.coordinates[0].length;u++)if(zt(r,{type:\"LineString\",coordinates:n.coordinates[0][u]}))return!0;return!1;case\"MultiPoint\":case\"LineString\":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<r.coordinates.length;a++)if(s||zt({type:\"Point\",coordinates:r.coordinates[a]},{type:\"LineString\",coordinates:n.coordinates[0][u]})&&(s=!0),Yt({type:\"Point\",coordinates:r.coordinates[a]},{type:\"Polygon\",coordinates:n.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;case\"MultiLineString\":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)for(h=0;h<r.coordinates[a].length;h++)if(s||zt({type:\"Point\",coordinates:r.coordinates[a][h]},{type:\"LineString\",coordinates:n.coordinates[u][0]})&&(s=!0),Yt({type:\"Point\",coordinates:r.coordinates[a][h]},{type:\"Polygon\",coordinates:[n.coordinates[u][0]]},{ignoreBoundary:!0}))return!1;return s;case\"Polygon\":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<n.coordinates[0][u].length;a++)if(s||zt({type:\"Point\",coordinates:n.coordinates[0][u][a]},{type:\"LineString\",coordinates:r.coordinates[0]})&&(s=!0),Yt({type:\"Point\",coordinates:n.coordinates[0][u][a]},r,{ignoreBoundary:!0}))return!1;return s;case\"MultiPolygon\":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<r.coordinates[0].length;a++)for(h=0;h<n.coordinates[0].length;h++)if(s||zt({type:\"Point\",coordinates:n.coordinates[0][u][h]},{type:\"LineString\",coordinates:r.coordinates[0][a]})&&(s=!0),Yt({type:\"Point\",coordinates:n.coordinates[0][u][h]},{type:\"Polygon\",coordinates:r.coordinates[0][a]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error(\"feature2 \"+o+\" geometry not supported\")}default:throw new Error(\"feature1 \"+i+\" geometry not supported\")}},t.booleanValid=function(t){if(!t.type)return!1;var e=nt(t),n=e.type,r=e.coordinates;switch(n){case\"Point\":return r.length>1;case\"MultiPoint\":for(var i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case\"LineString\":case\"MultiLineString\":if(r.length<2)return!1;for(i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case\"Polygon\":for(i=0;i<e.coordinates.length;i++){if(r[i].length<4)return!1;if(!In(r[i]))return!1;if(Nn(r[i]))return!1;if(i>0&&ae(N([r[0]]),N([r[i]])).features.length>1)return!1}return!0;case\"MultiPolygon\":for(i=0;i<e.coordinates.length;i++)for(var o=e.coordinates[i],s=0;s<o.length;s++){if(o[s].length<4)return!1;if(!In(o[s]))return!1;if(Nn(o[s]))return!1;if(0===s&&!Sn(o,e.coordinates,i))return!1;if(s>0&&ae(N([o[0]]),N([o[s]])).features.length>1)return!1}return!0;default:return!1}},t.booleanWithin=Mn,t.buffer=function(t,e,n){var r=(n=n||{}).units||\"kilometers\",i=n.steps||8;if(!t)throw new Error(\"geojson is required\");if(\"object\"!==y(n))throw new Error(\"options must be an object\");if(\"number\"!=typeof i)throw new Error(\"steps must be an number\");if(void 0===e)throw new Error(\"radius is required\");if(i<=0)throw new Error(\"steps must be greater than 0\");var o=[];switch(t.type){case\"GeometryCollection\":return yt(t,function(t){var n=ni(t,e,r,i);n&&o.push(n)}),P(o);case\"FeatureCollection\":return pt(t,function(t){var n=ni(t,e,r,i);n&&pt(n,function(t){t&&o.push(t)})}),P(o)}return ni(t,e,r,i)},t.center=Tn,t.centerMean=oi,t.centerMedian=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!U(e=e||{}))throw new Error(\"options is invalid\");var n=e.counter||10;if(!X(n))throw new Error(\"counter must be a number\");var r=e.weight,i=oi(t,{weight:e.weight}),o=P([]);pt(t,function(t){var e;o.features.push(si(t,{properties:{weight:null==(e=t.properties)?void 0:e[r]}}))});var s={tolerance:e.tolerance,medianCandidates:[]};return function t(e,n,r,i,o){var s=i.tolerance||.001,a=0,u=0,l=0,h=0;if(pt(r,function(t){var n,r=null==(n=t.properties)?void 0:n.weight,i=null==r?1:r;if(!X(i=Number(i)))throw new Error(\"weight value must be a number\");if(i>0){h+=1;var o=i*at(t,e);0===o&&(o=1);var s=i/o;a+=t.geometry.coordinates[0]*s,u+=t.geometry.coordinates[1]*s,l+=s}}),h<1)throw new Error(\"no features to measure\");var c=a/l,f=u/l;return 1===h||0===o||Math.abs(c-n[0])<s&&Math.abs(f-n[1])<s?w([c,f],{medianCandidates:i.medianCandidates}):(i.medianCandidates.push([c,f]),t([c,f],e,r,i,o-1))}(i.geometry.coordinates,[0,0],o,s,n)},t.centerOfMass=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(rt(e)){case\"Point\":return w(J(e),n.properties);case\"Polygon\":var r=[];ht(e,function(t){r.push(t)});var i,o,s,a,u,l,h,c,f=si(e,{properties:n.properties}),g=f.geometry.coordinates,p=0,v=0,d=0,y=r.map(function(t){return[t[0]-g[0],t[1]-g[1]]});for(i=0;i<r.length-1;i++)a=(o=y[i])[0],l=o[1],u=(s=y[i+1])[0],d+=c=a*(h=s[1])-u*l,p+=(a+u)*c,v+=(l+h)*c;if(0===d)return f;var m=1/(.5*d*6);return w([g[0]+m*p,g[1]+m*v],n.properties);default:var _=ki(e);return _?t(_,{properties:n.properties}):si(e,{properties:n.properties})}},t.centroid=si,t.circle=bi,t.cleanCoords=Me,t.clone=wi,t.cloneProperties=Ni,t.clusterEach=Li,t.clusterReduce=Pi,t.clusters=Bi,t.clustersDbscan=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0!==n.mutate&&(t=wi(t));var r=n.minPoints||3,i=q(e,n.units),o=new Yi(t.features.length),s=t.features.map(function(t){return!1}),a=t.features.map(function(t){return!1}),u=t.features.map(function(t){return!1}),l=t.features.map(function(t){return-1});o.load(t.features.map(function(t,e){var n=p(t.geometry.coordinates,2),r=n[0],i=n[1];return{minX:r,minY:i,maxX:r,maxY:i,index:e}}));var h=function(n){var r=t.features[n],s=p(r.geometry.coordinates,2),a=s[0],u=s[1],l=Math.max(u-i,-90),h=Math.min(u+i,90),c=l<0&&h>0?i:Math.abs(l)<Math.abs(h)?i/Math.cos(Y(h)):i/Math.cos(Y(l)),f={minX:Math.max(a-c,-360),minY:l,maxX:Math.min(a+c,360),maxY:h};return o.search(f).filter(function(n){var i=n.index,o=t.features[i];return at(r,o,{units:\"kilometers\"})<=e})},c=0;return t.features.forEach(function(t,e){if(!s[e]){var n=h(e);if(n.length>=r){var i=c;c++,s[e]=!0,function(t,e){for(var n=0;n<e.length;n++){var i=e[n].index;if(!s[i]){s[i]=!0;var o=h(i);o.length>=r&&e.push.apply(e,v(o))}a[i]||(a[i]=!0,l[i]=t)}}(i,n)}else u[e]=!0}}),t.features.forEach(function(e,n){var r=t.features[n];r.properties||(r.properties={}),l[n]>=0?(r.properties.dbscan=u[n]?\"edge\":\"core\",r.properties.cluster=l[n]):r.properties.dbscan=\"noise\"}),t},t.clustersKmeans=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=wi(t));var r=dt(t),i=r.slice(0,e.numberOfClusters),o=ji(r,e.numberOfClusters,i),s={};return o.centroids.forEach(function(t,e){s[e]=t}),pt(t,function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]}),t},t.collect=function(t,e,n,r){var i=new Xi(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null==(e=t.properties)?void 0:e[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=Ot(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach(function(e){Yt([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[r]=o}),t},t.collectionOf=et,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return pt(t,function(t){var n,r,i,o;switch(null==(o=t.geometry)?void 0:o.type){case\"Point\":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case\"MultiPoint\":(n=e.MultiPoint.coordinates).push.apply(n,v(t.geometry.coordinates)),e.MultiPoint.properties.push(t.properties);break;case\"LineString\":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case\"MultiLineString\":(r=e.MultiLineString.coordinates).push.apply(r,v(t.geometry.coordinates)),e.MultiLineString.properties.push(t.properties);break;case\"Polygon\":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case\"MultiPolygon\":(i=e.MultiPolygon.coordinates).push.apply(i,v(t.geometry.coordinates)),e.MultiPolygon.properties.push(t.properties)}}),P(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return k({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},t.concave=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxEdge||1/0,r=Ui(function(t){var e=[],n={};return pt(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join(\"-\");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}}),P(e)}(t));if(r.features=r.features.filter(function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=at(r,i,e),a=at(i,o,e),u=at(r,o,e);return s<=n&&a<=n&&u<=n}),r.features.length<1)return null;var i=vo(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type=\"Polygon\"),k(i)},t.containsNumber=Q,t.convertArea=j,t.convertLength=z,t.convex=ki,t.coordAll=dt,t.coordEach=ht,t.coordReduce=ct,t.createBins=Ci,t.degreesToRadians=Y,t.destination=st,t.difference=function(t){var e=[];if(yt(t,function(t){e.push(t.coordinates)}),e.length<2)throw new Error(\"Must have at least two features\");var n=t.features[0].properties||{},r=ys.apply(_s,[e[0]].concat(v(e.slice(1))));return 0===r.length?null:1===r.length?N(r[0],n):O(r,n)},t.dissolve=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!U(e=e||{}))throw new Error(\"options is invalid\");var n=e.propertyName;et(t,\"Polygon\",\"dissolve\");var r=[];if(!n)return xs(O(vs.apply(null,t.features.map(function(t){return t.geometry.coordinates}))));var i={};pt(t,function(t){t.properties&&(Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t))});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=O(vs.apply(null,i[o[s]].map(function(t){return t.geometry.coordinates})));a&&a.properties&&(a.properties[n]=o[s],r.push(a))}return xs(P(r))},t.distance=at,t.distanceWeight=ks,t.earthRadius=_,t.ellipse=Ns,t.envelope=Ms,t.explode=Ls,t.factors=x,t.feature=k,t.featureCollection=P,t.featureEach=pt,t.featureOf=tt,t.featureReduce=vt,t.filterProperties=Ri,t.findPoint=Nt,t.findSegment=It,t.flatten=xs,t.flattenEach=_t,t.flattenReduce=xt,t.flip=function(t,e){var n;if(!U(e=e||{}))throw new Error(\"options is invalid\");var r=null!=(n=e.mutate)&&n;if(!t)throw new Error(\"geojson is required\");return!1!==r&&void 0!==r||(t=wi(t)),ht(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.geojsonRbush=Je,t.geojsonType=$,t.geomEach=yt,t.geomReduce=mt,t.geometry=b,t.geometryCollection=R,t.getCluster=Mi,t.getCoord=J,t.getCoords=K,t.getGeom=nt,t.getType=rt,t.greatCircle=function(t,e,n){if(\"object\"!==y(n=n||{}))throw new Error(\"options is invalid\");var r=n.properties,i=n.npoints,o=n.offset;if(t=J(t),e=J(e),r=r||{},i=i||100,t[0]===e[0]&&t[1]===e[1]){var s=Array(i);return s.fill([t[0],t[1]]),M(s,r)}return o=o||10,new As({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.helpers=W,t.hexGrid=Fs,t.interpolate=function(t,e,n){if(\"object\"!==y(n=n||{}))throw new Error(\"options is invalid\");var r,i=n.gridType,o=n.property,s=n.weight,a=n.bbox;if(!t)throw new Error(\"points is required\");if(et(t,\"Point\",\"input must contain Points\"),!e)throw new Error(\"cellSize is required\");if(void 0!==s&&\"number\"!=typeof s)throw new Error(\"weight must be a number\");switch(o=o||\"elevation\",i=i||\"square\",s=s||1,Z(a=null!=a?a:Ot(t)),i){case\"point\":case\"points\":r=Gs(a,e,n);break;case\"square\":case\"squares\":r=Ys(a,e,n);break;case\"hex\":case\"hexes\":r=Fs(a,e,n);break;case\"triangle\":case\"triangles\":r=zs(a,e,n);break;default:throw new Error(\"invalid gridType\")}var u=[];return pt(r,function(e){var r=0,a=0;pt(t,function(t){var u,l=at(\"point\"===i?e:si(e),t,n);if(void 0!==o&&(u=t.properties[o]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error(\"zValue is missing\");0===l&&(r=u);var h=1/Math.pow(l,s);a+=h,r+=h*u});var l=wi(e);l.properties[o]=r/a,u.push(l)}),P(u)},t.intersect=Ds,t.invariant=it,t.isNumber=X,t.isObject=U,t.isobands=function(t,e,n){if(!U(n=n||{}))throw new Error(\"options is invalid\");var r=n.zProperty||\"elevation\",i=n.commonProperties||{},o=n.breaksProperties||[];if(et(t,\"Point\",\"Input must contain Points\"),!e)throw new Error(\"breaks is required\");if(!Array.isArray(e))throw new Error(\"breaks is not an Array\");if(!U(i))throw new Error(\"commonProperties is not an Object\");if(!Array.isArray(o))throw new Error(\"breaksProperties is not an Array\");var s=function(t,e){if(!U(e=e||{}))throw new Error(\"options is invalid\");var n=e.zProperty||\"elevation\",r=e.flip,i=e.flags;et(t,\"Point\",\"input must contain Points\");for(var o=function(t,e){var n={};return pt(t,function(t){var e=K(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return K(t)[0]-K(e)[0]})}).sort(function(t,n){return e?K(t[0])[1]-K(n[0])[1]:K(n[0])[1]-K(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=ga(fa(ra(t,o,s-o)));r.push(u({groupedRings:a},n,o+\"-\"+s))}return r}(s,e,r);return P((a=function(t,e,n){var r=Ot(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,h=i/u,c=o/l;return t.map(function(t){return t.groupedRings=t.groupedRings.map(function(t){return t.map(function(t){return t.map(function(t){return[t[0]*h+s,t[1]*c+a]})})}),t})}(a,s,t)).map(function(t,e){if(o[e]&&!U(o[e]))throw new Error(\"Each mappedProperty is required to be an Object\");var n=ca(ca({},i),o[e]);return n[r]=t[r],O(t.groupedRings,n)}))},t.isolines=function(t,e,n){if(!U(n=n||{}))throw new Error(\"options is invalid\");var r=n.zProperty||\"elevation\",i=n.commonProperties||{},o=n.breaksProperties||[];if(et(t,\"Point\",\"Input must contain Points\"),!e)throw new Error(\"breaks is required\");if(!Array.isArray(e))throw new Error(\"breaks must be an Array\");if(!U(i))throw new Error(\"commonProperties must be an Object\");if(!Array.isArray(o))throw new Error(\"breaksProperties must be an Array\");var s=function(t,e){if(!U(e=e||{}))throw new Error(\"options is invalid\");var n=e.zProperty||\"elevation\",r=e.flip,i=e.flags;et(t,\"Point\",\"input must contain Points\");for(var o=function(t,e){var n={};return pt(t,function(t){var e=K(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return K(t)[0]-K(e)[0]})}).sort(function(t,n){return e?K(t[0])[1]-K(n[0])[1]:K(n[0])[1]-K(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}(t,{zProperty:r,flip:!0});return P(function(t,e,n){var r=Ot(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,h=i/u,c=o/l,f=function(t){t[0]=t[0]*h+s,t[1]=t[1]*c+a};return t.forEach(function(t){ht(t,f)}),t}(function(t,e,n,r,i){for(var o=[],s=0;s<e.length;s++){var a=+e[s],u=Ea(Ea({},r),i[s]);u[n]=a;var l=C(ta(t,a,{linearRing:!1,noFrame:!0}),u);o.push(l)}return o}(s,e,r,i,o),s,t))},t.kinks=function(t){var e,n,r={type:\"FeatureCollection\",features:[]};if(\"LineString\"===(n=\"Feature\"===t.type?t.geometry:t).type)e=[n.coordinates];else if(\"MultiLineString\"===n.type)e=n.coordinates;else if(\"MultiPolygon\"===n.type){var i;e=(i=[]).concat.apply(i,v(n.coordinates))}else{if(\"Polygon\"!==n.type)throw new Error(\"Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry\");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=ka(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(w([o[0],o[1]]))}})}),r},t.length=ba,t.lengthToDegrees=q,t.lengthToRadians=F,t.lineArc=wa,t.lineChunk=function(t,e,n){if(!U(n=n||{}))throw new Error(\"options is invalid\");var r=n.units,i=n.reverse;if(!t)throw new Error(\"geojson is required\");if(e<=0)throw new Error(\"segmentLength must be greater than 0\");var o=[];return _t(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=ba(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)r(Na(t,e*s,e*(s+1),{units:n}))}(t,e,r,function(t){o.push(t)})}),P(o)},t.lineEach=bt,t.lineIntersect=ae,t.lineOffset=function(t,e,n){if(!U(n=n||{}))throw new Error(\"options is invalid\");var r=n.units;if(!t)throw new Error(\"geojson is required\");if(null==e||isNaN(e))throw new Error(\"distance is required\");var i=rt(t),o=t.properties;switch(i){case\"LineString\":return La(t,e,r);case\"MultiLineString\":var s=[];return _t(t,function(t){s.push(La(t,e,r).geometry.coordinates)}),C(s,o);default:throw new Error(\"geometry \"+i+\" is not supported\")}},t.lineOverlap=_n,t.lineReduce=wt,t.lineSegment=Ke,t.lineSlice=function(t,e,n){var r=K(n);if(\"LineString\"!==rt(n))throw new Error(\"line must be a LineString\");for(var i,o=hn(n,t),s=hn(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),M(a,n.properties)},t.lineSliceAlong=Na,t.lineSplit=function(t,e){if(!t)throw new Error(\"line is required\");if(!e)throw new Error(\"splitter is required\");var n=rt(t),r=rt(e);if(\"LineString\"!==n)throw new Error(\"line must be LineString\");if(\"FeatureCollection\"===r)throw new Error(\"splitter cannot be a FeatureCollection\");if(\"GeometryCollection\"===r)throw new Error(\"splitter cannot be a GeometryCollection\");var i=Ca(e,{precision:7});switch(r){case\"Point\":return Oa(t,i);case\"MultiPoint\":return Ta(t,i);case\"LineString\":case\"MultiLineString\":case\"Polygon\":case\"MultiPolygon\":return Ta(t,ae(t,i,{ignoreSelfIntersections:!0}))}},t.lineString=M,t.lineStrings=L,t.lineToPolygon=function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.properties,s=null==(e=i.autoComplete)||e,a=null==(n=i.orderCoords)||n;if(null!=(r=i.mutate)&&r||(t=wi(t)),\"FeatureCollection\"===t.type){var u=[];return t.features.forEach(function(t){u.push(K(Da(t,{},s,a)))}),O(u,o)}return Da(t,o,s,a)},t.mask=function(t,e,n){var r,i=null!=(r=null==n?void 0:n.mutate)&&r,o=e;e&&!1===i&&(o=wi(e));var s,a=function(t){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return t&&(e=\"Feature\"===t.type?t.geometry.coordinates:t.coordinates),N(e)}(o);return(\"FeatureCollection\"===t.type?qa(2===(s=t).features.length?vs(s.features[0].geometry.coordinates,s.features[1].geometry.coordinates):vs.apply(_s,s.features.map(function(t){return t.geometry.coordinates}))):\"Feature\"===t.type?qa(vs(t.geometry.coordinates)):qa(vs(t.coordinates))).geometry.coordinates.forEach(function(t){a.geometry.coordinates.push(t[0])}),a},t.meta=St,t.midpoint=function(t,e){return st(t,at(t,e)/2,ot(t,e))},t.moranIndex=function(t,e){var n,r,i=e.inputField,o=e.threshold||1e5,s=e.p||2,u=null!=(n=e.binary)&&n,l=ks(t,{alpha:e.alpha||-1,binary:u,p:s,standardization:null==(r=e.standardization)||r,threshold:o}),h=[];pt(t,function(t){var e=t.properties||{};h.push(e[i])});for(var c=Va(h),f=function(t){var e,n=Va(t),r=0,i=a(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r+=Math.pow(o-n,2)}}catch(t){i.e(t)}finally{i.f()}return r/t.length}(h),g=0,p=0,v=0,d=0,y=l.length,m=0;m<y;m++){for(var _=0,x=0;x<y;x++)g+=l[m][x]*(h[m]-c)*(h[x]-c),p+=l[m][x],v+=Math.pow(l[m][x]+l[x][m],2),_+=l[m][x]+l[x][m];d+=Math.pow(_,2)}var E=g/p/f,k=-1/(y-1),b=(y*y*(v*=.5)-y*d+p*p*3)/((y-1)*(y+1)*(p*p))-k*k,w=Math.sqrt(b);return{expectedMoranIndex:k,moranIndex:E,stdNorm:w,zNorm:(E-k)/w}},t.multiLineString=C,t.multiPoint=T,t.multiPolygon=O,t.nearestNeighborAnalysis=function(t,e){var n=(e=e||{}).studyArea||qt(Ot(t)),r=e.properties||{},i=e.units||\"kilometers\",o=[];pt(t,function(t){o.push(si(t))});var s=o.length,a=o.map(function(t,e){return at(t,Wa(t,P(o.filter(function(t,n){return n!==e}))).geometry.coordinates,{units:i})}).reduce(function(t,e){return t+e},0)/s,u=s/j(Mt(n),\"meters\",i),l=1/(2*Math.sqrt(u)),h=.26136/Math.sqrt(s*u);return r.nearestNeighborAnalysis={units:i,arealUnits:i+\"²\",observedMeanDistance:a,expectedMeanDistance:l,nearestNeighborIndex:a/l,numberOfPoints:s,zScore:(a-l)/h},n.properties=r,n},t.nearestPoint=Wa,t.nearestPointOnLine=hn,t.nearestPointToLine=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case\"GeometryCollection\":return yt(t,function(t){\"Point\"===t.type&&e.push({type:\"Feature\",properties:{},geometry:t})}),{type:\"FeatureCollection\",features:e};case\"FeatureCollection\":return t.features=t.features.filter(function(t){return\"Point\"===t.geometry.type}),t;default:throw new Error(\"points must be a Point Collection\")}}(t);if(!o.features.length)throw new Error(\"points must contain features\");if(!e)throw new Error(\"line is required\");if(\"LineString\"!==rt(e))throw new Error(\"line must be a LineString\");var s=1/0,a=null;return pt(o,function(t){var n=Ja(t,e,{units:r});n<s&&(s=n,a=t)}),a&&(a.properties=ru(ru(ru({},{dist:s}),a.properties),i)),a},t.planepoint=function(t,e){var n=J(t),r=nt(e).coordinates[0];if(r.length<4)throw new Error(\"OuterRing of a Polygon must have 4 or more Positions.\");var i=\"Feature\"===e.type&&e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],l=n[1],h=r[0][0],c=r[0][1],f=void 0!==o?o:r[0][2],g=r[1][0],p=r[1][1],v=void 0!==s?s:r[1][2],d=r[2][0],y=r[2][1],m=void 0!==a?a:r[2][2];return(m*(u-h)*(l-p)+f*(u-g)*(l-y)+v*(u-d)*(l-c)-v*(u-h)*(l-y)-m*(u-g)*(l-c)-f*(u-d)*(l-p))/((u-h)*(l-p)+(u-g)*(l-y)+(u-d)*(l-c)-(u-h)*(l-y)-(u-g)*(l-c)-(u-d)*(l-p))},t.point=w,t.pointGrid=Gs,t.pointOnFeature=function(t){for(var e=function(t){return\"FeatureCollection\"!==t.type?\"Feature\"!==t.type?P([k(t)]):P([t]):t}(t),n=Tn(e),r=!1,i=0;!r&&i<e.features.length;){var o=e.features[i].geometry,s=!1;if(\"Point\"===o.type)n.geometry.coordinates[0]===o.coordinates[0]&&n.geometry.coordinates[1]===o.coordinates[1]&&(r=!0);else if(\"MultiPoint\"===o.type)for(var a=!1,u=0;!a&&u<o.coordinates.length;)n.geometry.coordinates[0]===o.coordinates[u][0]&&n.geometry.coordinates[1]===o.coordinates[u][1]&&(r=!0,a=!0),u++;else if(\"LineString\"===o.type)for(var l=0;!s&&l<o.coordinates.length-1;)iu(n.geometry.coordinates[0],n.geometry.coordinates[1],o.coordinates[l][0],o.coordinates[l][1],o.coordinates[l+1][0],o.coordinates[l+1][1])&&(s=!0,r=!0),l++;else if(\"MultiLineString\"===o.type)for(var h=0;h<o.coordinates.length;){s=!1;for(var c=0,f=o.coordinates[h];!s&&c<f.length-1;)iu(n.geometry.coordinates[0],n.geometry.coordinates[1],f[c][0],f[c][1],f[c+1][0],f[c+1][1])&&(s=!0,r=!0),c++;h++}else\"Polygon\"!==o.type&&\"MultiPolygon\"!==o.type||Yt(n,o)&&(r=!0);i++}if(r)return n;for(var g=P([]),p=0;p<e.features.length;p++)g.features=g.features.concat(Ls(e.features[p]).features);return w(Wa(n,g).geometry.coordinates)},t.pointToLineDistance=Ja,t.pointToPolygonDistance=function t(e,r){var i,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null!=(i=s.method)?i:\"geodesic\",u=null!=(o=s.units)?o:\"kilometers\";if(!e)throw new Error(\"point is required\");if(!r)throw new Error(\"polygon or multi-polygon is required\");var l,h=nt(r);if(\"MultiPolygon\"===h.type){var g=h.coordinates.map(function(n){return t(e,N(n),{method:a,units:u})});return Math.min.apply(Math,v(g.map(Math.abs)))*(Yt(e,r)?-1:1)}if(h.coordinates.length>1){var p=n(l=h.coordinates.map(function(n){return t(e,N([n]),{method:a,units:u})}))||c(l)||m(l)||f(),d=p[0],y=p.slice(1);if(d>=0)return d;var _=Math.min.apply(Math,v(y));return _<0?Math.abs(_):Math.min(_,Math.abs(d))}var x=ue(h),E=1/0;return _t(x,function(t){E=Math.min(E,Ja(e,t,{method:a,units:u}))}),Yt(e,h)?-E:E},t.points=I,t.pointsWithinPolygon=ou,t.polygon=N,t.polygonSmooth=function(t,e){(e=e||{}).iterations=e.iterations||1;var n=e.iterations,r=[];if(!t)throw new Error(\"inputPolys is required\");return yt(t,function(t,e,i){if(\"Polygon\"===t.type){for(var o=[[]],s=0;s<n;s++){var a=[],u=t;s>0&&(u=N(o).geometry),fu(u,a),o=a.slice(0)}r.push(N(o,i))}else{if(\"MultiPolygon\"!==t.type)throw new Error(\"geometry is invalid, must be Polygon or MultiPolygon\");for(var l=[[[]]],h=0;h<n;h++){var c=[],f=t;h>0&&(f=O(l).geometry),gu(f,c),l=c.slice(0)}r.push(O(l,i))}}),P(r)},t.polygonTangents=function(t,e){var n,r=K(t),i=K(e),o=[],s=[],a=Ot(e),u=0,l=null;switch(r[0]>a[0]&&r[0]<a[2]&&r[1]>a[1]&&r[1]<a[3]&&(u=(l=Wa(t,Ls(e))).properties.featureIndex),rt(e)){case\"Polygon\":o=i[0][u],s=i[0][0],null!==l&&l.geometry.coordinates[1]<r[1]&&(s=i[0][u]),n=du(i[0][0],i[0][i[0].length-1],r);var h=p(pu(i[0],r,n,o,s),2);o=h[0],s=h[1];break;case\"MultiPolygon\":for(var c=0,f=0,g=0,v=0;v<i[0].length;v++){c=v;for(var d=!1,y=0;y<i[0][v].length;y++){if(f=y,g===u){d=!0;break}g++}if(d)break}o=i[0][c][f],s=i[0][c][f],n=du(i[0][0][0],i[0][0][i[0][0].length-1],r),i.forEach(function(t){var e=p(pu(t[0],r,n,o,s),2);o=e[0],s=e[1]})}return P([w(o),w(s)])},t.polygonToLine=ue,t.polygonize=function(t){var e=cu.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){hu.findEdgeRingContaining(t,r)&&r.push(t)}),P(r.map(function(t){return t.toPolygon()}))},t.polygons=S,t.projection=ku,t.propEach=ft,t.propReduce=gt,t.propertiesContainsFilter=Oi,t.quadratAnalysis=function(t,e){for(var n=(e=e||{}).studyBbox||Ot(t),r=e.confidenceLevel||20,i=t.features,o=i.length,s=Mt(qt(n)),u=Ys(n,Math.sqrt(s/o*2),{units:\"meters\"}).features,l={},h=0;h<u.length;h++)l[h]={box:Ot(u[h]),cnt:0};var c,f=0,g=a(i);try{for(g.s();!(c=g.n()).done;)for(var p=c.value,v=0,d=Object.keys(l);v<d.length;v++){var y=d[v],m=l[y].box;if(wu(J(p),m)){l[y].cnt+=1,f+=1;break}}}catch(t){g.e(t)}finally{g.f()}for(var _=0,x=0,E=Object.keys(l);x<E.length;x++){var k=l[E[x]].cnt;k>_&&(_=k)}for(var b=[],w=Object.keys(l).length,I=f/w,N=0,S=0;S<_+1;S++)N+=Math.exp(-I)*Math.pow(I,S)/Iu(S),b.push(N);for(var M=[],L=0,P=0;P<_+1;P++){for(var C=0,T=Object.keys(l);C<T.length;C++)l[T[C]].cnt===P&&(L+=1);var O=L/w;M.push(O)}for(var R=0,A=0;A<_+1;A++){var D=Math.abs(b[A]-M[A]);D>R&&(R=D)}var F=bu[r]/Math.sqrt(w),q={criticalValue:F,isRandom:!0,maxAbsoluteDifference:R,observedDistribution:M};return R>F&&(q.isRandom=!1),q},t.radiansToDegrees=B,t.radiansToLength=D,t.random=Ru,t.randomLineString=Cu,t.randomPoint=Lu,t.randomPolygon=Pu,t.randomPosition=Nu,t.rectangleGrid=Bs,t.rewind=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!U(r=r||{}))throw new Error(\"options is invalid\");var i=null!=(e=r.mutate)&&e,o=null!=(n=r.reverse)&&n;if(!t)throw new Error(\"<geojson> is required\");if(\"boolean\"!=typeof o)throw new Error(\"<reverse> must be a boolean\");if(\"boolean\"!=typeof i)throw new Error(\"<mutate> must be a boolean\");i||\"Point\"===t.type||\"MultiPoint\"===t.type||(t=wi(t));var s=[];switch(t.type){case\"GeometryCollection\":return yt(t,function(t){Au(t,o)}),t;case\"FeatureCollection\":return pt(t,function(t){pt(Au(t,o),function(t){s.push(t)})}),P(s)}return Au(t,o)},t.rhumbBearing=ut,t.rhumbDestination=bs,t.rhumbDistance=ws,t.round=A,t.sample=function(t,e){if(!t)throw new Error(\"fc is required\");if(null==e)throw new Error(\"num is required\");if(\"number\"!=typeof e)throw new Error(\"num must be a number\");return P(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.sector=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!U(i=i||{}))throw new Error(\"options is invalid\");var o=i.properties;if(!t)throw new Error(\"center is required\");if(null==n)throw new Error(\"bearing1 is required\");if(null==r)throw new Error(\"bearing2 is required\");if(!e)throw new Error(\"radius is required\");if(\"object\"!==y(i))throw new Error(\"options must be an object\");if(qu(n)===qu(r))return bi(t,e,i);var s=K(t),a=wa(t,e,n,r,i),u=[[s]];return ht(a,function(t){u[0].push(t)}),u[0].push(s),N(u,o)},t.segmentEach=Et,t.segmentReduce=kt,t.shortestPath=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!U(n=n||{}))throw new Error(\"options is invalid\");var r=n.obstacles||P([]),i=n.resolution||100;if(!t)throw new Error(\"start is required\");if(!e)throw new Error(\"end is required\");if(i&&(!X(i)||i<=0))throw new Error(\"options.resolution must be a number, greater than 0\");var o=J(t),s=J(e);if(t=w(o),e=w(s),\"FeatureCollection\"===r.type){if(0===r.features.length)return M([o,s])}else{if(\"Polygon\"!==r.type)throw new Error(\"invalid obstacles\");r=P([k(nt(r))])}var a=r;a.features.push(t),a.features.push(e);var u=p(Ot(Vu(qt(Ot(a)),1.15)),4),l=u[0],h=u[1],c=u[2],f=u[3],g=at([l,h],[c,h],n)/i;a.features.pop(),a.features.pop();for(var v,d,y=g/at([l,h],[c,h],n)*(c-l),m=g/at([l,h],[l,f],n)*(f-h),_=c-l,x=f-h,E=Math.floor(_/y),b=Math.floor(x/m),I=(_-E*y)/2,N=[],S=[],L=1/0,C=1/0,T=f-(x-b*m)/2,O=0;T>=h;){for(var R=[],A=[],D=l+I,F=0;D<=c;){var q=w([D,T]),V=Uu(q,r);R.push(V?0:1),A.push(D+\"|\"+T);var G=at(q,t);!V&&G<L&&(L=G,v={x:F,y:O});var B=at(q,e);!V&&B<C&&(C=B,d={x:F,y:O}),D+=y,F++}S.push(R),N.push(A),T-=m,O++}var Y=new zu(S,{diagonal:!0}),z=Y.grid[v.y][v.x],j=Y.grid[d.y][d.x],Z=Yu.search(Y,z,j),H=[o];return Z.forEach(function(t){var e=N[t.x][t.y].split(\"|\");H.push([+e[0],+e[1]])}),H.push(s),Me(M(H))},t.simplify=function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!U(i=null!=i?i:{}))throw new Error(\"options is invalid\");var o=null!=(e=i.tolerance)?e:1,s=null!=(n=i.highQuality)&&n,a=null!=(r=i.mutate)&&r;if(!t)throw new Error(\"geojson is required\");if(o&&o<0)throw new Error(\"invalid tolerance\");return!0!==a&&(t=wi(t)),yt(t,function(t){!function(t,e,n){var r=t.type;if(\"Point\"===r||\"MultiPoint\"===r)return t;if(Me(t,{mutate:!0}),\"GeometryCollection\"!==r)switch(r){case\"LineString\":t.coordinates=Wu(t.coordinates,e,n);break;case\"MultiLineString\":t.coordinates=t.coordinates.map(function(t){return Wu(t,e,n)});break;case\"Polygon\":t.coordinates=Ju(t.coordinates,e,n);break;case\"MultiPolygon\":t.coordinates=t.coordinates.map(function(t){return Ju(t,e,n)})}}(t,o,s)}),t},t.square=Pa,t.squareGrid=Ys,t.standardDeviationalEllipse=function(t,e){var n;if(!U(e=e||{}))throw new Error(\"options is invalid\");var r=e.steps||64,i=e.weight,o=e.properties||{};if(!X(r))throw new Error(\"steps must be a number\");if(!U(o))throw new Error(\"properties must be a number\");var s=dt(t).length,a=oi(t,{weight:i}),u=0,l=0,h=0;pt(t,function(t){var e,n=i&&(null==(e=t.properties)?void 0:e[i])||1,r=Qu(K(t),K(a));u+=Math.pow(r.x,2)*n,l+=Math.pow(r.y,2)*n,h+=r.x*r.y*n});var c=u-l,f=Math.sqrt(Math.pow(c,2)+4*Math.pow(h,2)),g=2*h,p=Math.atan((c+f)/g),v=180*p/Math.PI,d=0,y=0,m=0;pt(t,function(t){var e,n=i&&(null==(e=t.properties)?void 0:e[i])||1,r=Qu(K(t),K(a));d+=Math.pow(r.x*Math.cos(p)-r.y*Math.sin(p),2)*n,y+=Math.pow(r.x*Math.sin(p)+r.y*Math.cos(p),2)*n,m+=n});var _=Math.sqrt(2*d/m),x=Math.sqrt(2*y/m),E=Ns(a,_,x,{units:\"degrees\",angle:v,steps:r,properties:o}),k=ou(t,P([E])),b={meanCenterCoordinates:K(a),semiMajorAxis:_,semiMinorAxis:x,numberOfFeatures:s,angle:v,percentageWithinEllipse:100*dt(k).length/s};return E.properties=null!=(n=E.properties)?n:{},E.properties.standardDeviationalEllipse=b,E},t.tag=function(t,e,n,r){return t=wi(t),e=wi(e),pt(t,function(t){t.properties||(t.properties={}),pt(e,function(e){t.properties&&e.properties&&void 0===t.properties[r]&&Yt(t,e)&&(t.properties[r]=e.properties[n])})}),t},t.tesselate=function(t){if(!t.geometry||\"Polygon\"!==t.geometry.type&&\"MultiPolygon\"!==t.geometry.type)throw new Error(\"input must be a Polygon or MultiPolygon\");var e={type:\"FeatureCollection\",features:[]};return\"Polygon\"===t.geometry.type?e.features=nl(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(nl(t))}),e},t.tin=Ui,t.toMercator=yu,t.toWgs84=mu,t.transformRotate=Is,t.transformScale=Vu,t.transformTranslate=function(t,e,n,r){if(!U(r=r||{}))throw new Error(\"options is invalid\");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error(\"geojson is required\");if(null==e||isNaN(e))throw new Error(\"distance is required\");if(o&&\"number\"!=typeof o&&isNaN(o))throw new Error(\"zTranslation is not a number\");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error(\"direction is required\");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=wi(t)),ht(t,function(t){var r=K(bs(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},t.triangleGrid=zs,t.truncate=Ca,t.union=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(yt(t,function(t){n.push(t.coordinates)}),n.length<2)throw new Error(\"Must have at least 2 geometries\");var r=vs.apply(_s,[n[0]].concat(v(n.slice(1))));return 0===r.length?null:1===r.length?N(r[0],e.properties):O(r,e.properties)},t.unkinkPolygon=function(t){var e=[];return _t(t,function(t){\"Polygon\"===t.geometry.type&&pt(il(t),function(n){e.push(N(n.geometry.coordinates,t.properties))})}),P(e)},t.validateBBox=Z,t.validateId=H,t.voronoi=function(t,e){if(!U(e=e||{}))throw new Error(\"options is invalid\");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error(\"points is required\");if(!Array.isArray(n))throw new Error(\"bbox is invalid\");return et(t,\"Point\",\"points\"),P(function(){var t=fl,e=gl,n=null;function r(r){return new Zl(r.map(function(n,i){var o=[Math.round(t(n,i,r)/jl)*jl,Math.round(e(n,i,r)/jl)*jl];return o.index=i,o.data=n,o}),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:cl(+e),r):t},r.y=function(t){return arguments.length?(e=\"function\"==typeof t?t:cl(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(function(e,n){return Object.assign(function(t){return(t=t.slice()).push(t[0]),N([t])}(e),{properties:Ni(t.features[n].properties)})}))}});"},"sourceMaps":null,"error":null,"hash":"539d2ffad68c6b36e08d43e8b0c61014","cacheData":{"env":{}}}